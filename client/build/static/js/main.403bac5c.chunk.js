(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{26:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var a,s=n(1),r=n.n(s),i=n(19),c=n.n(i),o=(n(26),n(3)),l=n(4),d=n(6),h=n(5),u=n(7),p=(n(27),n(2)),b=(n(28),n.p+"static/media/search_svg.bf7f9301.svg"),m=n.p+"static/media/search_toggler.47ab97e5.svg",j=n.p+"static/media/grid_svg.5fef0c1d.svg",g=n.p+"static/media/filter_svg.5ad9418f.svg",O=n.p+"static/media/recipe_svg.a7178d0c.svg",f=n.p+"static/media/dummy_icon.bd7bf99d.svg",x=n(0),v=function(){return Object(x.jsx)(s.Fragment,{children:Object(x.jsxs)("a",{className:"navbar-brand handwritten-text",href:"/",children:[Object(x.jsx)("img",{id:"logo-img",src:"data:image/png;base64,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",alt:"Logo"}),"Recipe Sharing"]})})},I=function(){return Object(x.jsx)(s.Fragment,{children:Object(x.jsx)("button",{className:"navbar-toggler nav-item",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle search bar",children:Object(x.jsx)("img",{className:"navbar-toggler-icon nav-icon",src:m,alt:"Search"})})})},y=function(e){var t=e.text,n=e.href,a=e.source;return Object(x.jsx)(s.Fragment,{children:Object(x.jsxs)("li",{className:"nav-item nav-icon-item ".concat(n===window.location.pathname?"active":""),children:[Object(x.jsx)("a",{className:"d-md-none",href:n,children:Object(x.jsx)("img",{className:"nav-icon",src:a,alt:"".concat(t," icon")})}),Object(x.jsx)("a",{className:"nav-link d-none d-md-block",href:n,children:t})]})})},k=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={filterActive:!1},e.handleClick=e.handleClick.bind(Object(p.a)(e)),e}return Object(l.a)(n,[{key:"handleClick",value:function(){var e=document.getElementById("filter-button");this.setState({filterActive:e&&"true"===e.ariaExpanded})}},{key:"render",value:function(){return Object(x.jsx)(s.Fragment,{children:"/browse"===window.location.pathname?Object(x.jsxs)("li",{className:"nav-item nav-icon-item ".concat(this.state.filterActive?"active":""),children:[Object(x.jsx)("div",{className:"d-md-none","data-bs-toggle":"collapse","data-bs-target":"#filtering-menu","aria-expanded":"false","aria-controls":"filtering-menu",id:"filter-button-icon",onClick:this.handleClick,children:Object(x.jsx)("img",{className:"nav-icon",src:this.props.source,alt:"".concat(this.props.text," icon")})}),Object(x.jsx)("div",{className:"nav-link d-none d-md-block","data-bs-toggle":"collapse","data-bs-target":"#filtering-menu","aria-expanded":"false","aria-controls":"filtering-menu",id:"filter-button",onClick:this.handleClick,children:this.props.text})]}):Object(x.jsxs)("li",{className:"nav-item nav-icon-item disabled",children:[Object(x.jsx)("div",{className:"d-md-none",id:"filter-button-icon",children:Object(x.jsx)("img",{className:"nav-icon",src:this.props.source,alt:"".concat(this.props.text," icon")})}),Object(x.jsx)("div",{className:"nav-link d-none d-md-block",id:"filter-button",children:this.props.text})]})})}}]),n}(r.a.Component),C=function(e){var t=e.loggedIn;return Object(x.jsx)(s.Fragment,{children:Object(x.jsxs)("ul",{className:"navbar-nav mr-auto",children:[Object(x.jsx)(y,{text:"Browse",href:"/browse",source:j}),Object(x.jsx)(k,{text:"Filter",source:g}),t&&null!==window.localStorage.getItem("user")?Object(x.jsx)(y,{text:"Add a recipe",href:"/addrecipe",source:O}):null]})})},N=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={searchTerm:""},e.handleInputChange=e.handleInputChange.bind(Object(p.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(p.a)(e)),e}return Object(l.a)(n,[{key:"handleInputChange",value:function(e){this.setState({searchTerm:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.handleSearchChange(this.state.searchTerm)}},{key:"render",value:function(){return Object(x.jsx)(s.Fragment,{children:Object(x.jsx)("form",{className:"d-flex my-2 my-lg-0 flex-grow-1",onSubmit:this.handleSubmit,children:Object(x.jsxs)("div",{className:"input-group",children:[Object(x.jsx)("input",{className:"form-control mr-sm-2 search-bar",id:"navbar-searchbar",type:"search",placeholder:"Enter a search term...","aria-label":"Search term input",onChange:this.handleInputChange,required:!0}),Object(x.jsx)("button",{className:"btn btn-search",type:"submit",id:"button-addon2",children:Object(x.jsx)("img",{className:"nav-icon",src:b,alt:"Search"})})]})})})}}]),n}(r.a.Component),S=function(e){var t=e.loggedIn,n=e.userIcon;if(t){var a=JSON.parse(window.localStorage.getItem("user")).username;return Object(x.jsx)(s.Fragment,{children:Object(x.jsx)("ul",{className:"navbar-nav mr-auto",children:Object(x.jsxs)("li",{id:"user-info",children:[Object(x.jsx)("a",{href:"/user/".concat(a),children:Object(x.jsx)("img",{id:"user-icon",src:n,alt:"User icon"})}),Object(x.jsx)("a",{id:"username-link",className:"nav-link d-none d-md-block ".concat(window.location.pathname==="/user/".concat(a)?"active":""),href:"/user/".concat(a),children:Object(x.jsx)("span",{className:"navbar-text",children:a})})]})})})}return Object(x.jsx)(s.Fragment,{children:Object(x.jsx)("ul",{className:"navbar-nav mr-auto",children:Object(x.jsx)("li",{className:"nav-item ".concat("/login"===window.location.pathname?"active":""),children:Object(x.jsx)("a",{className:"nav-link",href:"/login",children:Object(x.jsx)("span",{className:"navbar-text",children:"Login"})})})})})},w=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={searchTerm:"",searchRedirect:!1,loggedIn:!1,userIcon:f},e.handleSearchChange=e.handleSearchChange.bind(Object(p.a)(e)),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){for(var e=this,t=document.cookie.split(";").map((function(e){return e.split("=")[0]})),n=0;n<t.length;n++)t[n]=t[n].trim();if(this.setState({loggedIn:t.includes("authentication")}),t.includes("authentication")){var a=JSON.parse(window.localStorage.getItem("user")).username;fetch("/userdata/".concat(a),{method:"GET"}).then((function(e){if(e.ok)return e.json();throw new Error("Something went wrong...")})).then((function(t){t.image&&e.setState({userIcon:"/".concat(t.image.replace(/\\/g,"/").replace("../client/public/",""))})})).catch((function(e){console.error(e)}))}}},{key:"handleSearchChange",value:function(e){if(this.setState({searchTerm:e}),"/browse"===window.location.pathname){var t=this.props.filterSearch.current.constructFilters();t.searchPhrase=e,this.props.contentSearch.current.filteringHandler(t)}else this.setState({searchRedirect:!0})}},{key:"render",value:function(){return Object(x.jsxs)(s.Fragment,{children:[this.state.searchRedirect?Object(x.jsx)(u.a,{to:{pathname:"/browse",state:{searchTerm:this.state.searchTerm}}}):null,Object(x.jsxs)("nav",{className:"navbar fixed-top navbar-expand-sm navbar-custom",id:"main-navbar",children:[Object(x.jsx)(v,{}),Object(x.jsxs)("div",{className:"navbar-nav-items",children:[Object(x.jsx)(C,{loggedIn:this.state.loggedIn}),Object(x.jsx)(I,{})]}),Object(x.jsx)("div",{className:"navbar-collapse collapse w-100 order-1 order-sm-0 dual-collapse2",id:"navbarSupportedContent",children:Object(x.jsx)(N,{handleSearchChange:this.handleSearchChange})}),Object(x.jsx)("div",{className:"float-end",children:Object(x.jsx)(S,{loggedIn:this.state.loggedIn,userIcon:this.state.userIcon})})]})]})}}]),n}(r.a.Component),E=(n(38),n(39),["title","titleId"]);function A(){return A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},A.apply(this,arguments)}function F(e,t){if(null==e)return{};var n,a,s=function(e,t){if(null==e)return{};var n,a,s={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function T(e,t){var n=e.title,r=e.titleId,i=F(e,E);return s.createElement("svg",A({width:24,height:24,xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},i),n?s.createElement("title",{id:r},n):null,s.createElement("g",null,a||(a=s.createElement("title",null,"Star")),s.createElement("path",{stroke:"#000000",opacity:1,fill:"none",strokeWidth:2,style:{strokeLinejoin:"bevel"},d:"M 15.489 8.507 L 12.494 1.998 L 12 1.587 L 11.32 1.965 L 8.416 8.127 L 7.769 8.444 L 1.838 9.329 L 1.22 9.802 L 1.406 10.53 L 5.945 14.923 L 6.007 15.618 L 4.957 22.001 L 5.544 22.349 L 6.223 22.191 L 11.691 19.441 L 12.369 19.378 L 17.558 22.191 L 18.454 22.412 L 18.887 21.874 L 17.497 15.397 L 17.869 14.669 L 21.574 11.288 L 22.78 9.93 L 22.562 9.266 L 18.115 8.729 L 15.489 8.507 Z"})))}var R=s.forwardRef(T),B=(n.p,function(e){var t=e.categories,n=[];return t.forEach((function(e){n.push(Object(x.jsx)("option",{value:e,children:e},e))})),Object(x.jsxs)(s.Fragment,{children:[Object(x.jsx)("h5",{children:Object(x.jsx)("label",{htmlFor:"categories-select",children:"Category"})}),Object(x.jsxs)("select",{name:"categories",id:"categories-select",className:"form-select",defaultValue:"placeholder",children:[Object(x.jsx)("option",{value:"placeholder",disabled:!0,hidden:!0,children:"Select a category"}),n]})]})}),D=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={checked:!1},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.startChecked&&this.setState({checked:!0})}},{key:"render",value:function(){var e=this;return Object(x.jsx)(s.Fragment,{children:Object(x.jsxs)("div",{className:"form-check",children:[Object(x.jsx)("input",{className:"form-check-input",type:"checkbox",id:"checkbox-".concat(this.props.checklistName,"-").concat(this.props.value),name:this.props.value,value:this.props.value,checked:this.state.checked,onChange:function(t){e.setState({checked:!e.state.checked})}}),Object(x.jsxs)("label",{className:"form-check-label filter-checkbox-item",htmlFor:"checkbox-".concat(this.props.checklistName,"-").concat(this.props.value),children:[" ",this.props.name]})]})})}}]),n}(r.a.Component),q=function(e){var t=e.items;return Object(x.jsx)(s.Fragment,{children:t})},U=function(e){var t=e.include,n=e.exclude,a=e.ingredients,r=e.callbackExlude,i=e.callbackInclude,c=e.customExcludeIngredients,o=e.customIncludeIngredients;return Object(x.jsxs)(s.Fragment,{children:[Object(x.jsx)("h5",{children:Object(x.jsx)("button",{className:"drop-select-btn dropdown-toggle",type:"button","data-bs-toggle":"collapse","data-bs-target":"#filterIngredientsContent","aria-controls":"filterIngredientsContent","aria-expanded":"false","aria-label":"Toggle ingredient filters",children:"Ingredients"})}),Object(x.jsxs)("div",{id:"filterIngredientsContent",className:"collapse",children:[Object(x.jsx)("h6",{children:"Include"}),Object(x.jsx)(H,{placeholder:"Search for an ingredient...",items:a,id:"ingredients-include-drowpdown-options",callback:i,customSet:o,checklistName:"include"}),Object(x.jsxs)("div",{className:"popular-item-container",children:[Object(x.jsx)("h6",{children:"Popular"}),Object(x.jsx)(q,{items:t})]}),Object(x.jsx)("h6",{style:{marginTop:"20px"},children:"Exclude"}),Object(x.jsx)(H,{placeholder:"Search for an ingredient...",items:a,id:"ingredients-exclude-drowpdown-options",callback:r,customSet:c,checklistName:"exclude"}),Object(x.jsxs)("div",{className:"popular-item-container",children:[Object(x.jsx)("h6",{children:"Popular"}),Object(x.jsx)(q,{items:n})]})]})]})},P=function(e){var t=e.topTags,n=e.tags,a=e.callback,r=e.customTags;return Object(x.jsxs)(s.Fragment,{children:[Object(x.jsx)("h5",{children:Object(x.jsx)("button",{className:"drop-select-btn dropdown-toggle",type:"button","data-bs-toggle":"collapse","data-bs-target":"#filterTagsContent","aria-controls":"filterTagsContent","aria-expanded":"false","aria-label":"Toggle tag filters",children:"Tags"})}),Object(x.jsxs)("div",{id:"filterTagsContent",className:"collapse",children:[Object(x.jsx)(H,{placeholder:"Search for a tag...",items:n,id:"tag-drowpdown-options",callback:a,customSet:r,checklistName:"tag-list"}),Object(x.jsxs)("div",{className:"popular-item-container",children:[Object(x.jsx)("h6",{children:"Popular"}),Object(x.jsx)(q,{items:t,checklistName:"top-tag-list"})]})]})]})},H=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={error:null},e.handleAddingItems=e.handleAddingItems.bind(Object(p.a)(e)),e}return Object(l.a)(n,[{key:"handleAddingItems",value:function(e){e.preventDefault();var t=document.getElementById(this.props.id).value.toLowerCase().trim();if(""!==t){var n=this.props.customSet;if(n.includes(t)){this.setState({error:"Ingredient already added"})}else n.push(t),document.getElementById(this.props.id).value="",this.props.callback(n),this.setState({error:null})}}},{key:"render",value:function(){var e=this,t=[];return this.props.customSet.forEach((function(n){t.push(Object(x.jsx)(D,{checklistName:e.props.checklistName,name:n,value:n,startChecked:!0},"checklist-".concat(n)))})),Object(x.jsx)(s.Fragment,{children:Object(x.jsxs)("div",{className:"search-container",children:[this.state.error?Object(x.jsx)("div",{className:"alert alert-danger",role:"alert",children:this.state.error}):null,Object(x.jsxs)("div",{className:"search-dropdown-container",children:[Object(x.jsxs)("div",{className:"form-search-container",children:[Object(x.jsx)("input",{className:"form-control",id:this.props.id,list:"items-".concat(this.props.id),placeholder:this.props.placeholder,autoComplete:"off"}),Object(x.jsx)("datalist",{id:"items-".concat(this.props.id),children:this.props.items})]}),Object(x.jsx)("button",{className:"btn-checklist-add",onClick:function(t){return e.handleAddingItems(t)},children:"Add"})]}),Object(x.jsxs)("div",{className:"chosen-items-container",children:[this.props.customSet.length>0?Object(x.jsx)("h6",{children:"Custom"}):null,t]})]})})}}]),n}(r.a.Component),L=function(){return Object(x.jsxs)(s.Fragment,{children:[Object(x.jsx)("h5",{style:{marginTop:"10px"},children:"Minimum rating"}),Object(x.jsxs)("div",{className:"star-rating",id:"star-rating",children:[Object(x.jsx)("input",{type:"radio",name:"stars",id:"star-5",value:"5"}),Object(x.jsx)("label",{className:"form-check-label",htmlFor:"star-5",children:Object(x.jsx)(R,{className:"star-rating-icon",alt:"star"})}),Object(x.jsx)("input",{type:"radio",name:"stars",id:"star-4",value:"4"}),Object(x.jsx)("label",{className:"form-check-label",htmlFor:"star-4",children:Object(x.jsx)(R,{className:"star-rating-icon",alt:"star"})}),Object(x.jsx)("input",{type:"radio",name:"stars",id:"star-3",value:"3"}),Object(x.jsx)("label",{className:"form-check-label",htmlFor:"star-3",children:Object(x.jsx)(R,{className:"star-rating-icon",alt:"star"})}),Object(x.jsx)("input",{type:"radio",name:"stars",id:"star-2",value:"2"}),Object(x.jsx)("label",{className:"form-check-label",htmlFor:"star-2",children:Object(x.jsx)(R,{className:"star-rating-icon",alt:"star"})}),Object(x.jsx)("input",{type:"radio",name:"stars",id:"star-1",value:" 1"}),Object(x.jsx)("label",{className:"form-check-label",htmlFor:"star-1",children:Object(x.jsx)(R,{className:"star-rating-icon",alt:"star"})})]})]})},V=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={customExcludeIngredients:[],customIncludeIngredients:[],customTags:[]},e.updateCustomExcludeIngredients=e.updateCustomExcludeIngredients.bind(Object(p.a)(e)),e.updateCustomIncludeIngredients=e.updateCustomIncludeIngredients.bind(Object(p.a)(e)),e.updateCustomTags=e.updateCustomTags.bind(Object(p.a)(e)),e.getCheckedElements=e.getCheckedElements.bind(Object(p.a)(e)),e.checkAll=e.checkAll.bind(Object(p.a)(e)),e.constructFilters=e.constructFilters.bind(Object(p.a)(e)),e}return Object(l.a)(n,[{key:"updateCustomExcludeIngredients",value:function(e){this.setState({customExcludeIngredients:e})}},{key:"updateCustomIncludeIngredients",value:function(e){this.setState({customIncludeIngredients:e})}},{key:"updateCustomTags",value:function(e){this.setState({customTags:e})}},{key:"getCheckedElements",value:function(e,t){var n=[];return e.forEach((function(e){document.getElementById("checkbox-".concat(t,"-").concat(e)).checked&&n.push(e)})),n}},{key:"checkAll",value:function(e,t){e.forEach((function(e){document.getElementById("checkbox-".concat(t,"-").concat(e)).checked=!0}))}},{key:"constructFilters",value:function(){for(var e=this,t=document.getElementById("categories-select").value,n=0,a=1;a<=5;a++)document.getElementById("star-".concat(a)).checked&&(n=a);var s=this.getCheckedElements(this.state.customIncludeIngredients,"include"),r=this.getCheckedElements(this.state.customExcludeIngredients,"exclude"),i=this.getCheckedElements(this.state.customTags,"tag-list"),c=this.getCheckedElements(this.props.popTagNames,"top-tag-list"),o=this.getCheckedElements(this.props.popIngredientNames,"top-ingredient-include-list"),l=this.getCheckedElements(this.props.popIngredientNames,"top-ingredient-exclude-list");return this.setState({customIncludeIngredients:s,customExcludeIngredients:r,customTags:i},(function(){e.checkAll(e.state.customIncludeIngredients,"include"),e.checkAll(e.state.customExcludeIngredients,"exclude"),e.checkAll(e.state.customTags,"tag-list")})),{inIngredients:o.concat(this.state.customIncludeIngredients),outIngredients:l.concat(this.state.customExcludeIngredients),tags:c.concat(this.state.customTags),category:t,rating:n,searchPhrase:document.getElementById("navbar-searchbar").value}}},{key:"render",value:function(){var e=this;return Object(x.jsxs)(s.Fragment,{children:[Object(x.jsx)("h3",{id:"filtersHeader",children:"Filters"}),Object(x.jsxs)("form",{children:[Object(x.jsxs)("div",{className:"filter-menu-contents",children:[Object(x.jsx)(B,{categories:this.props.categories}),Object(x.jsx)(U,{include:this.props.topIngredientsInclude,exclude:this.props.topIngredientsExclude,ingredients:this.props.allIngredients,callbackExlude:this.updateCustomExcludeIngredients,callbackInclude:this.updateCustomIncludeIngredients,customExcludeIngredients:this.state.customExcludeIngredients,customIncludeIngredients:this.state.customIncludeIngredients}),Object(x.jsx)(P,{topTags:this.props.topTags,tags:this.props.allTags,callback:this.updateCustomTags,customTags:this.state.customTags}),Object(x.jsx)(L,{})]}),Object(x.jsx)("div",{className:"text-center mt-2",children:Object(x.jsx)("button",{id:"apply-filters-btn",onClick:function(t){t.preventDefault();var n=e.constructFilters();e.props.filteringCallback(n)},children:"Apply filters"})})]})]})}}]),n}(r.a.Component),W=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={categories:[],topTags:[],topIngredientsInclude:[],topIngredientsExclude:[],ingredientOptions:[],tagOptions:[],popIngredientNames:[],popTagNames:[]},e.handleFetchingFilters=e.handleFetchingFilters.bind(Object(p.a)(e)),e}return Object(l.a)(n,[{key:"handleFetchingFilters",value:function(e){var t=[],n=[];e.popIngredients.forEach((function(e){t.push(Object(x.jsx)(D,{name:e,value:e,checklistName:"top-ingredient-include-list"},"".concat(e,"-include"))),n.push(Object(x.jsx)(D,{name:e,value:e,checklistName:"top-ingredient-exclude-list"},"".concat(e,"-exclude")))}));var a=[];e.allIngredients.forEach((function(e){a.push(Object(x.jsx)("option",{value:e},e))}));var s=[];e.popTags.forEach((function(e){s.push(Object(x.jsx)(D,{name:e,value:e,checklistName:"top-tag-list"},"".concat(e,"-top")))}));var r=[];e.allTags.forEach((function(e){r.push(Object(x.jsx)("option",{value:e},"".concat(e,"-option")))})),this.setState({categories:e.allCategories,topTags:s,topIngredientsInclude:t,topIngredientsExclude:n,ingredientOptions:a,tagOptions:r,popIngredientNames:e.popIngredients,popTagNames:e.popTags})}},{key:"componentDidMount",value:function(){var e=this;fetch("/filters",{method:"GET"}).then((function(e){return e.json()})).then((function(t){return e.handleFetchingFilters(t)}))}},{key:"render",value:function(){return Object(x.jsx)(s.Fragment,{children:Object(x.jsx)("nav",{id:"filtering-menu",className:"collapse",children:Object(x.jsx)("div",{className:"filter-menu-container",children:Object(x.jsx)(V,{categories:this.state.categories,filteringCallback:this.props.filteringCallback,topTags:this.state.topTags,topIngredientsInclude:this.state.topIngredientsInclude,topIngredientsExclude:this.state.topIngredientsExclude,allIngredients:this.state.ingredientOptions,allTags:this.state.tagOptions,popIngredientNames:this.state.popIngredientNames,popTagNames:this.state.popTagNames,ref:this.props.filterSearch})})})})}}]),n}(r.a.Component),Q=(n(40),function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(x.jsxs)(s.Fragment,{children:[this.props.searchPhrase&&""!==this.props.searchPhrase?Object(x.jsxs)("h4",{className:"text-center",style:{fontWeight:"bold"},children:["Searching for: '",this.props.searchPhrase,"'"]}):null,Object(x.jsx)("div",{className:"content-grid-container",id:"content-grid-container",children:this.props.content})]})}}]),n}(r.a.Component)),G=Q,z=n(10),K=(n(41),n.p+"static/media/close-round-btn.29b488b4.svg"),M=n.p+"static/media/bookmark_svg.c0f24e3e.svg",Y=n.p+"static/media/star_svg.b5330ee3.svg",Z=function(e){var t=e.number,n=e.icon,a=e.userHasDone;return Object(x.jsx)(s.Fragment,{children:Object(x.jsxs)("div",{className:"popup-rating-container",style:{filter:a?"none":"brightness(0)"},children:[Object(x.jsx)("div",{className:"popup-number",style:{fontWeight:"bold",fontSize:"1.5em"},children:t}),Object(x.jsx)("img",{className:"popup-rating-icon",src:n,alt:"Rating icon"})]})})},J=function(e){var t=e.stepNumber,n=e.stepText;return Object(x.jsx)(s.Fragment,{children:Object(x.jsxs)("div",{className:"popup-step-container",children:[Object(x.jsxs)("div",{style:{fontWeight:"bold"},children:["Step ",t]}),Object(x.jsx)("div",{children:n})]})})},X=function(e){var t=e.ingredientName,n=e.quantity;return Object(x.jsx)(s.Fragment,{children:Object(x.jsxs)("div",{className:"popup-ingredient-item-container",children:[Object(x.jsx)("div",{className:"popup-ingredient-name",children:t}),Object(x.jsx)("div",{className:"popup-ingredient-quantity",children:n})]})})},_=function(e){var t=e.tagText;return Object(x.jsx)(s.Fragment,{children:Object(x.jsx)("div",{className:"popup-tag",children:t})})},$=function(e){var t=e.title,n=e.items;return Object(x.jsxs)("div",{style:{marginBottom:"20px"},children:[Object(x.jsx)("div",{style:{fontWeight:"bold"},children:t}),n]})},ee=function(e){var t=e.callback,n=e.data,a=[];n.tags.forEach((function(e){a.push(Object(x.jsx)(_,{tagText:e},e))}));var r=n.image;return r&&"/"!==r&&["/"].concat(r),Object(x.jsxs)(s.Fragment,{children:[Object(x.jsx)("img",{className:"popup-close-btn",src:K,onClick:t,alt:"Close button"}),Object(x.jsx)("img",{className:"search-popup-img",src:n.image,alt:n.title}),Object(x.jsxs)("div",{className:"popup-body",children:[Object(x.jsxs)("div",{className:"popup-header-container",children:[Object(x.jsxs)("div",{className:"popup-title-and-username-container",children:[Object(x.jsx)("h1",{className:"popup-title",children:n.title}),Object(x.jsxs)(z.b,{className:"popup-username",to:"users/".concat(n.author),children:["@",n.author]})]}),Object(x.jsxs)("div",{className:"popup-rating-and-bookmark-container",children:[Object(x.jsx)(Z,{number:n.bookmarks,icon:M,userHasDone:n.bookmarked}),Object(x.jsx)(Z,{number:n.stars,icon:Y,userHasDone:0!==n.rated})]})]}),Object(x.jsx)("div",{className:"popup-tags-container",children:a}),Object(x.jsxs)("div",{className:"ingredients-instructions-container",children:[Object(x.jsx)("div",{className:"ingredients-container",children:n.ingredients}),Object(x.jsxs)("div",{className:"instructions-container",children:[Object(x.jsx)("div",{style:{fontWeight:"bold"},children:"Instructions"}),Object(x.jsx)("div",{children:n.instructions})]})]}),Object(x.jsx)(z.b,{className:"popup-more-btn",to:"/recipes/".concat(n.id),children:"More"})]})]})},te=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={title:"",author:"",tags:[],id:""},e}return Object(l.a)(n,[{key:"updateData",value:function(e){var t=this;this.state.id!==e&&fetch("/recipes/".concat(e),{method:"GET",credentials:"include"}).then((function(e){return e.json()})).then((function(n){n.main=n.main.replace(/\\\\/g,"\\");var a=[];n.tags.forEach((function(e){a.push(e.name)})),null===a[0]&&(a=[]);var s=[];Object.keys(n.groups).forEach((function(e){s.push({name:"Default"===e?"Ingredients":e,ingredients:n.groups[e]})}));var r=[];s.forEach((function(e){var t=[];e.ingredients.forEach((function(e){t.push(Object(x.jsx)(X,{ingredientName:e.ingredient,quantity:e.amount},"ingredient-".concat(e.ingredient)))})),r.push(Object(x.jsx)($,{title:e.name,items:t},"group-".concat(e.name)))}));var i=[];n.instructions.forEach((function(e){i.push(Object(x.jsx)(J,{stepNumber:e.step,stepText:e.instruction},"instruction-".concat(e.step)))})),i.length>2&&(i.length=2),r.length>2&&(r.length=2),t.setState({title:n.title,author:n.author,bookmarks:n.bookmarks,bookmarked:1===Number(n.isBookmarked),stars:Number(n.avgRating),rated:Number(n.isRated),image:"/".concat(n.main.replace(/\\/g,"/").replace("../client/public/","")),tags:a,ingredients:r,instructions:i,id:e})}))}},{key:"render",value:function(){var e=this,t=this.props.display?"inline":"none",n=function(){return e.props.closeCallback()};return Object(x.jsx)(s.Fragment,{children:Object(x.jsx)("div",{className:"search-popup-container-bg",id:"search-popup-container-bg",style:{display:t},onClick:n,children:Object(x.jsx)("div",{className:"search-popup-container",style:{display:t},onClick:function(e){return e.stopPropagation()},children:Object(x.jsx)(ee,{callback:n,data:this.state})})})})}}]),n}(r.a.Component),ne=(n(42),function(e){var t=e.title,n=e.img,a=e.cardCallback,r=e.id;return Object(x.jsx)(s.Fragment,{children:Object(x.jsxs)("div",{className:"content-grid-card-container",onClick:function(){return a(r)},children:[Object(x.jsx)("img",{className:"content-grid-card-img",src:n.replace(/\\/g,"/").replace("../client/public/",""),alt:t}),Object(x.jsx)("div",{className:"content-grid-card-title",children:t})]})})}),ae=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={recipeCards:[],popupDisplay:!1,scrollbarWidth:0,overflow:"",display:"none",searchPhrase:""},e.popup=r.a.createRef(),e.popupToggleHandler=e.popupToggleHandler.bind(Object(p.a)(e)),e.filteringHandler=e.filteringHandler.bind(Object(p.a)(e)),e.handleResize=e.handleResize.bind(Object(p.a)(e)),e.buildCards=e.buildCards.bind(Object(p.a)(e)),e}return Object(l.a)(n,[{key:"handleResize",value:function(){var e=document.getElementById("grid-container"),t=document.getElementById("search-popup-container-bg");if(e&&t){var n=document.getElementById("grid-container").getBoundingClientRect();t.style.left="".concat(n.left,"px"),t.style.width="".concat(n.width+this.state.scrollbarWidth,"px")}}},{key:"popupToggleHandler",value:function(e){var t=document.getElementById("grid-container"),n=document.getElementById("main-navbar"),a=document.getElementById("search-popup-container-bg");if(t&&n&&a){var s=t.getBoundingClientRect(),r=window.innerWidth-document.documentElement.clientWidth;this.state.popupDisplay?(document.body.style.overflowY=this.state.overflow,document.body.style.paddingRight="0px",n.style.marginRight="0px",a.style.display="none"):(this.setState({overflow:document.body.style.overflowY}),document.body.style.overflowY="hidden",document.body.style.paddingRight="".concat(r,"px"),n.style.marginRight="".concat(r,"px"),a.style.left="".concat(s.left,"px"),a.style.width="".concat(s.width+r,"px"),a.style.display="inline",t.scrollTop=0,this.popup.current.updateData(e)),this.setState({popupDisplay:!this.state.popupDisplay,scrollbarWidth:r})}}},{key:"filteringHandler",value:function(e){var t=this,n="/recipes?";e.searchPhrase?this.setState({searchPhrase:e.searchPhrase}):e.searchPhrase||""===this.state.searchPhrase||(n=n.concat("searchPhrase=".concat(this.state.searchPhrase,"&"))),Object.keys(e).forEach((function(t){if(Array.isArray(e[t])||"placeholder"===e[t]){if(Array.isArray(e[t])&&e[t].length>0){var a="";e[t].forEach((function(e){return a=a.concat("%22".concat(e.toLowerCase(),"%22,"))})),a=a.slice(0,-1),n=n.concat("".concat(t,"=[").concat(a,"]&"))}}else n=n.concat("".concat(t,"=").concat(e[t],"&"))})),n=n.slice(0,-1).replace(" ","+"),fetch(n,{method:"GET"}).then((function(e){if(e.ok)return e.json();throw new Error("Something went wrong...")})).then((function(e){t.buildCards(e)})).catch((function(e){console.error(e)})),document.body.scrollTop=0,document.documentElement.scrollTop=0}},{key:"buildCards",value:function(e){var t=this;this.setState({display:"none"},(function(){var n=[];e.forEach((function(e){n.push(Object(x.jsx)(ne,{title:e.title,img:e.mainimage,cardCallback:t.popupToggleHandler,id:e.recipeid},e.recipeid))})),t.setState({recipeCards:n,display:"flex"})}))}},{key:"componentDidMount",value:function(){var e=this;window.addEventListener("resize",(function(){return e.handleResize()})),new ResizeObserver((function(){return e.handleResize()})).observe(document.getElementById("grid-container")),fetch("/recipes",{method:"GET"}).then((function(e){return e.json()})).then((function(t){e.buildCards(t)}))}},{key:"render",value:function(){return Object(x.jsx)(s.Fragment,{children:Object(x.jsxs)("div",{className:"container-fluid container-flex",style:{display:this.state.display},children:[Object(x.jsx)(W,{filteringCallback:this.filteringHandler,filterSearch:this.props.filterSearch}),Object(x.jsxs)("div",{className:"content-search-grid-container",id:"grid-container",children:[Object(x.jsx)(te,{display:this.state.popupDisplay,closeCallback:this.popupToggleHandler,ref:this.popup}),Object(x.jsx)(G,{content:this.state.recipeCards,searchPhrase:this.state.searchPhrase})]})]})})}}]),n}(r.a.Component),se=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={searchTerm:""},e.contentSearch=r.a.createRef(),e.filterSearch=r.a.createRef(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){if(this.props.location.state&&this.props.location.state.searchTerm){var e={searchPhrase:this.props.location.state.searchTerm};this.contentSearch.current.filteringHandler(e),this.setState({searchTerm:this.props.location.state.searchTerm}),this.props.history.replace({pathname:"/browse",state:{}})}}},{key:"render",value:function(){return Object(x.jsxs)(s.Fragment,{children:[Object(x.jsx)(w,{contentSearch:this.contentSearch,filterSearch:this.filterSearch}),Object(x.jsx)(ae,{ref:this.contentSearch,filterSearch:this.filterSearch})]})}}]),n}(r.a.Component),re=Object(u.h)(se),ie=n(8),ce=(n(43),function(e){var t=e.errors;return Object(x.jsx)(s.Fragment,{children:Object(x.jsx)("div",{className:"m-2",role:"alert",children:Object(x.jsx)("ul",{className:"list-group",children:t.map((function(e,t){return Object(x.jsx)("li",{className:"list-group-item list-group-item-danger",children:e},t)}))})})})}),oe=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={username:"",password:"",errors:[],redirect:!1},e.handleInputChange=e.handleInputChange.bind(Object(p.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(p.a)(e)),e}return Object(l.a)(n,[{key:"handleInputChange",value:function(e){this.setState(Object(ie.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var n=[],a=this.state.username.trim().length<1?"You must input a username":null,s=function(e){return e.trim().length<1?"You must input a password":null}(this.state.password);if(a&&n.push(a),s&&n.push(s),this.setState({errors:n}),0===n.length){var r={username:this.state.username,password:this.state.password};fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(r)}).then((function(e){if(e.ok){var n={username:t.state.username};return window.localStorage.setItem("user",JSON.stringify(n)),t.setState({redirect:!0}),e}throw new Error("Something went wrong...")})).catch((function(e){console.error(e),n.push("Incorrect username and/or password"),t.setState({errors:n})}))}}},{key:"render",value:function(){var e=window.location.search,t=new URLSearchParams(e);return Object(x.jsxs)(s.Fragment,{children:[this.state.redirect?Object(x.jsx)(u.a,{push:!0,to:"/browse"}):null,Object(x.jsxs)("div",{className:"login-container",children:[Object(x.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(x.jsx)("h1",{children:"Log in"}),t.get("regRedirect")?Object(x.jsxs)("div",{className:"alert alert-success",role:"alert",children:["Your account has been succesfully created.",Object(x.jsx)("br",{})," You can now log in using the form below."]}):null,this.state.errors.length>0?Object(x.jsx)(ce,{errors:this.state.errors}):null,Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"loginUsernameInput",children:Object(x.jsx)("h5",{children:"Username"})}),Object(x.jsxs)("div",{className:"input-group mb-3",children:[Object(x.jsx)("span",{className:"input-group-text",id:"basic-addon1",children:"@"}),Object(x.jsx)("input",{type:"text",className:"form-control",id:"loginUsernameInput",placeholder:"Username","aria-label":"Username","aria-describedby":"basic-addon1",name:"username",value:this.state.username,onChange:this.handleInputChange,required:!0})]})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"loginPasswordInput",children:Object(x.jsx)("h5",{children:"Password"})}),Object(x.jsx)("input",{type:"password",className:"form-control",id:"loginPasswordInput",placeholder:"Password",name:"password",value:this.state.password,onChange:this.handleInputChange,required:!0})]}),Object(x.jsx)("button",{type:"submit",className:"btn btn-primary btn-custom mt-3",children:"Submit"})]}),Object(x.jsxs)("div",{className:"login-tip",children:[Object(x.jsx)("span",{children:"Haven't registered yet?"}),Object(x.jsx)("br",{}),Object(x.jsx)("a",{href:"/registration",children:"Register"})]})]})]})}}]),n}(r.a.Component),le=function(){return Object(x.jsxs)(s.Fragment,{children:[Object(x.jsx)(w,{}),Object(x.jsx)("div",{className:"container-fluid",children:Object(x.jsx)(oe,{})})]})},de=(n(44),function(e){var t=e.errors;return Object(x.jsx)(s.Fragment,{children:Object(x.jsx)("div",{className:"m-2",role:"alert",children:Object(x.jsx)("ul",{className:"list-group",children:t.map((function(e,t){return Object(x.jsx)("li",{className:"list-group-item list-group-item-danger",children:e},t)}))})})})}),he=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={username:"",password:"",passwordRepeat:"",errors:[],redirect:!1},e.handleInputChange=e.handleInputChange.bind(Object(p.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(p.a)(e)),e}return Object(l.a)(n,[{key:"handleInputChange",value:function(e){this.setState(Object(ie.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var n,a,s,r=!1,i=[],c=(n=this.state.username).trim().length<1?"Username is required":n.trim().length<2?"Username has to contain at least 2 characters":n.trim().length>32?"Username has to contain less than 32 characters":null,o=function(e){return e.trim().length<1?"Password is required":e.trim().length<8?"Password has to contain at least 8 characters":null}(this.state.password),l=(a=this.state.password,s=this.state.passwordRepeat,a!==s?"Entered passwords must match":null);if(c&&i.push(c),o&&i.push(o),l&&i.push(l),this.setState({errors:i}),0===i.length){var d={username:this.state.username,password:this.state.password};fetch("/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}).then((function(e){if(e.ok)return r=!0,t.setState({redirect:r}),e;throw new Error("Something went wrong...")})).catch((function(e){console.error(e),i.push("Can't create an account with these credentials"),t.setState({errors:i})}))}}},{key:"render",value:function(){return Object(x.jsxs)(s.Fragment,{children:[this.state.redirect?Object(x.jsx)(u.a,{push:!0,to:"/login?regRedirect=true"}):null,Object(x.jsxs)("div",{className:"registration-container",children:[Object(x.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(x.jsx)("h1",{children:"Register"}),this.state.errors.length>0?Object(x.jsx)(de,{errors:this.state.errors}):null,Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"registrationUsernameInput",children:Object(x.jsx)("h5",{children:"Username"})}),Object(x.jsxs)("div",{className:"input-group",children:[Object(x.jsx)("span",{className:"input-group-text",id:"registration-basic-addon1",children:"@"}),Object(x.jsx)("input",{type:"text",className:"form-control",id:"registrationUsernameInput",placeholder:"Enter a username...","aria-label":"Username","aria-describedby":"registration-basic-addon1 usernameHelp",name:"username",value:this.state.username,onChange:this.handleInputChange,minLength:"2",maxLength:"32",required:!0})]}),Object(x.jsx)("small",{id:"usernameHelp",className:"form-text text-muted",children:"The username should be between 2-32 characters in length."})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"registrationPasswordInput",children:Object(x.jsx)("h5",{children:"Password"})}),Object(x.jsx)("input",{type:"password",className:"form-control",id:"registrationPasswordInput","aria-describedby":"passwordHelp",placeholder:"Enter a password...",name:"password",value:this.state.password,onChange:this.handleInputChange,minLength:"8",required:!0}),Object(x.jsx)("small",{id:"passwordHelp",className:"form-text text-muted",children:"The password should be at least 8 characters in length."}),Object(x.jsx)("input",{type:"password",className:"form-control",id:"registrationPasswordInput2","aria-describedby":"passwordHelp2",placeholder:"Enter the above password again...",name:"passwordRepeat",value:this.state.passwordRepeat,onChange:this.handleInputChange,minLength:"8",required:!0}),Object(x.jsx)("small",{id:"passwordHelp2",className:"form-text text-muted",children:"Enter the same password you entered to the last field."})]}),Object(x.jsx)("button",{type:"submit",className:"btn btn-primary btn-custom mt-3",children:"Submit"})]}),Object(x.jsxs)("div",{className:"registration-tip",children:[Object(x.jsx)("span",{children:"Already registered?"}),Object(x.jsx)("br",{}),Object(x.jsx)("a",{href:"/login",children:"Login"})]})]})]})}}]),n}(r.a.Component),ue=function(){return Object(x.jsxs)(s.Fragment,{children:[Object(x.jsx)(w,{}),Object(x.jsx)("div",{className:"container-fluid",children:Object(x.jsx)(he,{})})]})},pe=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={recipes:[]},e.handleSettingRecipeData=e.handleSettingRecipeData.bind(Object(p.a)(e)),e.handleRedirect=e.handleRedirect.bind(Object(p.a)(e)),e}return Object(l.a)(n,[{key:"handleSettingRecipeData",value:function(e){this.setState({recipes:e})}},{key:"componentDidMount",value:function(){var e=this;fetch("/recommendations",{method:"GET",credentials:"include"}).then((function(e){if(e.ok)return e.json();throw new Error("Something went wrong...")})).then((function(t){return e.handleSettingRecipeData(t)})).catch((function(e){return console.error(e)}))}},{key:"handleRedirect",value:function(e){var t="/recipes/".concat(e);this.props.history.push(t)}},{key:"render",value:function(){var e=this;return Object(x.jsxs)(s.Fragment,{children:[Object(x.jsx)(w,{}),Object(x.jsx)("div",{className:"container-fluid",children:Object(x.jsxs)("div",{className:"container pt-3 pb-5",style:{width:"60%",minWidth:"22rem"},children:[Object(x.jsx)("h1",{className:"text-center",children:"Welcome to Recipe Sharing"}),Object(x.jsxs)("div",{style:{textAlign:"justify"},children:[Object(x.jsx)("h5",{className:"text-center",style:{fontWeight:"bold"},children:"What is recipe sharing?"}),Object(x.jsx)("p",{children:"Our web service aims to be a streamlined and easy-to-use recipe sharing and discovery platform where people can share their recipes with each other. Anyone can browse and search for recipes posted on the web service. We also offer filters for things like included and excluded recipes to facilitate finding recipes that are just perfect for your allergies and/or pantry situation."}),Object(x.jsx)("p",{children:"Our design philosophy for creating this website was to create a web service with large pictues showcasing the creations of our users matched with warm colors and accessible fonts to make it easier for all kinds of people to use. We hope you enjoy using our web service as much as we enjoyed creating it!"})]}),Object(x.jsxs)("div",{style:{textAlign:"justify"},children:[Object(x.jsx)("h5",{className:"text-center",style:{fontWeight:"bold"},children:"Do I need to register for an account? What more can I do with an account?"}),Object(x.jsx)("p",{children:"Adding new recipes to the web service is limited to registered users only. If you only want to look at the recipes posted by other people, you don't need to feel pressure to register! However, registered users can also bookmark and rate recipes and easily access those recipes later from their account page if they so wish."})]}),Object(x.jsxs)("div",{style:{textAlign:"justify"},children:[Object(x.jsx)("h5",{className:"text-center",style:{fontWeight:"bold"},children:"How do I get started?"}),Object(x.jsx)("p",{children:"You can start searching for recipes by first either entering a search term into the search bar or start by going to the browse page and browsing. Both your search results and all the recipes shown on the browse page can be filtered by opening up the filtering menu on those pages. Just press the 'Filter' button or icon on the navigation bar when you're on those pages and voil\xe0! If you want to close the filtering menu, just press the filtering button or icon again and it's gone \u2014 your filtering results will still be there."})]}),Object(x.jsxs)("div",{className:"text-center mt-4",children:[Object(x.jsx)("a",{href:"/browse",style:{fontWeight:"bold",backgroundColor:"#DF7861",textDecoration:"none",padding:"0.5rem 6rem",fontSize:"large",color:"#FFFFFF",borderRadius:"5px"},children:"Start browsing"}),Object(x.jsxs)("div",{className:"mt-5",children:[Object(x.jsx)("h5",{className:"text-center mb-3",style:{fontWeight:"bold"},children:"Need some recommendations to get started?"}),Object(x.jsx)("div",{className:"container-flex",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(240px, 1fr))",gridGap:"15px"},children:this.state.recipes.map((function(t){return Object(x.jsx)(ne,{title:t.title,img:t.mainimage,cardCallback:function(){e.handleRedirect(t.recipeid)},id:t.recipeid},t.recipeid)}))})]})]})]})})]})}}]),n}(r.a.Component),be=Object(u.h)(pe),me=(n(45),n.p+"static/media/edit-icon.8a69dfb0.svg"),je=n.p+"static/media/upload-icon.fc19e7ce.svg",ge=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={editing:!1,editBio:"",file:null},e.handleEditingChange=e.handleEditingChange.bind(Object(p.a)(e)),e.handleEditingBioText=e.handleEditingBioText.bind(Object(p.a)(e)),e.handleSendingBio=e.handleSendingBio.bind(Object(p.a)(e)),e.handleFileChange=e.handleFileChange.bind(Object(p.a)(e)),e}return Object(l.a)(n,[{key:"handleEditingChange",value:function(){this.setState({editing:!this.state.editing,editBio:this.props.bio})}},{key:"handleEditingBioText",value:function(e){this.setState({editBio:e.target.value})}},{key:"handleSendingBio",value:function(){var e=this,t=new FormData;t.append("bio",this.state.editBio),t.append("image",this.state.file),fetch("/userdata",{method:"PUT",credentials:"include",body:t}).then((function(t){if(t.ok)return e.setState({editing:!1}),e.props.updateBio(e.state.editBio),t;throw new Error("Something went wrong...")})).catch((function(e){console.error(e)}))}},{key:"handleFileChange",value:function(e){this.setState({file:e.target.files[0]})}},{key:"render",value:function(){var e=this,t=!1;return null!==window.localStorage.getItem("user")&&(t=JSON.parse(window.localStorage.getItem("user")).username===this.props.username),Object(x.jsx)(s.Fragment,{children:Object(x.jsxs)("div",{className:"user-info-container",children:[this.state.editing?Object(x.jsxs)(s.Fragment,{children:[Object(x.jsx)("input",{type:"file",className:"form-control-file",id:"pfp-input",accept:"image/*",style:{display:"none"},onChange:this.handleFileChange,required:!0}),Object(x.jsx)("div",{className:"upload-icon-container",onClick:function(){document.getElementById("pfp-input").click()},children:Object(x.jsx)("img",{className:"upload-icon",src:je,alt:"upload icon"})})]}):Object(x.jsx)("img",{className:"user-icon",src:"/".concat(this.props.icon.replace(/\\/g,"/").replace("../client/public/","")),alt:"User icon"}),Object(x.jsxs)("div",{className:"user-info-text",children:[Object(x.jsxs)("div",{className:"bio-header-container",children:[Object(x.jsx)("h5",{style:{margin:"0px"},children:this.props.username}),t?Object(x.jsx)("img",{src:me,className:"edit-icon",onClick:this.handleEditingChange,alt:"Edit icon"}):null]}),this.state.editing?Object(x.jsxs)(s.Fragment,{children:[Object(x.jsx)("textarea",{id:"bio-textarea",name:"bio-textarea",placeholder:"",onChange:function(t){return e.handleEditingBioText(t)},value:this.state.editBio}),Object(x.jsx)("button",{className:"bio-submit-button",onClick:this.handleSendingBio,children:"Submit"})]}):Object(x.jsx)("div",{className:"user-info-description",children:Object(x.jsx)("p",{children:this.props.bio})})]})]})})}}]),n}(r.a.Component),Oe=function(e){var t=e.text,n=e.active,a=e.handleClick,r=e.id;return Object(x.jsx)(s.Fragment,{children:Object(x.jsx)("button",{className:"btn btn-primary btn-custom m-1 ".concat(!0===n?"active":""),onClick:a,id:r,children:t})})},fe=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={active:"All"},e.handleClick=e.handleClick.bind(Object(p.a)(e)),e}return Object(l.a)(n,[{key:"handleClick",value:function(e){this.props.callback(e.target.id),this.setState({active:e.target.outerText})}},{key:"render",value:function(){return Object(x.jsx)(s.Fragment,{children:Object(x.jsxs)("div",{className:"user-button-container text-center",children:[Object(x.jsx)(Oe,{text:"All",active:"All"===this.state.active,handleClick:this.handleClick,id:"All"}),Object(x.jsx)(Oe,{text:"Reviewed",active:"Reviewed"===this.state.active,handleClick:this.handleClick,id:"Reviewed"}),Object(x.jsx)(Oe,{text:"Saved",active:"Saved"===this.state.active,handleClick:this.handleClick,id:"Saved"}),Object(x.jsx)(Oe,{text:"Uploaded",active:"Uploaded"===this.state.active,handleClick:this.handleClick,id:"Uploaded"})]})})}}]),n}(r.a.Component),xe=function(e){var t=e.data,n=e.callback,a=e.updateBio;return Object(x.jsx)(s.Fragment,{children:Object(x.jsxs)("div",{className:"user-header-container",style:{marginBottom:"50px"},children:[Object(x.jsx)(ge,{username:t.username,icon:t.img,bio:t.bio,updateBio:a}),Object(x.jsx)(fe,{callback:n})]})})},ve=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={popupDisplay:!1,scrollbarWidth:0,overflow:"",display:"none",currentOption:"all",header:{username:"author",bio:"This user has no bio.",img:"/images/user_placeholder_icon.svg"},recipes:{all:[],reviewed:[],saved:[],uploaded:[]}},e.popup=r.a.createRef(),e.handleUserData=e.handleUserData.bind(Object(p.a)(e)),e.tabHandler=e.tabHandler.bind(Object(p.a)(e)),e.popupToggleHandler=e.popupToggleHandler.bind(Object(p.a)(e)),e.handleResize=e.handleResize.bind(Object(p.a)(e)),e.buildCards=e.buildCards.bind(Object(p.a)(e)),e.updateBio=e.updateBio.bind(Object(p.a)(e)),e}return Object(l.a)(n,[{key:"updateBio",value:function(){var e=this;fetch("/userdata/".concat(this.state.header.username),{method:"GET"}).then((function(e){return e.json()})).then((function(t){e.setState({header:{username:e.state.header.username,bio:t.bio,img:t.image}})})).catch((function(){return e.props.history.push("/browse")}))}},{key:"handleResize",value:function(){var e=document.getElementById("userpage-body"),t=document.getElementById("search-popup-container-bg");if(e&&t){var n=document.getElementById("userpage-body").getBoundingClientRect();t.style.left="".concat(n.left,"px"),t.style.width="".concat(n.width+this.state.scrollbarWidth,"px")}}},{key:"tabHandler",value:function(e){this.setState({currentOption:e.toLowerCase()})}},{key:"popupToggleHandler",value:function(e){var t=document.getElementById("userpage-body"),n=document.getElementById("main-navbar"),a=document.getElementById("search-popup-container-bg");if(t&&n&&a){var s=t.getBoundingClientRect(),r=window.innerWidth-document.documentElement.clientWidth;this.state.popupDisplay?(document.body.style.overflowY=this.state.overflow,document.body.style.paddingRight="0px",n.style.marginRight="0px",a.style.display="none"):(this.setState({overflow:document.body.style.overflowY}),document.body.style.overflowY="hidden",document.body.style.paddingRight="".concat(r,"px"),n.style.marginRight="".concat(r,"px"),a.style.left="".concat(s.left,"px"),a.style.width="".concat(s.width+r,"px"),a.style.display="inline",t.scrollTop=0,this.popup.current.updateData(e)),this.setState({popupDisplay:!this.state.popupDisplay,scrollbarWidth:r})}}},{key:"buildCards",value:function(e){var t=this,n=[],a=[],s=[];e.recipes.reviewed.forEach((function(e){s.push(Object(x.jsx)(ne,{title:e.title,img:"/".concat(e.mainimage),cardCallback:t.popupToggleHandler,id:e.recipeid},"reviewed-".concat(e.recipeid))),n.includes(e.recipeid)||(n.push(e.recipeid),a.push(Object(x.jsx)(ne,{title:e.title,img:"/".concat(e.mainimage),cardCallback:t.popupToggleHandler,id:e.recipeid},"all-".concat(e.recipeid))))}));var r=[];e.recipes.saved.forEach((function(e){r.push(Object(x.jsx)(ne,{title:e.title,img:"/".concat(e.mainimage),cardCallback:t.popupToggleHandler,id:e.recipeid},"saved-".concat(e.recipeid))),n.includes(e.recipeid)||(n.push(e.recipeid),a.push(Object(x.jsx)(ne,{title:e.title,img:"/".concat(e.mainimage),cardCallback:t.popupToggleHandler,id:e.recipeid},"all-".concat(e.recipeid))))}));var i=[];e.recipes.uploaded.forEach((function(e){i.push(Object(x.jsx)(ne,{title:e.title,img:"/".concat(e.mainimage),cardCallback:t.popupToggleHandler,id:e.recipeid},"uploaded-".concat(e.recipeid))),n.includes(e.recipeid)||(n.push(e.recipeid),a.push(Object(x.jsx)(ne,{title:e.title,img:"/".concat(e.mainimage),cardCallback:t.popupToggleHandler,id:e.recipeid},"all-".concat(e.recipeid))))})),this.setState({recipes:{all:a,reviewed:s,saved:r,uploaded:i}})}},{key:"handleUserData",value:function(e){var t=this;this.setState({header:{username:this.props.match.params.username,bio:e.headerData.bio,img:e.headerData.image}},(function(){t.buildCards(e)}))}},{key:"componentDidMount",value:function(){var e=this;window.addEventListener("resize",(function(){return e.handleResize()})),new ResizeObserver((function(){return e.handleResize()})).observe(document.getElementById("userpage-body"));var t=this.props.match.params.username;fetch("/user/".concat(t),{method:"GET"}).then((function(e){return e.json()})).then((function(t){return e.handleUserData(t)})).catch((function(){return e.props.history.push("/browse")}))}},{key:"render",value:function(){return Object(x.jsxs)(s.Fragment,{children:[Object(x.jsx)(w,{}),Object(x.jsx)("div",{className:"container-fluid",id:"userpage-body",children:Object(x.jsxs)("div",{className:"container pt-3",children:[Object(x.jsx)(xe,{data:this.state.header,callback:this.tabHandler,updateBio:this.updateBio}),Object(x.jsx)(te,{display:this.state.popupDisplay,closeCallback:this.popupToggleHandler,ref:this.popup}),Object(x.jsx)(G,{content:this.state.recipes[this.state.currentOption]})]})})]})}}]),n}(r.a.Component),Ie=Object(u.h)(ve),ye=n(13),ke=n(9),Ce=(n(46),function(e){var t=e.errors;return Object(x.jsx)(s.Fragment,{children:Object(x.jsx)("div",{className:"m-2",role:"alert",style:{fontWeight:"bold"},children:Object(x.jsx)("ul",{className:"list-group",children:t.map((function(e,t){return Object(x.jsx)("li",{className:"list-group-item list-group-item-danger",children:e},t)}))})})})}),Ne=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={errors:[]},e.handleInputChange=e.handleInputChange.bind(Object(p.a)(e)),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.setState({errors:this.props.errors})}},{key:"handleInputChange",value:function(e){this.props.handleInputChange(e.target.name,e.target.value.trim())}},{key:"render",value:function(){return Object(x.jsx)(s.Fragment,{children:Object(x.jsxs)("div",{className:"form-group recipe-element",children:[Object(x.jsx)("label",{htmlFor:"recipeNameInput",children:Object(x.jsx)("h5",{children:"Name of the dish"})}),this.props.errors.length>0?Object(x.jsx)(Ce,{errors:this.props.errors}):null,Object(x.jsx)("input",{type:"text",className:"form-control",id:"recipeNameInput",placeholder:"Enter the name of the dish...",name:"title",onChange:this.handleInputChange,required:!0})]})})}}]),n}(r.a.Component),Se=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={selected:"",errors:[]},e.handleInputChange=e.handleInputChange.bind(Object(p.a)(e)),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.setState({errors:this.props.errors})}},{key:"handleInputChange",value:function(e){this.setState({selected:e.target.value}),this.props.handleInputChange(e.target.name,e.target.value)}},{key:"render",value:function(){return Object(x.jsx)(s.Fragment,{children:Object(x.jsxs)("div",{className:"recipe-element",children:[Object(x.jsx)("h5",{children:Object(x.jsx)("label",{htmlFor:"categories-select",children:"Category"})}),this.props.errors.length>0?Object(x.jsx)(Ce,{errors:this.props.errors}):null,Object(x.jsxs)("select",{name:"category",id:"categories-select",className:"form-select",defaultValue:"",style:{color:""===this.state.selected?"#6C757D":"#000000"},onChange:this.handleInputChange,required:!0,children:[Object(x.jsx)("option",{value:"",disabled:!0,hidden:!0,children:"Select a category"}),Object(x.jsx)("option",{value:"Appetizers",children:"Appetizers"}),Object(x.jsx)("option",{value:"Main Dishes",children:"Main Dishes"}),Object(x.jsx)("option",{value:"Snacks",children:"Snacks"}),Object(x.jsx)("option",{value:"Side Dishes",children:"Side Dishes"}),Object(x.jsx)("option",{value:"Desserts",children:"Desserts"})]})]})})}}]),n}(r.a.Component),we=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={file:null,errors:[]},e.handleFileChange=e.handleFileChange.bind(Object(p.a)(e)),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.setState({errors:this.props.errors})}},{key:"handleFileChange",value:function(e){this.setState({file:e.target.files[0]}),this.props.handleInputChange("image",e.target.files[0])}},{key:"render",value:function(){return Object(x.jsx)(s.Fragment,{children:Object(x.jsxs)("div",{className:"recipe-element",children:[Object(x.jsx)("h5",{children:"Image of the dish"}),this.props.errors.length>0?Object(x.jsx)(Ce,{errors:this.props.errors}):null,Object(x.jsx)("div",{className:"form-group image-uploader-container",children:Object(x.jsx)("input",{type:"file",className:"form-control-file",id:"dishImageFileInput",accept:"image/*",onChange:this.handleFileChange,required:!0})})]})})}}]),n}(r.a.Component),Ee=function(e){var t=e.name,n=e.amount,a=e.deleteIngredient;return Object(x.jsx)(s.Fragment,{children:Object(x.jsxs)("li",{className:"list-group-item list-ingredient-container",children:[Object(x.jsx)("div",{className:"list-ingredient-name",children:t}),Object(x.jsx)("div",{className:"list-ingredient-amount float-end",children:n}),Object(x.jsx)("button",{type:"button",className:"btn-close btn-close-custom","aria-label":"Remove",onClick:a})]})})},Ae=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={name:"",amount:""},e.handleInputChange=e.handleInputChange.bind(Object(p.a)(e)),e.addIngredient=e.addIngredient.bind(Object(p.a)(e)),e}return Object(l.a)(n,[{key:"handleInputChange",value:function(e){this.setState(Object(ie.a)({},e.target.name,e.target.value))}},{key:"addIngredient",value:function(e){e.preventDefault(),this.props.addIngredient(e,this.state.name,this.state.amount)}},{key:"render",value:function(){return Object(x.jsx)(s.Fragment,{children:Object(x.jsxs)("div",{className:"add-ingredient-input-container",children:[Object(x.jsxs)("div",{className:"form-group list-ingredient-container",children:[Object(x.jsxs)("div",{className:"add-ingredient-name",children:["Name:",Object(x.jsx)("input",{type:"text",className:"form-control",id:"ingredientNameInput",placeholder:"Enter the name of the ingredient",name:"name",onChange:this.handleInputChange})]}),Object(x.jsxs)("div",{className:"add-ingredient-amount",children:["Amount:",Object(x.jsx)("input",{type:"text",className:"form-control",id:"ingredientAmountInput",placeholder:"Enter the amount",name:"amount",onChange:this.handleInputChange})]})]}),Object(x.jsx)("div",{onClick:this.addIngredient,children:"+ Add the above ingredient"})]})})}}]),n}(r.a.Component),Fe=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={ingredients:[],showIngredientInput:!1,errors:[]},e.addIngredient=e.addIngredient.bind(Object(p.a)(e)),e.deleteIngredient=e.deleteIngredient.bind(Object(p.a)(e)),e.toggleIngredientInput=e.toggleIngredientInput.bind(Object(p.a)(e)),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.setState({ingredients:this.props.initialIngredients})}},{key:"toggleIngredientInput",value:function(){var e=Object(ke.a)({},this.state);e.showIngredientInput=!e.showIngredientInput,this.setState(e)}},{key:"addIngredient",value:function(e,t,n){e.preventDefault();var a=t.toLowerCase().trim(),s=n.trim(),r=[];if(a.length<1&&r.push("Ingredient name can't be empty"),this.state.ingredients.map((function(e){return e.ingredient})).includes(a)&&r.push("Ingredient can't be a duplicate of an ingredient already included in this same ingredient group"),s.length<1&&r.push("Ingredient amount can't be empty"),0===r.length){this.toggleIngredientInput();var i=Object(ye.a)(this.state.ingredients);i.push({ingredient:t,amount:n}),this.setState({ingredients:i}),this.props.handleIngredientChange(i)}this.setState({errors:r})}},{key:"deleteIngredient",value:function(e){var t=Object(ye.a)(this.state.ingredients);t.splice(e,1),this.setState({ingredients:t}),this.props.handleIngredientChange(t)}},{key:"render",value:function(){var e=this;return Object(x.jsx)(s.Fragment,{children:Object(x.jsxs)("ul",{className:"list-group ingredient-group",children:[this.state.ingredients.map((function(t,n){return Object(x.jsx)(Ee,{name:t.ingredient,amount:t.amount,deleteIngredient:function(){return e.deleteIngredient(e.state.ingredients.indexOf(t))}},"".concat(t.ingredient,"-ingredient"))})),Object(x.jsxs)("li",{className:"list-group-item list-button",children:[this.state.errors.length>0?Object(x.jsx)(Ce,{errors:this.state.errors}):null,this.state.showIngredientInput?Object(x.jsx)(Ae,{addIngredient:this.addIngredient}):null,this.state.showIngredientInput?null:Object(x.jsx)("div",{onClick:this.toggleIngredientInput,children:"+ Add a new ingredient"})]})]})})}}]),n}(r.a.Component),Te=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={ingredients:[]},e.handleIngredientChange=e.handleIngredientChange.bind(Object(p.a)(e)),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.setState({ingredients:this.props.initialIngredients})}},{key:"handleIngredientChange",value:function(e){this.setState({ingredients:e}),this.props.handleSubgroupChange(this.props.name,this.props.idx,e)}},{key:"render",value:function(){return Object(x.jsx)(s.Fragment,{children:Object(x.jsxs)("div",{className:"ingredient-subgroup",children:[Object(x.jsxs)("h6",{children:[this.props.name," ",Object(x.jsx)("button",{type:"button",className:"btn-close btn-close-custom","aria-label":"Remove",onClick:this.props.deleteIngredientSubgroup})]}),Object(x.jsx)(Fe,{initialIngredients:this.props.initialIngredients,handleIngredientChange:this.handleIngredientChange})]})})}}]),n}(r.a.Component),Re=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={default:[],subgroups:[],newGroupName:"",errors:[]},e.addIngredientSubgroup=e.addIngredientSubgroup.bind(Object(p.a)(e)),e.deleteIngredientSubgroup=e.deleteIngredientSubgroup.bind(Object(p.a)(e)),e.handleIngredientChange=e.handleIngredientChange.bind(Object(p.a)(e)),e.handleSubgroupChange=e.handleSubgroupChange.bind(Object(p.a)(e)),e.handleInputChange=e.handleInputChange.bind(Object(p.a)(e)),e}return Object(l.a)(n,[{key:"handleInputChange",value:function(e){this.setState(Object(ie.a)({},e.target.name,e.target.value))}},{key:"addIngredientSubgroup",value:function(e){e.preventDefault();var t=this.state.newGroupName.trim(),n=[];if(t.length<1?n.push("Subgroup name can't be empty"):this.state.subgroups.map((function(e){return e.name})).includes(t)&&n.push("Subgroup name can't be a duplicate"),0===n.length){var a=Object(ye.a)(this.state.subgroups);a.push({name:t,ingredients:[]}),this.setState({subgroups:a,newGroupName:""});var s={Default:this.state.default};a.forEach((function(e){return s=Object(ke.a)(Object(ke.a)({},s),{},Object(ie.a)({},e.name,e.ingredients))})),this.props.handleInputChange("groups",s)}this.setState({errors:n})}},{key:"deleteIngredientSubgroup",value:function(e){var t=Object(ye.a)(this.state.subgroups);t.splice(e,1),this.setState({subgroups:t});var n={Default:this.state.default};t.forEach((function(e){return n=Object(ke.a)(Object(ke.a)({},n),{},Object(ie.a)({},e.name,e.ingredients))})),this.props.handleInputChange("groups",n)}},{key:"handleIngredientChange",value:function(e){this.setState({default:e});var t={Default:e};this.state.subgroups.forEach((function(e){return t=Object(ke.a)(Object(ke.a)({},t),{},Object(ie.a)({},e.name,e.ingredients))})),this.props.handleInputChange("groups",t)}},{key:"handleSubgroupChange",value:function(e,t,n){var a=Object(ye.a)(this.state.subgroups);a[t]={name:e,ingredients:n},this.setState({subgroups:a});var s={Default:this.state.default};a.forEach((function(e){return s=Object(ke.a)(Object(ke.a)({},s),{},Object(ie.a)({},e.name,e.ingredients))})),this.props.handleInputChange("groups",s)}},{key:"render",value:function(){var e=this;return Object(x.jsx)(s.Fragment,{children:Object(x.jsxs)("div",{className:"recipe-element",children:[Object(x.jsx)("h5",{children:"Ingredients"}),this.props.errors.length>0?Object(x.jsx)(Ce,{errors:this.props.errors}):null,Object(x.jsx)(Fe,{initialIngredients:this.state.default,handleIngredientChange:this.handleIngredientChange},"default"),this.state.subgroups.map((function(t,n){return Object(x.jsx)(Te,{name:t.name,idx:n,initialIngredients:t.ingredients,handleSubgroupChange:e.handleSubgroupChange,deleteIngredientSubgroup:function(){return e.deleteIngredientSubgroup(n)}},"".concat(t.name,"-group"))})),Object(x.jsxs)("div",{className:"add-subgroup-container",children:[this.state.errors.length>0?Object(x.jsx)(Ce,{errors:this.state.errors}):null,Object(x.jsx)("input",{type:"text",className:"form-control",id:"groupNameInput",placeholder:"Name for a new ingredient group",name:"newGroupName",value:this.state.newGroupName,onChange:this.handleInputChange}),Object(x.jsx)("button",{className:"btn btn-secondary-custom mt-1",onClick:this.addIngredientSubgroup,children:"+ Add a new ingredient group"})]})]})})}}]),n}(r.a.Component),Be=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={file:null},e.handleInstructionChange=e.handleInstructionChange.bind(Object(p.a)(e)),e.handleFileChange=e.handleFileChange.bind(Object(p.a)(e)),e}return Object(l.a)(n,[{key:"handleInstructionChange",value:function(e){e.preventDefault(),this.props.handleInstructionChange(e,this.props.number-1)}},{key:"handleFileChange",value:function(e){this.setState({file:e.target.files[0]}),this.props.handleImageChange(this.props.number,e.target.files[0])}},{key:"render",value:function(){return Object(x.jsxs)(s.Fragment,{children:[Object(x.jsxs)("div",{className:"list-instructions-step",children:[Object(x.jsxs)("div",{className:"instructions-step-start",children:[this.props.number,"."]}),Object(x.jsx)("textarea",{className:"form-control",rows:"1",placeholder:"Enter the description for this step...",onChange:this.handleInstructionChange,required:"1"===this.props.number}),Object(x.jsx)("div",{className:"instructions-step-end",children:Object(x.jsx)("button",{type:"button",className:"btn-close btn-close-custom","aria-label":"Close",onClick:this.props.deleteInstructionStep,style:{display:"1"===this.props.number?"none":"initial"}})})]}),Object(x.jsxs)("div",{className:"form-group",children:["Step ",this.props.number," image (optional)",Object(x.jsx)("br",{}),Object(x.jsx)("input",{type:"file",className:"form-control-file",id:"instructionImageFileInput",accept:"image/*",onChange:this.handleFileChange})]})]})}}]),n}(r.a.Component),De=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={steps:[],index:0,errors:[]},e.addInstructionStep=e.addInstructionStep.bind(Object(p.a)(e)),e.handleInstructionChange=e.handleInstructionChange.bind(Object(p.a)(e)),e.deleteInstructionStep=e.deleteInstructionStep.bind(Object(p.a)(e)),e.handleImageChange=e.handleImageChange.bind(Object(p.a)(e)),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=[];e.push({description:"",idx:this.state.index}),this.setState({steps:e,index:this.state.index+1,errors:this.props.errors})}},{key:"addInstructionStep",value:function(e){e.preventDefault();var t=Object(ye.a)(this.state.steps);t.push({description:"",idx:this.state.index}),this.setState({steps:t,index:this.state.index+1})}},{key:"handleInstructionChange",value:function(e,t){var n=Object(ye.a)(this.state.steps);n[t].description=e.target.value.trim(),this.setState({steps:n});var a=n.reduce((function(e,t){return Object(ke.a)(Object(ke.a)({},e),{},Object(ie.a)({},n.indexOf(t)+1,t.description))}),{});this.props.handleInputChange("instructions",a)}},{key:"deleteInstructionStep",value:function(e){var t=Object(ye.a)(this.state.steps);t.splice(e,1),this.setState({steps:t});var n=t.reduce((function(e,n){return Object(ke.a)(Object(ke.a)({},e),{},Object(ie.a)({},t.indexOf(n)+1,n.description))}),{});this.props.handleInputChange("instructions",n),this.props.handleStepImageDeletion(e+1)}},{key:"handleImageChange",value:function(e,t){this.props.handleStepImageChange(e,t)}},{key:"render",value:function(){var e=this;return Object(x.jsx)(s.Fragment,{children:Object(x.jsxs)("div",{className:"recipe-element",children:[Object(x.jsx)("h5",{children:"Instructons"}),this.props.errors.length>0?Object(x.jsx)(Ce,{errors:this.props.errors}):null,this.state.steps.map((function(t){return Object(x.jsx)(Be,{number:String(e.state.steps.indexOf(t)+1),description:t.description,handleInstructionChange:e.handleInstructionChange,handleImageChange:e.handleImageChange,deleteInstructionStep:function(){return e.deleteInstructionStep(e.state.steps.indexOf(t))}},t.idx)})),Object(x.jsx)("button",{className:"btn btn-secondary-custom mt-2",onClick:this.addInstructionStep,children:"+ Add a new step"})]})})}}]),n}(r.a.Component),qe=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).handleInputChange=e.handleInputChange.bind(Object(p.a)(e)),e}return Object(l.a)(n,[{key:"handleInputChange",value:function(e){this.props.handleInputChange(e.target.name,e.target.value.trim())}},{key:"render",value:function(){return Object(x.jsx)(s.Fragment,{children:Object(x.jsxs)("div",{className:"form-group recipe-element",children:[Object(x.jsx)("label",{htmlFor:"additionalInstructionsInput",children:Object(x.jsx)("h5",{children:"Additional Instructions"})}),Object(x.jsx)("textarea",{className:"form-control",id:"additionalInstructionsInput",rows:"2",placeholder:"Enter any additional instructions for preparing the dish here...",name:"addInstructions",onChange:this.handleInputChange})]})})}}]),n}(r.a.Component),Ue=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={errors:[]},e.handleInputChange=e.handleInputChange.bind(Object(p.a)(e)),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.setState({errors:this.props.errors})}},{key:"handleInputChange",value:function(e){var t=[];e.target.value.split(";").forEach((function(e){e.trim().length>0&&t.push(e.toLowerCase().trim())})),this.props.handleInputChange(e.target.name,t)}},{key:"render",value:function(){return Object(x.jsx)(s.Fragment,{children:Object(x.jsxs)("div",{className:"form-group recipe-element",children:[Object(x.jsx)("label",{htmlFor:"recipeTagInput",children:Object(x.jsx)("h5",{children:"Tags"})}),this.props.errors.length>0?Object(x.jsx)(Ce,{errors:this.props.errors}):null,Object(x.jsx)("input",{type:"text",className:"form-control",id:"recipeTagInput",placeholder:"Enter the tags of the dish separated by ';' ...",name:"tags",onChange:this.handleInputChange,required:!0})]})})}}]),n}(r.a.Component),Pe=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={title:"",category:"",groups:{Default:[]},instructions:{},addInstructions:"",tags:[],image:null,stepImages:{},errors:{nameErrors:[],categoryErrors:[],imageErrors:[],ingredientErrors:[],instructionErrors:[],tagErrors:[]},createdID:0},e.handleInputChange=e.handleInputChange.bind(Object(p.a)(e)),e.handleStepImageChange=e.handleStepImageChange.bind(Object(p.a)(e)),e.handleStepImageDeletion=e.handleStepImageDeletion.bind(Object(p.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(p.a)(e)),e}return Object(l.a)(n,[{key:"handleInputChange",value:function(e,t){this.setState(Object(ie.a)({},e,t))}},{key:"handleStepImageChange",value:function(e,t){var n=Object(ke.a)(Object(ke.a)({},this.state.stepImages),{},Object(ie.a)({},e,t));this.setState({stepImages:n})}},{key:"handleStepImageDeletion",value:function(e){var t=Object(ke.a)({},this.state.stepImages);delete t[e],this.setState({stepImages:t})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var n=!0,a=[];this.state.title.length<1&&(n=!1,a.push("Name can't be empty"));var s=[];""===this.state.category&&(n=!1,s.push("A category must be chosen"));var r=[];this.state.image||(n=!1,r.push("An image must be added"));var i=[];Object.keys(this.state.groups).every((function(e){return t.state.groups[e].length<1}))&&(n=!1,i.push("The recipe must contain at least one ingredient")),Object.keys(this.state.groups).filter((function(e){return"Default"!==e})).some((function(e){return t.state.groups[e].length<1}))&&(n=!1,i.push("Subgroups can't be empty"));var c=[];(this.state.instructions.length<1||!this.state.instructions[1])&&(n=!1,c.push("The instructions must contain at least one step")),this.state.instructions[1]&&this.state.instructions[1].length<1&&(n=!1,c.push("The first instruction step can't be empty")),(Object.values(this.state.instructions).includes("")||Object.values(this.state.instructions).includes(void 0))&&(n=!1,c.push("The instructions can't include empty instructions"));var o=[];this.state.tags.length<1&&(n=!1,o.push("Tags can't be empty"));var l={nameErrors:a,categoryErrors:s,imageErrors:r,ingredientErrors:i,instructionErrors:c,tagErrors:o};if(this.setState({errors:l}),n){var d=new FormData,h={};Object.keys(this.state.stepImages).forEach((function(e){return h[e]=t.state.stepImages[e].name}));var u={title:this.state.title,category:this.state.category,groups:this.state.groups,instructions:this.state.instructions,addInstructions:this.state.addInstructions,tags:this.state.tags,stepImages:h};d.append("recipe",JSON.stringify(u)),d.append("images",this.state.image),Object.keys(this.state.stepImages).forEach((function(e){return d.append("images",t.state.stepImages[e])})),fetch("/recipes",{method:"POST",credentials:"include",body:d}).then((function(e){if(e.ok)return e.json();throw new Error("Something went wrong...")})).then((function(e){setTimeout((function(){t.setState({createdID:e}),console.log("Redirecting...")}),500)})).catch((function(e){console.error(e)}))}}},{key:"render",value:function(){for(var e=this,t=document.cookie.split(";").map((function(e){return e.split("=")[0]})),n=0;n<t.length;n++)t[n]=t[n].trim();return Object(x.jsxs)(s.Fragment,{children:[t.includes("authentication")&&null!==window.localStorage.getItem("user")?null:Object(x.jsx)(u.a,{push:!0,to:"/browse"}),0!==this.state.createdID?Object(x.jsx)(u.a,{push:!0,to:"/recipes/".concat(this.state.createdID)}):null,Object(x.jsxs)("div",{className:"recipe-form-container text-center",children:[Object(x.jsx)("h1",{children:"Add a new recipe"}),Object(x.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(x.jsx)(Ne,{handleInputChange:this.handleInputChange,errors:this.state.errors.nameErrors}),Object(x.jsx)(Se,{handleInputChange:this.handleInputChange,errors:this.state.errors.categoryErrors}),Object(x.jsx)(we,{handleInputChange:this.handleInputChange,errors:this.state.errors.imageErrors}),Object(x.jsx)(Re,{handleInputChange:this.handleInputChange,errors:this.state.errors.ingredientErrors}),Object(x.jsx)(De,{handleInputChange:this.handleInputChange,handleStepImageChange:this.handleStepImageChange,handleStepImageDeletion:this.handleStepImageDeletion,errors:this.state.errors.instructionErrors}),Object(x.jsx)(qe,{handleInputChange:this.handleInputChange}),Object(x.jsx)(Ue,{handleInputChange:this.handleInputChange,errors:this.state.errors.tagErrors}),Object.keys(this.state.errors).some((function(t){return e.state.errors[t].length>0}))?Object(x.jsx)(Ce,{errors:["Can't submit form due to failed requirements:"].concat(this.state.errors.nameErrors,this.state.errors.categoryErrors,this.state.errors.imageErrors,this.state.errors.ingredientErrors,this.state.errors.instructionErrors,this.state.errors.tagErrors)}):null,Object(x.jsx)("button",{type:"submit",className:"btn btn-primary btn-custom mt-3",children:"Submit recipe"})]})]})]})}}]),n}(r.a.Component),He=function(){return Object(x.jsxs)(s.Fragment,{children:[Object(x.jsx)(w,{}),Object(x.jsx)("div",{className:"container-fluid",children:Object(x.jsx)("div",{className:"container pt-3",children:Object(x.jsx)(Pe,{})})})]})},Le=(n(47),function(e){var t=e.source,n=e.alternative;return Object(x.jsx)(s.Fragment,{children:Object(x.jsx)("img",{className:"recipe-image",src:"/".concat(t.replace(/\\/g,"/").replace("../client/public/","")),alt:n})})}),Ve=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={rated:!1,userRating:0},e.handleBookmarkClick=e.handleBookmarkClick.bind(Object(p.a)(e)),e.handleRatingChange=e.handleRatingChange.bind(Object(p.a)(e)),e.handleStarSubmit=e.handleStarSubmit.bind(Object(p.a)(e)),e}return Object(l.a)(n,[{key:"handleBookmarkClick",value:function(){var e=this;if(this.props.loggedIn)if(this.props.bookmarked){var t="/recipes/".concat(this.props.recipeid,"/save");fetch(t,{method:"DELETE",credentials:"include"}).then((function(t){if(t.ok)return e.props.handleHeaderChange("bookmarks",Number(e.props.bookmarks-1)),e.props.handleHeaderChange("bookmarked",!1),t;throw new Error("Something went wrong...")})).catch((function(e){console.error(e)}))}else{var n="/recipes/".concat(this.props.recipeid,"/save");fetch(n,{method:"POST",credentials:"include"}).then((function(t){if(t.ok)return e.props.handleHeaderChange("bookmarks",Number(e.props.bookmarks+1)),e.props.handleHeaderChange("bookmarked",!0),t;throw new Error("Something went wrong...")})).catch((function(e){console.error(e)}))}}},{key:"handleRatingChange",value:function(e){this.setState({userRating:e.target.value})}},{key:"handleStarSubmit",value:function(e){var t=this;if(e.preventDefault(),this.props.loggedIn&&!this.props.rated){var n={rating:this.state.userRating},a="/recipes/".concat(this.props.recipeid,"/rate");fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(n)}).then((function(e){if(e.ok)return e.json();throw new Error("Something went wrong...")})).then((function(e){t.props.handleHeaderChange("stars",Number(e.avgrating)),t.props.handleHeaderChange("rated",t.state.userRating)})).catch((function(e){console.error(e)}))}}},{key:"render",value:function(){var e="/user/".concat(this.props.author);return Object(x.jsx)(s.Fragment,{children:Object(x.jsxs)("div",{className:"recipe-title",children:[Object(x.jsxs)("div",{className:"recipe-title-text",children:[Object(x.jsx)("h1",{children:this.props.name}),Object(x.jsx)(z.b,{to:e,style:{textDecoration:"none"},children:Object(x.jsxs)("h4",{children:["@",this.props.author]})}),Object(x.jsxs)("h6",{children:["Category: ",this.props.category]})]}),Object(x.jsxs)("div",{className:"recipe-title-icons",children:[Object(x.jsxs)("div",{className:"recipe-title-icons-top",children:[Object(x.jsx)("div",{className:"recipe-title-icon-container",children:Object(x.jsxs)("div",{id:"bookmark-btn",onClick:this.handleBookmarkClick,style:{cursor:this.props.loggedIn?"pointer":"default"},children:[Object(x.jsxs)("h2",{style:{filter:this.props.bookmarked?"none":"brightness(0)"},children:[this.props.bookmarks,Object(x.jsx)("img",{className:"recipe-title-icon",src:M,alt:"Stars"})]}),this.props.loggedIn?Object(x.jsx)("span",{id:"bookmark-tooltip",children:this.props.bookmarked?"Remove from bookmarks":"Bookmark recipe"}):null]})}),Object(x.jsx)("div",{className:"recipe-title-icon-container",style:{filter:0!==this.props.rated?"none":"brightness(0)"},children:Object(x.jsxs)("h2",{children:[this.props.stars,Object(x.jsx)("img",{className:"recipe-title-icon",src:Y,alt:"Stars"})]})})]}),this.props.loggedIn&&0!==this.props.rated?Object(x.jsxs)("div",{className:"recipe-title-icons-bottom",children:[Object(x.jsx)("h6",{children:"You rated this recipe:"}),Object(x.jsx)(R,{className:"star-rating-icon ".concat(Number(this.props.rated)>0?"filled":null),alt:"star"}),Object(x.jsx)(R,{className:"star-rating-icon ".concat(Number(this.props.rated)>1?"filled":null),alt:"star"}),Object(x.jsx)(R,{className:"star-rating-icon ".concat(Number(this.props.rated)>2?"filled":null),alt:"star"}),Object(x.jsx)(R,{className:"star-rating-icon ".concat(Number(this.props.rated)>3?"filled":null),alt:"star"}),Object(x.jsx)(R,{className:"star-rating-icon ".concat(Number(this.props.rated)>4?"filled":null),alt:"star"})]}):this.props.loggedIn?Object(x.jsxs)("div",{className:"recipe-title-icons-bottom",children:[Object(x.jsx)("h6",{children:"Your rating:"}),Object(x.jsxs)("form",{onSubmit:this.handleStarSubmit,children:[Object(x.jsxs)("div",{className:"star-rating",onChange:this.handleRatingChange,children:[Object(x.jsx)("input",{type:"radio",name:"stars",id:"star-5",value:5}),Object(x.jsx)("label",{className:"form-check-label",htmlFor:"star-5",children:Object(x.jsx)(R,{className:"star-rating-icon",alt:"star"})}),Object(x.jsx)("input",{type:"radio",name:"stars",id:"star-4",value:4}),Object(x.jsx)("label",{className:"form-check-label",htmlFor:"star-4",children:Object(x.jsx)(R,{className:"star-rating-icon",alt:"star"})}),Object(x.jsx)("input",{type:"radio",name:"stars",id:"star-3",value:3}),Object(x.jsx)("label",{className:"form-check-label",htmlFor:"star-3",children:Object(x.jsx)(R,{className:"star-rating-icon",alt:"star"})}),Object(x.jsx)("input",{type:"radio",name:"stars",id:"star-2",value:2}),Object(x.jsx)("label",{className:"form-check-label",htmlFor:"star-2",children:Object(x.jsx)(R,{className:"star-rating-icon",alt:"star"})}),Object(x.jsx)("input",{type:"radio",name:"stars",id:"star-1",value:1}),Object(x.jsx)("label",{className:"form-check-label",htmlFor:"star-1",children:Object(x.jsx)(R,{className:"star-rating-icon",alt:"star"})})]}),Object(x.jsx)("button",{className:"btn btn-primary btn-custom",children:"Submit rating"})]})]}):null]})]})})}}]),n}(r.a.Component),We=function(e){var t=e.name;return Object(x.jsx)(s.Fragment,{children:Object(x.jsx)("div",{className:"recipe-tag",children:t})})},Qe=function(e){var t=e.tags;return Object(x.jsx)(s.Fragment,{children:Object(x.jsx)("div",{className:"recipe-tag-list",children:t.map((function(e){return Object(x.jsx)(We,{name:e},"".concat(e,"-tag"))}))})})},Ge=function(e){var t=e.ingredient,n=e.amount;return Object(x.jsx)(s.Fragment,{children:Object(x.jsxs)("div",{className:"recipe-ingredient",children:[Object(x.jsx)("div",{className:"recipe-ingredient-name",children:t}),Object(x.jsx)("div",{className:"recipe-ingredient-amount",children:n})]})})},ze=function(e){var t=e.group,n=e.ingredients;return Object(x.jsxs)(s.Fragment,{children:["Default"!==t?Object(x.jsx)("h5",{children:t}):null,Object(x.jsx)("div",{className:"recipe-ingredients-list",children:n.map((function(e){return Object(x.jsx)(Ge,{ingredient:e.ingredient,amount:e.amount},"".concat(t,"-ingredient-").concat(e.ingredient))}))})]})},Ke=function(e){var t=e.ingredients;return Object(x.jsx)(s.Fragment,{children:Object(x.jsxs)("div",{className:"recipe-element",children:[Object(x.jsx)("h3",{children:"Ingredients"}),Object(x.jsx)("div",{className:"recipe-ingredients",children:t.map((function(e){return Object(x.jsx)(ze,{group:e.name,ingredients:e.ingredients},e.name)}))})]})})},Me=function(e){var t=e.step,n=e.description,a=e.img;return Object(x.jsx)(s.Fragment,{children:Object(x.jsxs)("div",{className:"recipe-instruction",children:[Object(x.jsxs)("h5",{children:["Step ",t]}),Object(x.jsx)("div",{className:"recipe-instruction-description mb-3",children:n}),Object(x.jsx)("img",{className:"recipe-instruction-image",src:"/".concat(a.replace(/\\/g,"/").replace("../client/public/","")),alt:"Step ".concat(t," instruction"),onError:function(e){return e.target.style.display="none"}})]})})},Ye=function(e){var t=e.instructions;return Object(x.jsx)(s.Fragment,{children:Object(x.jsxs)("div",{className:"recipe-element",children:[Object(x.jsx)("h3",{children:"Instructions"}),Object(x.jsx)("div",{className:"recipe-instructions-list",children:t.map((function(e,t){return Object(x.jsx)(Me,{step:e.step,description:e.instruction,img:e.instruction_image},t)}))})]})})},Ze=function(e){var t=e.description;return Object(x.jsx)(s.Fragment,{children:Object(x.jsxs)("div",{className:"recipe-element",children:[Object(x.jsx)("h3",{children:"Additional instructions"}),Object(x.jsx)("div",{className:"recipe-additional-instructions",children:t})]})})},Je=function(e){var t=e.content,n=e.author;return Object(x.jsx)(s.Fragment,{children:Object(x.jsxs)("div",{className:"recipe-comment mt-3 mb-3",children:[Object(x.jsx)("div",{className:"recipe-comment-content",children:t}),Object(x.jsxs)("em",{children:["- ",n]})]})})},Xe=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={newComment:"",error:null},e.handleInputChange=e.handleInputChange.bind(Object(p.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(p.a)(e)),e}return Object(l.a)(n,[{key:"handleInputChange",value:function(e){this.setState({newComment:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.state.newComment.length>0&&this.state.newComment.length<=1024?(this.props.handleCommentSubmit(this.state.newComment),this.setState({newComment:"",error:""})):this.setState({error:"Comment length must be between 1-1024 characters"})}},{key:"render",value:function(){return Object(x.jsx)(s.Fragment,{children:Object(x.jsxs)("div",{className:"recipe-element",children:[Object(x.jsx)("h3",{children:"Comments"}),this.props.loggedIn?Object(x.jsxs)("form",{className:"mt-4 mb-4",onSubmit:this.handleSubmit,children:[Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"commentInputTextarea",children:Object(x.jsx)("h5",{children:"Add a new comment"})}),this.state.error?Object(x.jsx)("div",{class:"alert alert-danger",role:"alert",children:this.state.error}):null,Object(x.jsx)("textarea",{className:"form-control",id:"commentInputTextarea",rows:"3",onChange:this.handleInputChange,value:this.state.newComment,maxLength:1024,required:!0})]}),Object(x.jsx)("button",{type:"submit",className:"btn btn-primary btn-custom mt-2 mb-2",children:"Post comment"})]}):null,this.props.comments.map((function(e){return Object(x.jsx)(Je,{content:e.comment,author:e.username},e.commentid)}))]})})}}]),n}(r.a.Component),_e=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={header:{name:"",author:"",category:"",bookmarks:0,bookmarked:!1,ratings:[],rated:!1,stars:0},image:{source:"",alternative:""},additionalInstructions:"",tags:[],ingredients:[],instructions:[],comments:[],loggedIn:!1},e.handleSettingRecipeData=e.handleSettingRecipeData.bind(Object(p.a)(e)),e.handleHeaderChange=e.handleHeaderChange.bind(Object(p.a)(e)),e.handleCommentSubmit=e.handleCommentSubmit.bind(Object(p.a)(e)),e}return Object(l.a)(n,[{key:"handleSettingRecipeData",value:function(e){e.main=e.main.replace(/\\\\/g,"\\");var t=[];e.tags.forEach((function(e){t.push(e.name)}));var n=[];Object.keys(e.groups).forEach((function(t){n.push({name:t,ingredients:e.groups[t]})})),this.setState({header:{name:e.title,author:e.author,category:e.category,bookmarks:Number(e.bookmarks),bookmarked:1===Number(e.isBookmarked),stars:Number(e.avgRating),rated:Number(e.isRated)},image:{source:e.main,alternative:e.title},additionalInstructions:e.addInstructions,tags:t,ingredients:n,instructions:e.instructions,comments:e.comments})}},{key:"componentDidMount",value:function(){var e=this;document.body.style.overflowY="auto";for(var t=document.cookie.split(";").map((function(e){return e.split("=")[0]})),n=0;n<t.length;n++)t[n]=t[n].trim();this.setState({loggedIn:t.includes("authentication")});var a=this.props.match.params.id;fetch("/recipes/".concat(a),{method:"GET",credentials:"include"}).then((function(e){return e.json()})).then((function(t){return e.handleSettingRecipeData(t)})).catch((function(t){return e.props.history.push("/browse")})),window.scrollTo(0,0)}},{key:"handleHeaderChange",value:function(e,t){var n=this.state.header;n[e]=t,this.setState({header:n})}},{key:"handleCommentSubmit",value:function(e){var t=this,n=this.props.match.params.id,a="/recipes/".concat(n,"/comment"),s={comment:e};fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(s)}).then((function(e){if(e.ok)return e.json();throw new Error("Something went wrong...")})).then((function(e){var n=t.state.comments;n.unshift({commentid:e.commentid,comment:e.comment,username:e.author}),t.setState({comments:n})})).catch((function(e){console.error(e)}))}},{key:"render",value:function(){return Object(x.jsx)(s.Fragment,{children:Object(x.jsxs)("div",{className:"recipe-container pb-5",children:[Object(x.jsxs)("div",{className:"recipe-column-left",children:[Object(x.jsx)(Le,{source:this.state.image.source,alternative:this.state.image.alternative}),Object(x.jsx)(Qe,{tags:this.state.tags})]}),Object(x.jsxs)("div",{className:"recipe-column-right",children:[Object(x.jsx)(Ve,{name:this.state.header.name,author:this.state.header.author,category:this.state.header.category,bookmarks:this.state.header.bookmarks,bookmarked:this.state.header.bookmarked,stars:this.state.header.stars,rated:this.state.header.rated,recipeid:this.props.match.params.id,handleHeaderChange:this.handleHeaderChange,loggedIn:this.state.loggedIn}),Object(x.jsx)(Ke,{ingredients:this.state.ingredients}),Object(x.jsx)(Ye,{instructions:this.state.instructions}),Object(x.jsx)(Ze,{description:this.state.additionalInstructions}),Object(x.jsx)(Xe,{comments:this.state.comments,handleCommentSubmit:this.handleCommentSubmit,loggedIn:this.state.loggedIn})]})]})})}}]),n}(r.a.Component),$e=Object(u.h)(_e),et=function(){var e=Object(u.g)().id;return Object(x.jsxs)(s.Fragment,{children:[Object(x.jsx)(w,{}),Object(x.jsx)("div",{className:"container-fluid",children:Object(x.jsx)("div",{className:"container pt-3",children:Object(x.jsx)($e,{id:e})})})]})};c.a.render(Object(x.jsx)(r.a.StrictMode,{children:Object(x.jsx)(z.a,{children:Object(x.jsxs)(u.d,{children:[Object(x.jsx)(u.b,{exact:!0,path:"/",children:Object(x.jsx)(be,{})}),Object(x.jsx)(u.b,{exact:!0,path:"/browse",children:Object(x.jsx)(re,{})}),Object(x.jsx)(u.b,{exact:!0,path:"/login",children:Object(x.jsx)(le,{})}),Object(x.jsx)(u.b,{exact:!0,path:"/registration",children:Object(x.jsx)(ue,{})}),Object(x.jsx)(u.b,{path:"/user/:username",children:Object(x.jsx)(Ie,{})}),Object(x.jsx)(u.b,{path:"/addrecipe",children:Object(x.jsx)(He,{})}),Object(x.jsx)(u.b,{path:"/recipes/:id",children:Object(x.jsx)(et,{})}),Object(x.jsx)(u.a,{to:"/"})]})})}),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.403bac5c.chunk.js.map