{"version":3,"sources":["images/star_icon.svg","images/search_svg.svg","images/search_toggler.svg","images/grid_svg.svg","images/filter_svg.svg","images/recipe_svg.svg","images/dummy_icon.svg","components/NavBar/NavBar.js","images/logo.png","components/FilterMenu/FilterMenu.js","components/ContentGrid/ContentGrid.js","images/close-round-btn.svg","images/bookmark_svg.svg","images/star_svg.svg","components/SearchPopup/SearchPopup.js","components/ContentGridCard/ContentGridCard.js","components/ContentSearch/ContentSearch.js","App.js","components/LoginForm/LoginForm.js","pages/Login.js","components/RegistrationForm/RegistrationForm.js","pages/Registration.js","pages/About.js","images/edit-icon.svg","images/upload-icon.svg","components/UserHeader/UserHeader.js","pages/User.js","components/RecipeForm/RecipeForm.js","pages/AddRecipe.js","components/IndividualRecipe/IndividualRecipe.js","pages/Recipe.js","index.js"],"names":["_title","NavBrand","className","href","id","src","alt","NavToggler","type","searchTogglerSvg","NavItem","text","source","window","location","pathname","FilterToggler","state","filterActive","handleClick","bind","filterBtn","document","getElementById","this","setState","ariaExpanded","onClick","props","React","Component","NavItems","loggedIn","gridSvg","filterSvg","localStorage","getItem","recipeSvg","SearchForm","searchTerm","handleInputChange","handleSubmit","e","target","value","preventDefault","handleSearchChange","onSubmit","placeholder","onChange","required","searchSvg","NavUserInfo","userIcon","username","JSON","parse","NavigationBar","searchRedirect","dummyIcon","cookie","split","map","i","length","trim","includes","fetch","method","then","result","ok","json","Error","userData","image","replace","catch","error","console","filterMenuFilters","filterSearch","current","constructFilters","searchPhrase","contentSearch","filteringHandler","to","_excluded","_extends","Object","assign","arguments","key","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgStarIcon","_ref","svgRef","title","titleId","width","height","xmlns","ref","stroke","opacity","fill","strokeWidth","style","strokeLinejoin","d","ForwardRef","CategorySelection","categories","catOptions","forEach","cat","push","htmlFor","name","defaultValue","disabled","hidden","ChecklistCheckbox","checked","startChecked","checklistName","Checklist","items","IngredientSelection","include","exclude","ingredients","callbackExlude","callbackInclude","customExcludeIngredients","customIncludeIngredients","callback","customSet","marginTop","TagSelection","topTags","tags","customTags","FilterSearch","handleAddingItems","toLowerCase","item","role","list","autoComplete","RatingSelection","FilteringMenuContents","updateCustomExcludeIngredients","updateCustomIncludeIngredients","updateCustomTags","getCheckedElements","checkAll","elements","checkedElements","selectedCategory","minRating","checkedCustomIncludeIngredients","checkedCustomExcludeIngredients","checkedCustomTags","checkedTopTags","popTagNames","checkedTopIngredientsInclude","popIngredientNames","checkedTopIngredientsExclude","inIngredients","concat","outIngredients","category","rating","topIngredientsInclude","topIngredientsExclude","allIngredients","allTags","filters","filteringCallback","FilteringMenu","ingredientOptions","tagOptions","handleFetchingFilters","data","topIngredientListInclude","topIngredientListExclude","popIngredients","ingredient","topTagList","popTags","tag","allCategories","res","ContentGrid","fontWeight","content","PopupRating","number","icon","userHasDone","filter","fontSize","PopupInstructionStep","stepNumber","stepText","PopupIngredient","ingredientName","quantity","PopupTag","tagText","IngredientList","marginBottom","SearchPopupContent","t","imagePath","closeBtnIcon","author","bookmarks","bookmarkIcon","bookmarked","stars","starIcon","rated","instructions","SearchPopup","credentials","main","element","dataGroups","groups","ingredientGroups","group","amount","step","instruction","Number","isBookmarked","avgRating","isRated","display","closeCallback","stopPropagation","ContentGridCard","img","cardCallback","ContentSearch","recipeCards","popupDisplay","scrollbarWidth","overflow","popup","createRef","popupToggleHandler","handleResize","buildCards","gridContainer","rect","getBoundingClientRect","left","navbar","innerWidth","documentElement","clientWidth","body","overflowY","paddingRight","marginRight","scrollTop","updateData","url","Array","isArray","values","slice","response","recipes","recipe","mainimage","recipeid","addEventListener","ResizeObserver","observe","App","history","withRouter","ErrorAlert","errors","idx","LoginForm","password","redirect","usernameVal","passwordVal","passwordValidation","user","headers","stringify","setItem","windowUrl","search","params","URLSearchParams","get","Login","RegistrationForm","passwordRepeat","firstValue","secondValue","passwordsMatchVal","minLength","maxLength","Registration","About","handleSettingRecipeData","handleRedirect","destination","minWidth","textAlign","backgroundColor","textDecoration","padding","color","borderRadius","gridTemplateColumns","gridGap","UserInfo","editing","editBio","file","handleEditingChange","handleEditingBioText","handleSendingBio","handleFileChange","bio","event","formData","FormData","append","updateBio","files","accept","click","uploadIcon","margin","editIcons","UserHeaderButton","active","UserHeaderButtons","outerText","UserHeader","User","currentOption","header","all","reviewed","saved","uploaded","handleUserData","tabHandler","userPageBody","tabID","ids","match","headerData","NameInput","selected","ImageUploader","Ingredient","deleteIngredient","AddIngredientInput","addIngredient","showIngredientInput","toggleIngredientInput","initialIngredients","newState","ingredientAmount","handleIngredientChange","splice","IngredientSubgroup","handleSubgroupChange","deleteIngredientSubgroup","IngredientInput","default","subgroups","newGroupName","addIngredientSubgroup","subgroup","ingredientsObj","Default","InstructionsStep","handleInstructionChange","handleImageChange","rows","deleteInstructionStep","InstructionsInput","steps","index","addInstructionStep","description","stepObj","reduce","obj","handleStepImageDeletion","handleStepImageChange","String","AdditionalInstructionsInput","TagInput","tagList","RecipeForm","addInstructions","stepImages","nameErrors","categoryErrors","imageErrors","ingredientErrors","instructionErrors","tagErrors","createdID","currentImages","dataValidates","every","groupKey","some","undefined","recipeID","setTimeout","log","errorCategory","AddRecipe","RecipeImage","alternative","RecipeHeader","userRating","handleBookmarkClick","handleRatingChange","handleStarSubmit","handleHeaderChange","avgrating","userLink","cursor","RecipeTag","RecipeTagList","RecipeIngredient","RecipeIngredientList","RecipeIngredientGroups","RecipeInstruction","onError","RecipeInstructionList","instruction_image","RecipeAdditionalInstructions","RecipeComment","RecipeComments","newComment","handleCommentSubmit","class","comments","comment","commentid","IndividualRecipe","ratings","additionalInstructions","recipe_id","err","scrollTo","attribute","unshift","Recipe","useParams","ReactDOM","render","StrictMode","exact","path"],"mappings":"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","file":"static/js/main.403bac5c.chunk.js","sourcesContent":["var _title;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgStarIcon(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"g\", null, _title || (_title = /*#__PURE__*/React.createElement(\"title\", null, \"Star\")), /*#__PURE__*/React.createElement(\"path\", {\n    stroke: \"#000000\",\n    opacity: 1,\n    fill: \"none\",\n    strokeWidth: 2,\n    style: {\n      strokeLinejoin: \"bevel\"\n    },\n    d: \"M 15.489 8.507 L 12.494 1.998 L 12 1.587 L 11.32 1.965 L 8.416 8.127 L 7.769 8.444 L 1.838 9.329 L 1.22 9.802 L 1.406 10.53 L 5.945 14.923 L 6.007 15.618 L 4.957 22.001 L 5.544 22.349 L 6.223 22.191 L 11.691 19.441 L 12.369 19.378 L 17.558 22.191 L 18.454 22.412 L 18.887 21.874 L 17.497 15.397 L 17.869 14.669 L 21.574 11.288 L 22.78 9.93 L 22.562 9.266 L 18.115 8.729 L 15.489 8.507 Z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgStarIcon);\nexport default __webpack_public_path__ + \"static/media/star_icon.16a67052.svg\";\nexport { ForwardRef as ReactComponent };","export default __webpack_public_path__ + \"static/media/search_svg.bf7f9301.svg\";","export default __webpack_public_path__ + \"static/media/search_toggler.47ab97e5.svg\";","export default __webpack_public_path__ + \"static/media/grid_svg.5fef0c1d.svg\";","export default __webpack_public_path__ + \"static/media/filter_svg.5ad9418f.svg\";","export default __webpack_public_path__ + \"static/media/recipe_svg.a7178d0c.svg\";","export default __webpack_public_path__ + \"static/media/dummy_icon.bd7bf99d.svg\";","import React, { Fragment } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport PropTypes from 'prop-types';\nimport \"./NavBar.css\";\nimport siteLogo from \"../../images/logo.png\";\nimport searchSvg from \"../../images/search_svg.svg\";\nimport searchTogglerSvg from \"../../images/search_toggler.svg\";\nimport gridSvg from \"../../images/grid_svg.svg\";\nimport filterSvg from \"../../images/filter_svg.svg\";\nimport recipeSvg from \"../../images/recipe_svg.svg\";\nimport dummyIcon from \"../../images/dummy_icon.svg\";\n\n/**\n * Component for displaying the web service logo and title.\n */\nconst NavBrand = () => {\n  return (\n    <Fragment>\n      <a className=\"navbar-brand handwritten-text\" href=\"/\">\n        <img id=\"logo-img\" src={siteLogo} alt=\"Logo\" />\n        Recipe Sharing\n      </a>\n    </Fragment>\n  )\n}\n\n/**\n * Component for toggling the search bar on small screens.\n */\nconst NavToggler = () => {\n  return (\n    <Fragment>\n      <button className=\"navbar-toggler nav-item\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle search bar\">\n        <img className=\"navbar-toggler-icon nav-icon\" src={searchTogglerSvg} alt=\"Search\" />\n      </button>\n    </Fragment>\n  )\n}\n\n/**\n * Component for displaying a single navigation item.\n * @param {String} text Text to be shown on the button\n * @param {String}  href  The URL where this navigation item should lead \n * @param {String}  source  Source for the icon image for this navigation item\n * @returns A <Fragment> element with a <li> element inside it that contains both\n *          an icon and the text link that are rendered based on screen size.\n */\nconst NavItem = ({ text, href, source }) => {\n  return (\n    <Fragment>\n      <li className={`nav-item nav-icon-item ${href === window.location.pathname ? \"active\" : \"\"}`}>\n        <a className=\"d-md-none\" href={href}>\n          <img className=\"nav-icon\" src={source} alt={`${text} icon`} />\n        </a>\n        <a className=\"nav-link d-none d-md-block\" href={href}>\n          {text}\n        </a>\n      </li>\n    </Fragment>\n  )\n}\n\nNavItem.propTypes = {\n  text: PropTypes.string.isRequired,\n  href: PropTypes.string.isRequired,\n  source: PropTypes.node.isRequired,\n}\n\n/**\n * Component for toggling the filtering menu. Looks interactive on pages where\n * the filtering menu can be opened and is otherwise rendered in a way that makes\n * it clear it is disabled and non-functional.\n * @param {String} text Text to be shown on the button\n * @param {String}  source  Source for the icon image for the filter toggler\n * @returns A <Fragment> element with a <li> element inside it that contains both\n *          an icon and the text link that are rendered based on screen size.\n */\nclass FilterToggler extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      filterActive: false,\n    }\n\n    this.handleClick = this.handleClick.bind(this);\n  }\n\n  handleClick() {\n    let filterBtn = document.getElementById('filter-button');\n    this.setState({ filterActive: (filterBtn && filterBtn.ariaExpanded === 'true') });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        {window.location.pathname === \"/browse\" ? \n          <li className={`nav-item nav-icon-item ${this.state.filterActive ? \"active\" : \"\"}`}>\n            <div className=\"d-md-none\" data-bs-toggle=\"collapse\" data-bs-target=\"#filtering-menu\" aria-expanded=\"false\" aria-controls=\"filtering-menu\" id='filter-button-icon' onClick={this.handleClick}>\n              <img className=\"nav-icon\" src={this.props.source} alt={`${this.props.text} icon`} />\n            </div>\n            <div className=\"nav-link d-none d-md-block\" data-bs-toggle=\"collapse\" data-bs-target=\"#filtering-menu\" aria-expanded=\"false\" aria-controls=\"filtering-menu\" id='filter-button' onClick={this.handleClick}>\n              {this.props.text}\n            </div>\n          </li>\n        :\n          <li className=\"nav-item nav-icon-item disabled\">\n            <div className=\"d-md-none\" id='filter-button-icon'>\n              <img className=\"nav-icon\" src={this.props.source} alt={`${this.props.text} icon`} />\n            </div>\n            <div className=\"nav-link d-none d-md-block\" id='filter-button'>\n              {this.props.text}\n            </div>\n          </li>\n        }\n      </Fragment>\n    );\n  }\n};\n\n/**\n * Component for rendering navigation items. Logged in users can see the link for recipe\n * adding page while for others it's hidden.\n * @param {Boolean} loggedIn A boolean indicating whether the user is logged in or not\n * @returns A <Fragment> element with a <ul> element inside it that contains <NavItem> \n *          elements and a <FilterToggler> element.\n */\nconst NavItems = ({ loggedIn }) => {\n  return (\n    <Fragment>\n      <ul className=\"navbar-nav mr-auto\">\n        <NavItem text=\"Browse\" href=\"/browse\" source={gridSvg} />\n        <FilterToggler text=\"Filter\" source={filterSvg} />\n        { loggedIn\n          && window.localStorage.getItem('user') !== null \n          ? <NavItem text=\"Add a recipe\" href=\"/addrecipe\" source={recipeSvg} /> : null}\n      </ul>\n    </Fragment>\n  );\n};\n\n/**\n * Component for the search bar and search button.\n * @param {Function} handleSearchChange A callback function for handling search phrase changes\n * @returns A <Fragment> element with a <form> element inside it that contains an input field and\n *          a submit button.\n */\nclass SearchForm extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      searchTerm: \"\",\n    }\n\n    this.handleInputChange = this.handleInputChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleInputChange(e) {\n    this.setState({ searchTerm: e.target.value });\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    this.props.handleSearchChange(this.state.searchTerm);\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <form className=\"d-flex my-2 my-lg-0 flex-grow-1\" onSubmit={this.handleSubmit}>\n          <div className=\"input-group\">\n            <input\n              className=\"form-control mr-sm-2 search-bar\"\n              id='navbar-searchbar'\n              type=\"search\"\n              placeholder=\"Enter a search term...\"\n              aria-label=\"Search term input\"\n              onChange={this.handleInputChange}\n            required />\n            <button className=\"btn btn-search\" type=\"submit\" id=\"button-addon2\">\n              <img className=\"nav-icon\" src={searchSvg} alt=\"Search\" />\n            </button>\n          </div>\n        </form>\n      </Fragment>\n    );\n  }\n};\n\n/**\n * Component for rendering the user information in the navigation bar or showing a link\n * to the login page depending on whether the user is logged in.\n * @param {Boolean} loggedIn A boolean indicating whether the user is logged in or not\n * @param {String} userIcon A path to the user icon if it exists or to a dummy icon\n * @returns A <Fragment> element with a <ul> element inside it that either contains the user's\n *          icon and username as links to the user page or a link to the login page.\n */\nconst NavUserInfo = ({ loggedIn, userIcon }) => {\n  if (loggedIn) {\n    let username = JSON.parse(window.localStorage.getItem('user')).username;\n    return (\n    <Fragment>\n      <ul className=\"navbar-nav mr-auto\">\n        <li id=\"user-info\">\n          <a href={`/user/${username}`}>\n            <img id=\"user-icon\" src={userIcon} alt=\"User icon\" />\n          </a>\n          <a id=\"username-link\" className={`nav-link d-none d-md-block ${window.location.pathname === `/user/${username}` ? \"active\" : \"\"}`} href={`/user/${username}`}>\n            <span className=\"navbar-text\">{username}</span>\n          </a>\n        </li>\n      </ul>\n    </Fragment>\n    );\n  }\n  return (\n    <Fragment>\n      <ul className=\"navbar-nav mr-auto\">\n        <li className={`nav-item ${window.location.pathname === \"/login\" ? \"active\" : \"\"}`}>\n          <a className=\"nav-link\" href=\"/login\">\n            <span className=\"navbar-text\">Login</span>\n          </a>\n        </li>\n      </ul>\n    </Fragment>\n  );\n};\n\nNavUserInfo.propTypes = {\n  loggedIn: PropTypes.bool.isRequired,\n  userIcon: PropTypes.string.isRequired,\n};\n\n/**\n * Component for rendering the navigation bar.\n */\nclass NavigationBar extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      searchTerm: \"\",\n      searchRedirect: false,\n      loggedIn: false,\n      userIcon: dummyIcon\n    }\n\n    this.handleSearchChange = this.handleSearchChange.bind(this);\n  }\n\n  componentDidMount() {\n    // check whether the user is logged in\n    let cookie =  document.cookie.split(\";\").map(cookie => cookie.split(\"=\")[0]);\n\n    for( let i = 0; i < cookie.length; i++)\n      cookie[i] = cookie[i].trim();\n\n    this.setState({loggedIn: cookie.includes(\"authentication\")});\n    \n    // if logged in, fetch user icon and store it in state\n    if (cookie.includes(\"authentication\")) {\n      let username = JSON.parse(window.localStorage.getItem('user')).username;\n      fetch(`/userdata/${username}`, {\n        method: 'GET'\n      })\n      .then(result => {\n        if (result.ok) {\n          return result.json();\n        }\n        throw new Error('Something went wrong...');\n      })\n      .then(userData => {\n        if (userData.image) {\n          this.setState({ userIcon: `/${userData.image.replace(/\\\\/g, '/').replace('../client/public/', '')}` });\n        }\n      })\n      .catch((error) => {\n          console.error(error);\n      });\n    }\n\n  }\n\n  handleSearchChange(searchTerm) {\n    this.setState({ searchTerm: searchTerm });\n    // if the user is searching while in the browse view\n    if (window.location.pathname === \"/browse\") {\n      let filterMenuFilters = this.props.filterSearch.current.constructFilters();\n      filterMenuFilters.searchPhrase = searchTerm;\n      this.props.contentSearch.current.filteringHandler(filterMenuFilters);\n    } \n    // otherwise the user must be redirected to browse view in order to display results\n    else {\n      this.setState({ searchRedirect: true });\n    }\n  }\n\n  render() {\n    return (\n      <Fragment>\n        {this.state.searchRedirect ? \n          <Redirect to={{ pathname: \"/browse\", state: { searchTerm: this.state.searchTerm }, }} /> \n          : null}\n        <nav className=\"navbar fixed-top navbar-expand-sm navbar-custom\" id=\"main-navbar\">\n          <NavBrand />\n          <div className=\"navbar-nav-items\">\n            <NavItems loggedIn={this.state.loggedIn}/>\n            <NavToggler />\n          </div>\n          <div className=\"navbar-collapse collapse w-100 order-1 order-sm-0 dual-collapse2\" id=\"navbarSupportedContent\">\n            <SearchForm handleSearchChange={this.handleSearchChange} />\n          </div>\n          <div className=\"float-end\">\n            <NavUserInfo loggedIn={this.state.loggedIn} userIcon={this.state.userIcon} />\n          </div>\n        </nav>\n      </Fragment>\n    );\n  }\n};\n\nexport default NavigationBar;\n","export default \"data:image/png;base64,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\"","import React, { Fragment } from \"react\";\nimport \"./FilterMenu.css\";\nimport {ReactComponent as StarIcon} from \"../../images/star_icon.svg\";\n\n/**\n * Component for rendering a 'Category' header and a select with different categories as options.\n * A placeholder option with the text 'Select a category' is chosen by default but is hidden whe\n * a new category option is chosen.\n * @param {Array} categories  Array of categories to be displayed as options in the select\n * @returns A <Fragment> element with a <h5> header and a select component\n */\nconst CategorySelection = ({categories}) => {\n  let catOptions = [];\n  categories.forEach(cat => {\n    catOptions.push(<option value={cat} key={cat}>{cat}</option>)\n  })\n\n  return (\n    <Fragment>\n      <h5><label htmlFor=\"categories-select\">Category</label></h5>\n      <select name=\"categories\" id=\"categories-select\" className=\"form-select\" defaultValue=\"placeholder\">\n        <option value=\"placeholder\" disabled hidden>Select a category</option>\n        {catOptions}\n      </select>\n    </Fragment>\n  );\n}\n\n/**\n * Component for rendering a single checkbox and its label. It keeps track of whether it is checked\n * or not in its state.\n * @param {string}  this.props.checklistName  Name of the checklist where this checkbox is included\n * @param {string}  this.props.value  Value for the checkbox\n * @param {string}  this.props.name Name for the checkbox value that is shown on its label\n * @returns A <Fragment> element with a .form-check div with a checkbox input and label inside it.\n */\nclass ChecklistCheckbox extends React.Component {\n  constructor(){\n    super();\n    this.state = { checked: false }\n  }\n\n  // used for adding checked elements from dropdown menu\n  componentDidMount(){\n    if(this.props.startChecked)\n      this.setState({ checked: true });\n  }\n\n  render(){\n    return (\n      <Fragment>\n        <div className=\"form-check\">\n          <input className=\"form-check-input\" type=\"checkbox\" id={`checkbox-${this.props.checklistName}-${this.props.value}`} name={this.props.value} value={this.props.value} checked={this.state.checked} onChange={e => {this.setState({checked: !this.state.checked})}}/>\n          <label className=\"form-check-label filter-checkbox-item\" htmlFor={`checkbox-${this.props.checklistName}-${this.props.value}`}> {this.props.name}</label>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\n/**\n * Component for rendering a list of <ChecklistCheckbox> elements.\n * @param {Array}  items  An array of <ChecklistCheckbox> elements to be displayed\n * @returns A <Fragment> element with <ChecklistCheckbox> elements inside it.\n */\nconst Checklist = ({ items }) => {\n  return (\n    <Fragment>\n      {items}\n    </Fragment>\n  );\n}\n\n/**\n * Component for rendering a dropdown title 'Ingredients' with a spinning arrow to indicate\n * whether pressing it expands or collapses the thing and the dropdown contents.\n * @param {Array}  include  An array of popular ingredients to render under 'Popular' in 'Include'\n * @param {Array}  exclude  An array of popular ingredients to render under 'Popular' in 'Exclude'\n * @param {Array}  ingredients  An array of all ingredients in the database\n * @param {Function}  callbackExlude  A callback function for dealing with ingredient exclusion\n * @param {Function}  callbackInclude  A callback function for dealing with ingredient inclusion\n * @param {Array}  customExcludeIngredients  An array of custom ingredients to render under 'Custom' in 'Exclude'\n * @param {Array}  customIncludeIngredients  An array of custom ingredients to render under 'Custom' in 'Include'\n * @returns A <Fragment> element with a button and a collapsible div containing <FilterSearch> and <Checklist> elements\n */\nconst IngredientSelection = ({ include, exclude, ingredients, callbackExlude, callbackInclude, customExcludeIngredients, customIncludeIngredients }) => {\n  return (\n    <Fragment>\n      <h5>\n        <button className=\"drop-select-btn dropdown-toggle\" type=\"button\" data-bs-toggle=\"collapse\" \n                  data-bs-target=\"#filterIngredientsContent\" aria-controls=\"filterIngredientsContent\" \n                  aria-expanded=\"false\" aria-label=\"Toggle ingredient filters\"\n        >\n          Ingredients\n        </button>\n      </h5>\n      <div id=\"filterIngredientsContent\" className=\"collapse\">\n        <h6>Include</h6>\n        <FilterSearch placeholder=\"Search for an ingredient...\" items={ingredients} id={\"ingredients-include-drowpdown-options\"} callback={callbackInclude} customSet={customIncludeIngredients} checklistName={'include'}/>\n\n        <div className=\"popular-item-container\">\n          <h6>Popular</h6>\n          <Checklist items={include} />\n        </div>\n\n        <h6 style={{marginTop: '20px'}}>Exclude</h6>\n        <FilterSearch placeholder=\"Search for an ingredient...\" items={ingredients} id={\"ingredients-exclude-drowpdown-options\"} callback={callbackExlude} customSet={customExcludeIngredients} checklistName={'exclude'}/>\n       \n        <div className=\"popular-item-container\">\n          <h6>Popular</h6>\n          <Checklist items={exclude} />\n        </div>\n      </div>\n    </Fragment>\n  );\n}\n\n/**\n * Component for rendering a dropdown title 'Tags' with a spinning arrow to indicate\n * whether pressing it expands or collapses the thing and the dropdown contents.\n * @param {Array}  topTags  An array of popular tags to render under 'Popular'\n * @param {Array}  tags  An array of custom tags to render under 'Custom'\n * @param {Function}  callback  A callback function for dealing with tag inclusion\n * @param {Array}  customTags  An array of custom tags to render under 'Custom'\n * @returns A <Fragment> element with a button and a collapsible div containing <FilterSearch> and <Checklist> elements\n */\nconst TagSelection = ({ topTags, tags, callback, customTags }) => {\n  return (\n    <Fragment>\n      <h5>\n        <button className=\"drop-select-btn dropdown-toggle\" type=\"button\" data-bs-toggle=\"collapse\" \n                data-bs-target=\"#filterTagsContent\" aria-controls=\"filterTagsContent\" \n                aria-expanded=\"false\" aria-label=\"Toggle tag filters\"\n        >\n          Tags\n        </button>\n      </h5>\n      <div id=\"filterTagsContent\" className=\"collapse\">\n        <FilterSearch placeholder=\"Search for a tag...\" items={tags} id={\"tag-drowpdown-options\"} callback={callback} customSet={customTags} checklistName={'tag-list'}/>\n        <div className=\"popular-item-container\">\n          <h6>Popular</h6>\n          <Checklist items={topTags} checklistName={'top-tag-list'}/>\n        </div>\n      </div>\n    </Fragment>\n  );\n}\n\n/**\n * Component for rendering a input field with a datalist for new items and a list showing items created \n * based on the user's inputs.\n * @param {String}  this.props.id  A ID for this FilterSearch\n * @param {String}  this.props.placeholder  A placeholder to show in the input field in string format\n * @param {Array}  this.props.items  An array of items to display in the input datalist\n * @param {Function}  this.props.callback  A callback function for dealing with added items\n * @param {Array}  this.props.customSet  A set of items to be shown under 'Custom'\n * @param {String}  this.props.checklistName  The name to be given to the created checklists\n * @returns A <Fragment> element with a .search-container div that contains divs for element inputting\n *          and showing a list of elements based on the inputted values\n */\nclass FilterSearch extends React.Component {\n  constructor() {\n    super();\n\n    this.state = { error: null }\n\n    this.handleAddingItems = this.handleAddingItems.bind(this);\n  }\n\n  handleAddingItems(e) {\n    e.preventDefault();\n    // get value from input field\n    let value = document.getElementById(this.props.id).value.toLowerCase().trim();\n\n    // check that the value isn't empty\n    if (value === '') return;\n\n    let items = this.props.customSet;\n    // check for duplicates\n    if (!items.includes(value)) {\n      // add item\n      items.push(value);\n      document.getElementById(this.props.id).value = '';\n      this.props.callback(items);\n      this.setState({ error: null });\n    } else {\n      let error = \"Ingredient already added\";\n      this.setState({ error: error });\n    }\n  }\n\n  render() {\n    let items = [];\n    this.props.customSet.forEach(item => {\n      items.push(<ChecklistCheckbox checklistName={this.props.checklistName} name={item} value={item} startChecked={true} key={`checklist-${item}`} />);\n    });\n\n    return (\n      <Fragment>\n          <div className=\"search-container\">\n            {this.state.error ? <div className=\"alert alert-danger\" role=\"alert\">{this.state.error}</div> : null}\n            <div className=\"search-dropdown-container\">\n              <div className=\"form-search-container\">\n                <input className=\"form-control\" id={this.props.id} list={`items-${this.props.id}`} placeholder={ this.props.placeholder } autoComplete=\"off\"/>\n                <datalist id={`items-${this.props.id}`}> \n                  { this.props.items }\n                </datalist>\n              </div>\n              \n              <button className=\"btn-checklist-add\" onClick={(e) => this.handleAddingItems(e)}>Add</button>\n            </div>\n            \n            <div className=\"chosen-items-container\">\n              {this.props.customSet.length > 0 ? <h6>Custom</h6> : null}\n              {items}\n            </div>     \n          </div>\n      </Fragment>\n    )\n  }\n}\n\n/**\n * Component for rendering a 'Minimum rating' header and a radio-type input for minimum star rating input.\n * @returns A <Fragment> element with a <h5> header and a div containing inputs and labels for the stars.\n */\nconst RatingSelection = () => {\n  return (\n    <Fragment>\n      <h5 style={{marginTop: '10px'}}>Minimum rating</h5>\n      <div className=\"star-rating\" id=\"star-rating\">\n        <input type=\"radio\" name=\"stars\" id=\"star-5\" value=\"5\"/>\n        <label className=\"form-check-label\" htmlFor=\"star-5\"><StarIcon className=\"star-rating-icon\" alt=\"star\" /></label>\n        <input type=\"radio\" name=\"stars\" id=\"star-4\" value=\"4\"/>\n        <label className=\"form-check-label\" htmlFor=\"star-4\"><StarIcon className=\"star-rating-icon\" alt=\"star\" /></label>\n        <input type=\"radio\" name=\"stars\" id=\"star-3\" value=\"3\"/>\n        <label className=\"form-check-label\" htmlFor=\"star-3\"><StarIcon className=\"star-rating-icon\" alt=\"star\" /></label>\n        <input type=\"radio\" name=\"stars\" id=\"star-2\" value=\"2\"/>\n        <label className=\"form-check-label\" htmlFor=\"star-2\"><StarIcon className=\"star-rating-icon\" alt=\"star\" /></label>\n        <input type=\"radio\" name=\"stars\" id=\"star-1\" value=\" 1\"/>\n        <label className=\"form-check-label\" htmlFor=\"star-1\"><StarIcon className=\"star-rating-icon\" alt=\"star\" /></label>\n      </div>\n    </Fragment>\n  );\n}\n\n/**\n * Component for rendering filtering menu contents.\n * @param {Array}  this.props.categories  An array of all categories in the database\n * @param {Function}  this.props.filteringCallback  A callback function for dealing with filtering functionality\n * @param {Array}  this.props.topTags  An array of <ChecklistCheckbox> elements of most popular tags\n * @param {Array}  this.props.topIngredientsInclude  An array of <ChecklistCheckbox> elements of most popular \n *                                                   ingredients to be listed under 'Include'\n * @param {Array}  this.props.topIngredientsExclude  An array of <ChecklistCheckbox> elements of most popular \n *                                                   ingredients to be listed under 'Exclude'\n * @param {Array}  this.props.allIngredients  An array of all ingredients in the database\n * @param {Array}  this.props.allTags  An array of all tags in the database\n * @param {Array}  this.props.popIngredientNames  An array of popular ingredients in the database\n * @param {Array}  this.props.popTagNames  An array of popular tags in the database\n * @returns A <Fragment> element with a <h3> header and a <form> element.\n */\nclass FilteringMenuContents extends React.Component {\n  constructor(){\n    super();\n\n    this.state = {\n      customExcludeIngredients: [],\n      customIncludeIngredients: [],\n      customTags: []\n    }\n\n    this.updateCustomExcludeIngredients = this.updateCustomExcludeIngredients.bind(this);\n    this.updateCustomIncludeIngredients = this.updateCustomIncludeIngredients.bind(this);\n    this.updateCustomTags = this.updateCustomTags.bind(this);\n    this.getCheckedElements = this.getCheckedElements.bind(this);\n    this.checkAll = this.checkAll.bind(this);\n    this.constructFilters = this.constructFilters.bind(this);\n  }\n\n  updateCustomExcludeIngredients(items) {\n    this.setState({ customExcludeIngredients: items });\n  }\n\n  updateCustomIncludeIngredients(items) {\n    this.setState({ customIncludeIngredients: items });\n  }\n\n  updateCustomTags(items) {\n    this.setState({ customTags: items });\n  }\n\n  getCheckedElements(elements, id) {\n    let checkedElements = [];\n    elements.forEach(item => {\n      if(document.getElementById(`checkbox-${id}-${item}`).checked)\n        checkedElements.push(item);\n    });\n    return checkedElements;\n  }\n\n  checkAll(elements, id) {\n    elements.forEach(item => {\n      document.getElementById(`checkbox-${id}-${item}`).checked = true;\n    });\n  }\n\n  constructFilters() {\n    // get selected category\n    let selectedCategory = document.getElementById('categories-select').value;\n\n    // get selected minimum rating\n    let minRating = 0;\n    for(let i = 1; i <= 5; i++){\n      if(document.getElementById(`star-${i}`).checked)\n        minRating = i;\n    }\n\n    // get checked custom ingredients\n    let checkedCustomIncludeIngredients = this.getCheckedElements(this.state.customIncludeIngredients, 'include');\n    let checkedCustomExcludeIngredients = this.getCheckedElements(this.state.customExcludeIngredients, 'exclude');\n    // get checked custom tags\n    let checkedCustomTags = this.getCheckedElements(this.state.customTags, 'tag-list');\n    // get checked popular tags\n    let checkedTopTags = this.getCheckedElements(this.props.popTagNames, 'top-tag-list');\n    // get checked popular ingredients\n    let checkedTopIngredientsInclude = this.getCheckedElements(this.props.popIngredientNames, 'top-ingredient-include-list')\n    let checkedTopIngredientsExclude = this.getCheckedElements(this.props.popIngredientNames, 'top-ingredient-exclude-list')\n\n    this.setState({\n      customIncludeIngredients: checkedCustomIncludeIngredients,\n      customExcludeIngredients: checkedCustomExcludeIngredients,\n      customTags: checkedCustomTags\n\n    }, () => {\n      this.checkAll(this.state.customIncludeIngredients, 'include');\n      this.checkAll(this.state.customExcludeIngredients, 'exclude');\n      this.checkAll(this.state.customTags, 'tag-list');\n    });\n\n    // construct filter\n    let filter = {\n      inIngredients: checkedTopIngredientsInclude.concat(this.state.customIncludeIngredients),\n      outIngredients: checkedTopIngredientsExclude.concat(this.state.customExcludeIngredients),\n      tags: checkedTopTags.concat(this.state.customTags),\n      category: selectedCategory,\n      rating: minRating,\n      searchPhrase: document.getElementById('navbar-searchbar').value\n    }\n\n    return filter;\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <h3 id=\"filtersHeader\">Filters</h3>\n        <form>\n          <div className=\"filter-menu-contents\">\n            <CategorySelection categories={this.props.categories}/>\n            \n            <IngredientSelection \n              include={this.props.topIngredientsInclude} \n              exclude={this.props.topIngredientsExclude} \n              ingredients={this.props.allIngredients} \n              callbackExlude={this.updateCustomExcludeIngredients} \n              callbackInclude={this.updateCustomIncludeIngredients}\n              customExcludeIngredients={this.state.customExcludeIngredients}\n              customIncludeIngredients={this.state.customIncludeIngredients}\n            />\n            \n            <TagSelection \n              topTags={this.props.topTags} \n              tags={this.props.allTags} \n              callback={this.updateCustomTags} \n              customTags={this.state.customTags}\n            />\n            \n            <RatingSelection />\n          </div>\n          <div className=\"text-center mt-2\">\n            <button id=\"apply-filters-btn\" onClick={(e) => {\n              e.preventDefault();\n              let filters = this.constructFilters();\n              this.props.filteringCallback(filters);      \n            }}>Apply filters</button>\n          </div>\n        </form>\n      </Fragment>\n    );\n  }\n}\n\n/**\n * Component for rendering the filtering menu.\n * @returns A <Fragment> element with a collapsable <nav> element inside it.\n */\nclass FilteringMenu extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      categories: [],\n      topTags: [],\n      topIngredientsInclude: [],\n      topIngredientsExclude: [],\n      ingredientOptions: [],\n      tagOptions: [],\n      popIngredientNames: [],\n      popTagNames: []\n    }\n\n    this.handleFetchingFilters = this.handleFetchingFilters.bind(this);\n  }\n\n  handleFetchingFilters(data) {\n    // populate the filtering menu with fetched filters data\n    let topIngredientListInclude = [];\n    let topIngredientListExclude = [];\n    data.popIngredients.forEach(ingredient => {\n      topIngredientListInclude.push(<ChecklistCheckbox name={ingredient} value={ingredient} checklistName={'top-ingredient-include-list'} key={`${ingredient}-include`}/>);\n      topIngredientListExclude.push(<ChecklistCheckbox name={ingredient} value={ingredient} checklistName={'top-ingredient-exclude-list'} key={`${ingredient}-exclude`}/>);\n    });\n\n    let ingredientOptions = [];\n    data.allIngredients.forEach(item => {\n      ingredientOptions.push(<option value={item} key={item}/>);\n    });\n\n    let topTagList = [];\n    data.popTags.forEach(tag => {\n      topTagList.push(<ChecklistCheckbox name={tag} value={tag} checklistName={'top-tag-list'} key={`${tag}-top`}/>);\n    });\n\n    let tagOptions = [];\n    data.allTags.forEach(item => {\n      tagOptions.push(<option value={item} key={`${item}-option`}/>);\n    });\n\n    this.setState({\n      categories: data.allCategories,\n      topTags: topTagList,\n      topIngredientsInclude: topIngredientListInclude,\n      topIngredientsExclude: topIngredientListExclude,\n      ingredientOptions: ingredientOptions,\n      tagOptions: tagOptions,\n      popIngredientNames: data.popIngredients,\n      popTagNames: data.popTags\n    });\n  }\n\n  componentDidMount(){\n    // fetch filters to be used in the filtering menu\n    fetch('/filters', {method: 'GET'})\n    .then(res => res.json())\n    .then(res => this.handleFetchingFilters(res));\n  }\n\n  render(){\n    return (\n      <Fragment>\n        <nav id=\"filtering-menu\" className=\"collapse\">\n          <div className=\"filter-menu-container\">\n            <FilteringMenuContents \n              categories={this.state.categories}\n              filteringCallback={this.props.filteringCallback} \n              topTags={this.state.topTags}\n              topIngredientsInclude={this.state.topIngredientsInclude}\n              topIngredientsExclude={this.state.topIngredientsExclude}\n              allIngredients={this.state.ingredientOptions}\n              allTags={this.state.tagOptions}\n              popIngredientNames={this.state.popIngredientNames}\n              popTagNames={this.state.popTagNames}\n              ref={this.props.filterSearch}\n            />\n          </div>\n        </nav>\n      </Fragment>\n    )\n  }\n}\n\nexport default FilteringMenu;","import React, { Fragment } from \"react\";\n\nimport \"./ContentGrid.css\"\n\n/**\n * Component for displaying a content grid. If a search phrase has been entered, the search phrase\n * is show to the user with text 'Searching for: [search phrase]' above the content grid cards.\n * @param   {string}    this.props.searchPhrase The possible search phrase used in string format\n * @param   {array}   this.props.content    Array of <ContentGridCard> elements\n * @returns A <Fragment> with a conditionally added <h4> header and a .content-grid-container div\n *          filled with <ContentGridCard> elements\n */\nclass ContentGrid extends React.Component {\n    render(){\n        return (\n            <Fragment>\n                {this.props.searchPhrase && this.props.searchPhrase !== '' ? <h4 className=\"text-center\" style={{ fontWeight: 'bold' }}>Searching for: '{this.props.searchPhrase}'</h4> : null}\n                <div className=\"content-grid-container\" id='content-grid-container'>\n                    {this.props.content}\n                </div>\n            </Fragment> \n        )\n    } \n}\n\nexport default ContentGrid;","export default __webpack_public_path__ + \"static/media/close-round-btn.29b488b4.svg\";","export default __webpack_public_path__ + \"static/media/bookmark_svg.c0f24e3e.svg\";","export default __webpack_public_path__ + \"static/media/star_svg.b5330ee3.svg\";","import React, {Fragment} from \"react\";\nimport { Link } from 'react-router-dom'\nimport \"./SearchPopup.css\";\nimport closeBtnIcon from \"../../images/close-round-btn.svg\";\nimport bookmarkIcon from \"../../images/bookmark_svg.svg\";\nimport starIcon from \"../../images/star_svg.svg\";\n\nconst PopupRating = ({number, icon, userHasDone}) => {\n    return(\n        <Fragment>\n            <div className=\"popup-rating-container\" style={{ filter: userHasDone? 'none' : 'brightness(0)' }} >\n                <div className=\"popup-number\" style={{fontWeight: 'bold', fontSize: '1.5em'}}>{number}</div>\n                <img className=\"popup-rating-icon\" src={icon} alt=\"Rating icon\" ></img>\n            </div>\n        </Fragment>\n    )\n}\n\nconst PopupInstructionStep = ({stepNumber, stepText}) => {\n    return(\n        <Fragment>\n            <div className=\"popup-step-container\">\n                <div style={{fontWeight: 'bold'}}>Step {stepNumber}</div>\n                <div>{stepText}</div>\n            </div>\n        </Fragment>\n    )\n}\n\nconst PopupIngredient = ({ingredientName, quantity}) => {\n    return(\n        <Fragment>\n            <div className=\"popup-ingredient-item-container\">\n                <div className=\"popup-ingredient-name\">{ingredientName}</div>\n                <div className=\"popup-ingredient-quantity\">{quantity}</div>\n            </div>\n        </Fragment>\n    )\n}\n\nconst PopupTag = ({tagText}) => {\n    return(\n        <Fragment>\n            <div className=\"popup-tag\">{tagText}</div>\n        </Fragment>\n    )\n}\n\nconst IngredientList = ({title, items}) => {\n    return(\n        <div style={{marginBottom: '20px'}}>\n            <div style={{fontWeight: 'bold'}}>{title}</div>\n            {items}\n        </div>\n    )\n}\n\nconst SearchPopupContent = ({callback, data}) => {\n\n    // prepare tags for display, extracting the text\n    let tags = [];\n    data.tags.forEach(t => {\n        tags.push(<PopupTag tagText={t} key={t}/>);\n    });\n\n    // format the image path for the main image of the popup\n    let imagePath = data.image;\n    if(imagePath && imagePath !== '/') ['/'].concat(imagePath);\n\n    return (\n        <Fragment>\n            <img className=\"popup-close-btn\" src={closeBtnIcon} onClick={callback} alt=\"Close button\"></img>\n            <img className=\"search-popup-img\" src={data.image} alt={data.title} />\n            <div className=\"popup-body\">\n                <div className=\"popup-header-container\">\n                    <div className=\"popup-title-and-username-container\">\n                        <h1 className=\"popup-title\">{data.title}</h1>\n                        <Link className=\"popup-username\" to={`users/${data.author}`}>@{data.author}</Link>\n                    </div>\n                    <div className=\"popup-rating-and-bookmark-container\">\n                        <PopupRating number={data.bookmarks} icon={bookmarkIcon} userHasDone={data.bookmarked} />\n                        <PopupRating number={data.stars} icon={starIcon} userHasDone={data.rated !== 0 ? true : false} />\n                    </div>\n                </div>\n\n                <div className=\"popup-tags-container\">{tags}</div>\n\n                <div className=\"ingredients-instructions-container\">\n                    <div className=\"ingredients-container\">\n                        {data.ingredients}\n                    </div>\n                    <div className=\"instructions-container\">\n                        <div style={{fontWeight: 'bold'}}>Instructions</div>\n                        <div>{data.instructions}</div>\n                    </div>\n                </div>\n                <Link className=\"popup-more-btn\" to={`/recipes/${data.id}`}>More</Link>             \n                </div>\n        </Fragment>\n    )\n}\n\nclass SearchPopup extends React.Component {\n\n    constructor(){\n        super();\n\n        this.state = {\n            title: '',\n            author: '',\n            tags: [],\n            id: ''\n        };\n    }\n\n    updateData(id){\n        // do not update if would be fetching data that we already have\n        if(this.state.id === id) return;\n\n        // fetch the data for this specific recipe\n        fetch(`/recipes/${id}`, {method: 'GET', credentials: 'include'})\n       .then(res => res.json())\n       .then(data => {\n            data.main = data.main.replace(/\\\\\\\\/g, '\\\\');\n\n            // extract tags\n            let tags = [];\n            data.tags.forEach(element => {\n                tags.push(element.name);\n            });\n\n            // ensure we do not get a [null]\n            if(tags[0] === null) tags = [];\n\n            // extract and format ingredient groups\n            let dataGroups = [];\n            Object.keys(data.groups).forEach(key => {\n                dataGroups.push({\n                    name: key === 'Default' ? 'Ingredients' : key,\n                    ingredients: data.groups[key]\n                });\n            });\n\n            // build both the individual popup ingredient items and their containers\n            let ingredientGroups =[];\n            dataGroups.forEach(group => {\n                let ingredients = [];\n                group.ingredients.forEach(ingredient => {\n                    ingredients.push(<PopupIngredient ingredientName={ingredient.ingredient} quantity={ingredient.amount} key={`ingredient-${ingredient.ingredient}`}/>);\n                });\n                ingredientGroups.push(<IngredientList title={group.name} items={ingredients} key={`group-${group.name}`}/>);\n            })\n\n            let instructions = [];\n            data.instructions.forEach(step => {\n                instructions.push(<PopupInstructionStep stepNumber={step.step} stepText={step.instruction} key={`instruction-${step.step}`}/>);\n            });\n\n            // only show the first two steps of instructions and ingredients to keep the popup small\n            if(instructions.length > 2) instructions.length = 2\n            if(ingredientGroups.length > 2) ingredientGroups.length = 2\n\n            this.setState({       \n                title: data.title,\n                author: data.author,\n                \n                bookmarks: data.bookmarks,\n                bookmarked: (Number(data.isBookmarked) === 1 ? true : false),\n                stars: Number(data.avgRating),\n                rated: Number(data.isRated),\n         \n                // format the image in case the path is not a subpath of Public directory\n                image: `/${data.main.replace(/\\\\/g, '/').replace('../client/public/', '')}`, \n                tags: tags,\n                ingredients: ingredientGroups,\n                instructions: instructions,\n                id: id\n            });\n       });\n    }\n\n    render() {\n        // control whether the popup should be display based on ContentSearch passed prop\n        let display = this.props.display ? 'inline' : 'none';\n        let callback = () => this.props.closeCallback();\n\n        return (\n            <Fragment>\n                <div className=\"search-popup-container-bg\"\n                    id='search-popup-container-bg'\n                    style={{ display: display }}\n                    onClick={callback}      \n                >\n                   <div className=\"search-popup-container\" style={{ display: display }} onClick={e => e.stopPropagation()}>\n                        <SearchPopupContent callback={callback} data={this.state}/>      \n                    </div> \n                </div>\n            </Fragment>\n        );\n    }\n}\n\nexport default SearchPopup;\n","import React, { Fragment } from \"react\";\nimport PropTypes from 'prop-types';\n\nimport \"./ContentGridCard.css\";\n\n/**\n * Component for rendering a single content grid card that has a recipe image and the title on it.\n * @param   {string}    title    Recipe title to be displayed on the content grid card in string format\n * @param   {string}    img    Image path to the image to be shown on the content grid card in string format\n * @param   {function}    cardCallback  A callback function to be executed when the user clicks on a content\n *                                      grid card\n * @param   {string}    id    Recipe id of the recipe in string format\n * @returns A <Fragment> element with a .content-grid-card-container div containing a recipe image <img> element\n *          and a div containing the recipe title inside it.\n */\nconst ContentGridCard = ({ title, img, cardCallback, id }) => {\n    return (\n       <Fragment>\n            <div className=\"content-grid-card-container\" onClick={() => cardCallback(id)}>\n                <img className=\"content-grid-card-img\" src={img.replace(/\\\\/g, '/').replace('../client/public/', '')} alt={title} />\n                <div className=\"content-grid-card-title\">{title}</div>\n            </div>\n      </Fragment>\n    )\n}\n\nContentGridCard.propTypes = {\n    title: PropTypes.string.isRequired,\n    img: PropTypes.string.isRequired\n}\n\nexport default ContentGridCard;","import React, { Fragment } from \"react\";\nimport \"./ContentSearch.css\";\n\nimport FilteringMenu from \"../FilterMenu/FilterMenu\"\nimport ContentGrid from \"../ContentGrid/ContentGrid\";\nimport SearchPopup from \"../SearchPopup/SearchPopup\";\nimport ContentGridCard from \"../ContentGridCard/ContentGridCard\";\n\n/**\n * Component containing the recipe grid (ContentGrid), the recipe popup (SearchPopup) and the filtering menu (FilteringMenu).\n */\nclass ContentSearch extends React.Component {\n    constructor(){\n        super();\n\n        this.state = {\n            recipeCards: [],\n            popupDisplay: false, // modifying display directly, but still need to keep track of state here\n            scrollbarWidth: 0, // stashed value\n            overflow: '',\n            display: 'none', // modify display when building cards to not show empty items while data is being loaded\n            searchPhrase: ''\n        }\n\n        this.popup = React.createRef();\n\n        this.popupToggleHandler = this.popupToggleHandler.bind(this);\n        this.filteringHandler = this.filteringHandler.bind(this);\n        this.handleResize = this.handleResize.bind(this);\n        this.buildCards = this.buildCards.bind(this);\n    }\n\n    handleResize() {\n        let gridContainer = document.getElementById('grid-container');\n        let popup = document.getElementById('search-popup-container-bg');\n\n        // position the popup to start at the top left corner of the grid\n        if(gridContainer && popup) {\n            let rect = document.getElementById('grid-container').getBoundingClientRect();\n            \n            popup.style.left = `${rect.left}px`;  \n            popup.style.width = `${rect.width + this.state.scrollbarWidth}px`; \n        }  \n    }\n\n    popupToggleHandler(id){ \n        let gridContainer = document.getElementById('grid-container');\n        let navbar = document.getElementById('main-navbar');\n        let popup = document.getElementById('search-popup-container-bg');\n\n        if (!gridContainer || !navbar || !popup) return;\n\n        let rect = gridContainer.getBoundingClientRect();\n        let scrollbarWidth = window.innerWidth - document.documentElement.clientWidth;\n\n        if(!this.state.popupDisplay){\n            this.setState({ overflow: document.body.style.overflowY });\n            // hide the body scrollbar and preserve offset of elements due to scrollbar being removed\n            document.body.style.overflowY = 'hidden';  \n            document.body.style.paddingRight = `${scrollbarWidth}px`;\n            navbar.style.marginRight = `${scrollbarWidth}px`;  \n\n            // position and display the popup, it will add a new scrollbar that will take the place of the old one\n            popup.style.left = `${rect.left}px`;  \n            popup.style.width = `${rect.width + scrollbarWidth}px`;  \n            popup.style.display = 'inline';\n\n            gridContainer.scrollTop = 0;\n\n            this.popup.current.updateData(id);\n        } else { // return to default state      \n            document.body.style.overflowY = this.state.overflow;\n            document.body.style.paddingRight = '0px';\n            navbar.style.marginRight = '0px'; \n            popup.style.display = 'none';\n        }\n\n        this.setState({\n            popupDisplay: !this.state.popupDisplay,\n            scrollbarWidth: scrollbarWidth\n        });\n    }\n\n    filteringHandler(filters) {\n        // base url to build upon\n        let url = '/recipes?';\n\n        // search phrase is included in filters\n        if (filters.searchPhrase) {\n            this.setState({ searchPhrase: filters.searchPhrase });\n        } \n        // new search phrase not included but previous search had a search phrase (= filtering search phrase results)\n        // so include it in the filters\n        else if (!filters.searchPhrase && this.state.searchPhrase !== '') {\n            url = url.concat(`searchPhrase=${this.state.searchPhrase}&`);\n        }\n\n        // add filter values to the url\n        Object.keys(filters).forEach(key => {\n            // add non-array format filters that aren't placeholder values\n            if (!Array.isArray(filters[key]) && filters[key] !== \"placeholder\") {\n                url = url.concat(`${key}=${filters[key]}&`);\n            } \n            // add array format filters\n            else if (Array.isArray(filters[key]) && filters[key].length > 0) {\n                let values = '';\n                filters[key].forEach(value => values = values.concat(`%22${value.toLowerCase()}%22,`));\n                values = values.slice(0, -1);\n                url = url.concat(`${key}=[${values}]&`);\n            }\n        });\n\n        // get rid of the last '&' and replace spaces with '+'\n        url = url.slice(0, -1).replace(' ', '+');\n\n        // get recipes with filters\n        fetch(url, {\n          method: 'GET',\n        })\n        .then(response => {\n            if (response.ok) {\n            return response.json();\n            }\n            throw new Error('Something went wrong...');\n        })\n        .then(recipes => {\n            this.buildCards(recipes);\n        })\n        .catch((error) => {\n            console.error(error);\n        });\n\n        document.body.scrollTop = 0;\n        document.documentElement.scrollTop = 0;\n    }\n\n    buildCards(data){\n        this.setState({\n            display: 'none'\n        }, () => {\n            let recipeCards = [];\n\n            data.forEach((recipe) => {\n                recipeCards.push(<ContentGridCard title={recipe.title} img={recipe.mainimage} key={recipe.recipeid} cardCallback={this.popupToggleHandler} id={recipe.recipeid}/>);\n            });\n\n            this.setState({\n                recipeCards: recipeCards,\n                display: 'flex'\n            });\n        });   \n    }\n\n    componentDidMount(){\n        window.addEventListener('resize', () => this.handleResize());\n       \n        // ResizeObserver should be supported by all major browsers, we need this to work with the filtering menu collapsing\n        let gridResizeObserver = new ResizeObserver(() => this.handleResize());\n        gridResizeObserver.observe(document.getElementById('grid-container'));\n\n        //initial data, fetching with no filters\n        fetch('/recipes', { method: 'GET' }).then(res => res.json()).then(res => { this.buildCards(res); });\n    }\n\n    render(){\n        return (\n            <Fragment>\n                <div className=\"container-fluid container-flex\" style={{display: this.state.display}}>\n                    <FilteringMenu filteringCallback={this.filteringHandler} filterSearch={this.props.filterSearch}/>\n\n                    <div className=\"content-search-grid-container\" id='grid-container'>\n                        <SearchPopup display={this.state.popupDisplay} closeCallback={this.popupToggleHandler} ref={this.popup}/>\n                        <ContentGrid content={this.state.recipeCards} searchPhrase={this.state.searchPhrase} />\n                    </div>        \n                </div>\n            </Fragment>\n        );\n    }\n}\n\nexport default ContentSearch;\n","import React, { Fragment } from \"react\";\nimport { withRouter } from 'react-router-dom';\nimport \"./App.css\";\n\n//components\nimport NavigationBar from \"./components/NavBar/NavBar\";\nimport ContentSearch from \"./components/ContentSearch/ContentSearch\";\n\nclass App extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      searchTerm: \"\",\n    }\n\n    this.contentSearch = React.createRef();\n    this.filterSearch = React.createRef();\n  }\n\n  componentDidMount() {\n    if (this.props.location.state && this.props.location.state.searchTerm) {\n      let filter = { searchPhrase: this.props.location.state.searchTerm };\n      this.contentSearch.current.filteringHandler(filter);\n      this.setState({ searchTerm: this.props.location.state.searchTerm })\n      this.props.history.replace({'pathname': '/browse', state: {}})\n    }\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <NavigationBar contentSearch={this.contentSearch} filterSearch={this.filterSearch}/>\n        <ContentSearch ref={this.contentSearch} filterSearch={this.filterSearch}/>\n      </Fragment>\n    );\n  }\n}\n\nexport default withRouter(App);\n","import React, { Fragment } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport \"./LoginForm.css\";\n\n/**\n * Component used for validating user's username input.\n * @param {string} value  Value entered in the username field \n * @returns An error message in string format if value doesn't validate, null otherwise.\n */\nconst usernameValidation = (value) => {\n  if (value.trim().length < 1) {\n    return \"You must input a username\";\n  }\n  return null;\n};\n\n/**\n * Component used for validating user's password input.\n * @param {string} value  Value entered in the password field \n * @returns An error message in string format if value doesn't validate, null otherwise.\n */\nconst passwordValidation = (value) => {\n  if (value.trim().length < 1) {\n    return \"You must input a password\";\n  }\n  return null;\n};\n\n/**\n * Component for rendering a list of errors to the user.\n * @param {Array} errors An array of errors to be shown\n * @returns A <Fragment> element with a red alert div that contains the errors in a list inside it.\n */\nconst ErrorAlert = ({ errors }) => {\n  return (\n    <Fragment>\n      <div className=\"m-2\" role=\"alert\">\n        <ul className=\"list-group\">\n          {errors.map( (error, idx) => <li className=\"list-group-item list-group-item-danger\" key={idx}>{error}</li>)}\n        </ul>\n      </div>\n    </Fragment>\n  );\n}\n\n/**\n * Component for rendering a login form. Renders a green alert telling the user an account has been created \n * if the user has been redirected from '/registration' after a succesful account creation. Renders red alerts\n * under the login header if there are errors with inputs when submitted.\n */\nclass LoginForm extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      username: \"\",\n      password: \"\",\n      errors: [],\n      redirect: false\n    }\n\n    this.handleInputChange = this.handleInputChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleInputChange(e) {\n    this.setState({\n        [e.target.name]: e.target.value\n    });\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n\n    // validate inputs\n    let errors = [];\n    let usernameVal = usernameValidation(this.state.username);\n    let passwordVal = passwordValidation(this.state.password);\n    if (usernameVal) errors.push(usernameVal);\n    if (passwordVal) errors.push(passwordVal);\n\n    this.setState({\n      errors: errors\n    })\n\n    // check if all input was validated\n    if (errors.length === 0) {\n      // inputs OK, sending data to server\n      const user = { username: this.state.username, password: this.state.password };\n      fetch('/login', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            credentials: 'include',\n            body: JSON.stringify(user),\n        })\n        .then(response => { \n            if (response.ok) { \n              // login OK\n              let userData = {\n                username: this.state.username,\n              }\n              window.localStorage.setItem('user', JSON.stringify(userData))\n              this.setState({ redirect: true });\n              return response;\n            }\n            throw new Error('Something went wrong...');\n        })\n        .catch((error) => {\n            // login failed\n            console.error(error);\n            errors.push(\"Incorrect username and/or password\");\n            this.setState({ errors: errors });\n        }\n      );\n    }\n  }\n\n  render() {\n    const windowUrl = window.location.search;\n    const params = new URLSearchParams(windowUrl);\n    return (\n      <Fragment>\n        { this.state.redirect ? <Redirect push to=\"/browse\"/> : null }\n        <div className=\"login-container\">\n          <form onSubmit={this.handleSubmit}>\n              <h1>Log in</h1>\n              {params.get(\"regRedirect\") ? <div className=\"alert alert-success\" role=\"alert\">Your account has been succesfully created.<br /> You can now log in using the form below.</div> : null}\n              {this.state.errors.length > 0 ? <ErrorAlert errors={this.state.errors} /> : null}\n              <div className=\"form-group\">\n                <label htmlFor=\"loginUsernameInput\"><h5>Username</h5></label>\n                <div className=\"input-group mb-3\">\n                    <span className=\"input-group-text\" id=\"basic-addon1\">@</span>\n                    <input type=\"text\" className=\"form-control\" id=\"loginUsernameInput\" \n                            placeholder=\"Username\" aria-label=\"Username\" aria-describedby=\"basic-addon1\" \n                            name=\"username\" value={this.state.username} onChange={this.handleInputChange} required />\n                </div>\n              </div>\n              <div className=\"form-group\">\n                  <label htmlFor=\"loginPasswordInput\"><h5>Password</h5></label>\n                  <input type=\"password\" className=\"form-control\" id=\"loginPasswordInput\" placeholder=\"Password\" \n                          name=\"password\" value={this.state.password} onChange={this.handleInputChange} required />\n              </div>\n              <button type=\"submit\" className=\"btn btn-primary btn-custom mt-3\">Submit</button>\n          </form>\n          <div className=\"login-tip\">\n            <span>Haven't registered yet?</span><br />\n            <a href=\"/registration\">Register</a>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n};\n\nexport default LoginForm;","import React, { Fragment } from \"react\";\n\n//components\nimport NavigationBar from \"../components/NavBar/NavBar\";\nimport LoginForm from \"../components/LoginForm/LoginForm\";\n\nconst Login = () => {\n  return (\n    <Fragment>\n      <NavigationBar />\n      <div className=\"container-fluid\">\n        <LoginForm />\n      </div>\n    </Fragment>\n  );\n}\n\nexport default Login;","import React, { Fragment } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport \"./RegistrationForm.css\";\n\n/**\n * Component used for validating user's username input.\n * @param {string} value  Value entered in the username field \n * @returns An error message in string format if value doesn't validate, null otherwise.\n */\nconst usernameValidation = (value) => {\n    if (value.trim().length < 1) {\n        return \"Username is required\";\n    } \n    if (value.trim().length < 2) {\n        return \"Username has to contain at least 2 characters\";\n    }\n    if (value.trim().length > 32) {\n        return \"Username has to contain less than 32 characters\";\n    }\n    return null;\n};\n\n/**\n * Component used for validating user's password input.\n * @param {string} value  Value entered in the password field \n * @returns An error message in string format if value doesn't validate, null otherwise.\n */\nconst passwordValidation = (value) => {\n    if (value.trim().length < 1) {\n        return \"Password is required\";\n    } \n    if (value.trim().length < 8) {\n        return \"Password has to contain at least 8 characters\";\n    }\n    return null;\n};\n\n/**\n * Component used for validating that the user's password inputs match.\n * @param {string} firstValue  Value entered in the first password field \n * @param {string} secondValue  Value entered in the second password field \n * @returns An error message in string format if values don't validate, null otherwise.\n */\n const passwordsMatchValidation = (firstValue, secondValue) => {\n    if (firstValue !== secondValue) {\n        return \"Entered passwords must match\";\n    } \n    return null;\n};\n\n/**\n * Component for rendering a list of errors to the user.\n * @param {Array} errors An array of errors to be shown\n * @returns A <Fragment> element with a red alert div that contains the errors in a list inside it.\n */\nconst ErrorAlert = ({ errors }) => {\n    return (\n        <Fragment>\n            <div className=\"m-2\" role=\"alert\">\n                <ul className=\"list-group\">\n                    {errors.map( (error, idx) => <li className=\"list-group-item list-group-item-danger\" key={idx}>{error}</li>)}\n                </ul>\n            </div>\n        </Fragment>\n    );\n}\n\n/**\n * Component for rendering a registration form. Renders red alerts under the registration \n * header if there are errors with inputs when submitted.\n */\nclass RegistrationForm extends React.Component {\n    constructor() {\n        super();\n\n        this.state = {\n            username: \"\",\n            password: \"\",\n            passwordRepeat: \"\",\n            errors: [],\n            redirect: false\n        }\n\n        this.handleInputChange = this.handleInputChange.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n    }\n\n    handleInputChange(e) {\n        this.setState({\n            [e.target.name]: e.target.value\n        });\n    }\n\n    handleSubmit(e) {\n        e.preventDefault();\n\n        let redirect = false;\n\n        // validate inputs\n        let errors = [];\n        let usernameVal = usernameValidation(this.state.username);\n        let passwordVal = passwordValidation(this.state.password);\n        let passwordsMatchVal = passwordsMatchValidation(this.state.password, this.state.passwordRepeat);\n        if (usernameVal) errors.push(usernameVal);\n        if (passwordVal) errors.push(passwordVal);\n        if (passwordsMatchVal) errors.push(passwordsMatchVal);\n\n        this.setState({\n            errors: errors\n        })\n\n        // check if all input was validated\n        if (errors.length === 0) {\n            // inputs OK, sending data to server\n            const user = { username: this.state.username, password: this.state.password };\n            \n            fetch('/register', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify(user),\n            })\n            .then(response => { \n                if (response.ok) { \n                    // registration OK, set to redirect to '/login'\n                    redirect = true;\n                    this.setState({ redirect: redirect });\n                    return response;\n                }\n                throw new Error('Something went wrong...');\n            })\n            .catch((error) => {\n                // registration failed\n                console.error(error);\n                errors.push(\"Can't create an account with these credentials\");\n                this.setState({ errors: errors });\n            });\n        }\n    }\n\n    render() {\n        return (\n            <Fragment>\n                {this.state.redirect ? <Redirect push to=\"/login?regRedirect=true\" /> : null}\n                <div className=\"registration-container\">\n                    <form onSubmit={this.handleSubmit}>\n                        <h1>Register</h1>\n                        {this.state.errors.length > 0 ? <ErrorAlert errors={this.state.errors} /> : null}\n                        <div className=\"form-group\">\n                            <label htmlFor=\"registrationUsernameInput\"><h5>Username</h5></label>\n                            <div className=\"input-group\">\n                                <span className=\"input-group-text\" id=\"registration-basic-addon1\">@</span>\n                                <input type=\"text\" className=\"form-control\" id=\"registrationUsernameInput\" \n                                        placeholder=\"Enter a username...\" aria-label=\"Username\" aria-describedby=\"registration-basic-addon1 usernameHelp\" \n                                        name=\"username\" value={this.state.username} onChange={this.handleInputChange} \n                                        minLength=\"2\" maxLength=\"32\" required />\n                            </div>\n                            <small id=\"usernameHelp\" className=\"form-text text-muted\">The username should be between 2-32 characters in length.</small>\n                        </div>\n                        <div className=\"form-group\">\n                            <label htmlFor=\"registrationPasswordInput\"><h5>Password</h5></label>\n                            <input type=\"password\" className=\"form-control\" id=\"registrationPasswordInput\" aria-describedby=\"passwordHelp\" \n                                    placeholder=\"Enter a password...\" name=\"password\" value={this.state.password} onChange={this.handleInputChange} \n                                    minLength=\"8\" required />\n                            <small id=\"passwordHelp\" className=\"form-text text-muted\">The password should be at least 8 characters in length.</small>\n                            <input type=\"password\" className=\"form-control\" id=\"registrationPasswordInput2\" aria-describedby=\"passwordHelp2\" \n                                    placeholder=\"Enter the above password again...\" name=\"passwordRepeat\" value={this.state.passwordRepeat} onChange={this.handleInputChange} \n                                    minLength=\"8\" required />\n                            <small id=\"passwordHelp2\" className=\"form-text text-muted\">Enter the same password you entered to the last field.</small>\n                        </div>\n                        <button type=\"submit\" className=\"btn btn-primary btn-custom mt-3\">Submit</button>\n                    </form>\n                    <div className=\"registration-tip\">\n                        <span>Already registered?</span><br />\n                        <a href=\"/login\">Login</a>\n                    </div>\n                </div>\n            </Fragment>\n        );\n    }\n};\n\nexport default RegistrationForm;","import React, { Fragment } from \"react\";\n\n//components\nimport NavigationBar from \"../components/NavBar/NavBar\";\nimport RegistrationForm from \"../components/RegistrationForm/RegistrationForm\";\n\nconst Registration = () => {\n  return (\n    <Fragment>\n      <NavigationBar />\n      <div className=\"container-fluid\">\n        <RegistrationForm />\n      </div>\n    </Fragment>\n  );\n}\n\nexport default Registration;","import React, { Fragment } from \"react\";\nimport { withRouter } from 'react-router-dom';\n\n//components\nimport NavigationBar from \"../components/NavBar/NavBar\";\nimport ContentGridCard from \"../components/ContentGridCard/ContentGridCard\";\n\nclass About extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      recipes: []\n    }\n\n    this.handleSettingRecipeData = this.handleSettingRecipeData.bind(this);\n    this.handleRedirect = this.handleRedirect.bind(this);\n  }\n\n  handleSettingRecipeData(recipes) {\n    this.setState({ recipes: recipes });\n  }\n\n  componentDidMount() {\n    // fetch some recommended recipes\n    fetch(`/recommendations`, {\n                method: 'GET',\n                credentials: 'include',\n            })\n            .then(result => {\n              if (result.ok) {\n                return result.json();\n              }\n              throw new Error('Something went wrong...');\n            })\n            .then(recipes => this.handleSettingRecipeData(recipes))\n            .catch(error => console.error(error)\n        );\n  }\n\n  handleRedirect(destination) {\n    let url = `/recipes/${destination}`;\n    this.props.history.push(url);\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <NavigationBar />\n        <div className=\"container-fluid\">\n          <div className=\"container pt-3 pb-5\" style={{width: \"60%\", minWidth: \"22rem\" }}>\n              <h1 className=\"text-center\">Welcome to Recipe Sharing</h1>\n              <div style={{textAlign: \"justify\"}}>\n                <h5 className=\"text-center\" style={{fontWeight: \"bold\"}}>What is recipe sharing?</h5>\n                <p>Our web service aims to be a streamlined and easy-to-use recipe sharing and discovery platform where people \n                  can share their recipes with each other. Anyone can browse and search for recipes posted on the web service. \n                  We also offer filters for things like included and excluded recipes to facilitate finding recipes that are just \n                  perfect for your allergies and/or pantry situation.\n                </p>\n                <p>Our design philosophy for creating this website was to create a web service with large pictues showcasing the\n                  creations of our users matched with warm colors and accessible fonts to make it easier for all kinds of people \n                  to use. We hope you enjoy using our web service as much as we enjoyed creating it!\n                </p>\n              </div>\n              <div style={{textAlign: \"justify\"}}>\n                <h5 className=\"text-center\" style={{fontWeight: \"bold\"}}>Do I need to register for an account? What more can I do with an account?</h5>\n                <p>Adding new recipes to the web service is limited to registered users only. If you only want to look at the\n                  recipes posted by other people, you don't need to feel pressure to register! However, registered users can also \n                  bookmark and rate recipes and easily access those recipes later from their account page if they so wish.\n                </p>\n              </div>\n              <div style={{textAlign: \"justify\"}}>\n                <h5 className=\"text-center\" style={{fontWeight: \"bold\"}}>How do I get started?</h5>\n                <p>You can start searching for recipes by first either entering a search term into the search bar or start by \n                  going to the browse page and browsing. Both your search results and all the recipes shown on the browse page can be\n                  filtered by opening up the filtering menu on those pages. Just press the 'Filter' button or icon on the navigation \n                  bar when you're on those pages and voilà! If you want to close the filtering menu, just press the filtering button\n                  or icon again and it's gone &#8212; your filtering results will still be there.\n                </p>\n              </div>\n              <div className=\"text-center mt-4\">\n                <a href=\"/browse\" \n                  style={{ \n                    fontWeight: 'bold', \n                    backgroundColor: '#DF7861', \n                    textDecoration: 'none',\n                    padding: '0.5rem 6rem', \n                    fontSize: 'large',\n                    color: '#FFFFFF',\n                    borderRadius: '5px',\n                  }}\n                >Start browsing</a>\n                <div className=\"mt-5\">\n                  <h5 className=\"text-center mb-3\" style={{fontWeight: \"bold\"}}>Need some recommendations to get started?</h5>\n                  <div className=\"container-flex\" style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(240px, 1fr))', gridGap: '15px' }}>\n                    {this.state.recipes.map(recipe => \n                      <ContentGridCard  title={recipe.title} img={recipe.mainimage} \n                                        cardCallback={() => { this.handleRedirect(recipe.recipeid); } } id={recipe.recipeid} \n                                        key={recipe.recipeid} />\n                    )}\n                  </div>\n                </div>\n              </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default withRouter(About);","export default __webpack_public_path__ + \"static/media/edit-icon.8a69dfb0.svg\";","export default __webpack_public_path__ + \"static/media/upload-icon.fc19e7ce.svg\";","import React, { Fragment } from \"react\";\nimport PropTypes from 'prop-types';\nimport \"./UserHeader.css\";\nimport editIcons from '../../images/edit-icon.svg'\nimport uploadIcon from '../../images/upload-icon.svg'\n\n/**\n * Component for rendering user info in the user header. The component either shows the current\n * user data or the user can choose to edit the data if its their own user page.\n * @param {String} username The username of the user\n * @param {String} icon A path to the user's icon image\n * @param {String} bio A string containing the user's bio\n * @param {Function} updateBio A callback function to fetch an updated user bio\n * @returns A <Fragment> element with a .user-info-container div inside it.\n */\nclass UserInfo extends React.Component {\n  constructor(){\n    super();\n\n    this.state = {\n      editing: false,\n      editBio: '',\n      file: null\n    };\n\n    this.handleEditingChange = this.handleEditingChange.bind(this);\n    this.handleEditingBioText = this.handleEditingBioText.bind(this);\n    this.handleSendingBio = this.handleSendingBio.bind(this);\n    this.handleFileChange = this.handleFileChange.bind(this);\n  }\n\n  handleEditingChange() {\n    this.setState({\n      editing: !this.state.editing,\n      editBio: this.props.bio\n    });\n  }\n\n  handleEditingBioText(event) {\n    this.setState({\n      editBio: event.target.value\n    });\n  }\n\n  handleSendingBio() {\n    let formData = new FormData();\n\n    formData.append('bio', this.state.editBio);\n    formData.append('image', this.state.file);\n  \n    // send the new user bio and image to the server\n    fetch('/userdata', {\n        method: 'PUT',\n        credentials: 'include',\n        body: formData,\n    })\n    .then(response => {\n      if (response.ok) {\n        \n        this.setState({\n          editing: false\n        });\n\n        // after new data is sent, update the bio to fetch the sent image and bio text to keep correct state with the server\n        this.props.updateBio(this.state.editBio);\n\n        return response; \n      }\n      throw new Error('Something went wrong...');\n    })\n    .catch((error) => {\n        console.error(error);\n    });\n  }\n\n  handleFileChange(e) {\n    this.setState({ file: e.target.files[0] });\n  }\n\n  render(){\n    // check if locked in - used to display the bio editing option for users on their own user pages\n    let loggedIn = false;\n    if(window.localStorage.getItem('user') !== null )\n      loggedIn = JSON.parse(window.localStorage.getItem('user')).username === this.props.username;\n\n    return (\n      <Fragment>\n        <div className=\"user-info-container\">\n          {\n            !this.state.editing ?\n              <img className=\"user-icon\" src={`/${this.props.icon.replace(/\\\\/g, '/').replace('../client/public/', '')}`} alt=\"User icon\"/>\n            :\n              <Fragment>\n              <input  type=\"file\" className=\"form-control-file\" id=\"pfp-input\" accept=\"image/*\" style={{display: 'none'}} onChange={this.handleFileChange} required />\n              <div className=\"upload-icon-container\"  onClick={() => { document.getElementById('pfp-input').click(); }}>\n                <img className=\"upload-icon\" src={uploadIcon} alt=\"upload icon\" />\n              </div>\n              </Fragment>\n          }\n          <div className=\"user-info-text\">\n            <div className='bio-header-container'>\n              <h5 style={{margin: '0px'}}>{this.props.username}</h5>\n              {loggedIn ? <img src={editIcons} className='edit-icon' onClick={this.handleEditingChange} alt=\"Edit icon\" /> : null}\n            </div>\n            {\n              this.state.editing ?\n              <Fragment>\n                <textarea id=\"bio-textarea\" name=\"bio-textarea\" placeholder=\"\" onChange={(e) => this.handleEditingBioText(e)} value={this.state.editBio}></textarea>\n                <button className='bio-submit-button' onClick={this.handleSendingBio}>Submit</button>\n              </Fragment>\n              :\n              <div className=\"user-info-description\">\n                  <p>{this.props.bio}</p>\n              </div>\n            }\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n};\n\n/**\n * Component for rendering a single user header tab button.\n * @param {String} text The text to be displayed on the tab button\n * @param {Boolean} active A boolean indicating whether the current tab button is the active one\n * @param {Function} handleClick A callback function for handling clicks\n * @param {String} id A ID for the tab button\n * @returns A <Fragment> element with a button inside it.\n */\nconst UserHeaderButton = ({ text, active, handleClick, id }) => {\n  return (\n    <Fragment>\n      <button className={`btn btn-primary btn-custom m-1 ${active === true ? \"active\" : \"\"}`} onClick={handleClick} id={id}>{text}</button>\n    </Fragment>\n  );\n};\n\nUserHeaderButton.propTypes = {\n  text: PropTypes.string.isRequired,\n  active: PropTypes.bool.isRequired,\n};\n\n/**\n * Component for rendering the recipe tab buttons on user page.\n * @param {Function} callback A callback function\n * @returns A <Fragment> element containing a .user-button-container div \n *          consisting of <UserHeaderButton> elements.\n */\nclass UserHeaderButtons extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      active: \"All\"\n    };\n\n    this.handleClick = this.handleClick.bind(this);\n  }\n\n  handleClick(e) {\n    // return the selected UserHeaderButton to control which set of recipes is displayed\n    this.props.callback(e.target.id)\n    this.setState({ active: e.target.outerText });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"user-button-container text-center\">\n          <UserHeaderButton text=\"All\" active={this.state.active === \"All\"} handleClick={this.handleClick} id={'All'}/>\n          <UserHeaderButton text=\"Reviewed\" active={this.state.active === \"Reviewed\"} handleClick={this.handleClick} id={'Reviewed'}/>\n          <UserHeaderButton text=\"Saved\" active={this.state.active === \"Saved\"} handleClick={this.handleClick} id={'Saved'}/>\n          <UserHeaderButton text=\"Uploaded\" active={this.state.active === \"Uploaded\"} handleClick={this.handleClick} id={'Uploaded'}/>\n        </div>\n      </Fragment>\n    );\n  }    \n};\n\n/**\n * Component for rendering the user header.\n * @param {Object} data Object containing user data\n * @param {Function} callback A callback function\n * @param {Function} updateBio A callback function for new updated user bio fetching\n * @returns A <Fragment> element containing a .user-header-container div consisting of \n *          a <UserInfo> and <UserHeaderButtons> elements.\n */\nconst UserHeader = ({ data, callback, updateBio }) => {\n  return (\n    <Fragment>\n      <div className=\"user-header-container\" style={{marginBottom: '50px'}}>\n        <UserInfo username={data.username} icon={data.img} bio={data.bio} updateBio={updateBio}/>\n        <UserHeaderButtons callback={callback}/>\n      </div>\n    </Fragment>\n  );\n};\n\nexport default UserHeader;","import React, { Fragment } from \"react\";\nimport ContentGridCard from \"../components/ContentGridCard/ContentGridCard\";\nimport SearchPopup from \"../components/SearchPopup/SearchPopup\";\nimport NavigationBar from \"../components/NavBar/NavBar\";\nimport ContentGrid from \"../components/ContentGrid/ContentGrid\";\nimport UserHeader from \"../components/UserHeader/UserHeader\";\nimport {withRouter} from 'react-router-dom';\n\nclass User extends React.Component {\n  constructor(){\n    super();\n\n    this.state = {\n      popupDisplay: false,\n      scrollbarWidth: 0,\n      overflow: '',\n      display: 'none',\n      currentOption: 'all', // 0 - All, 1 - Reviewed, 2 - Saved, 3 - Uploaded\n      header : {\n        username: 'author',\n        bio: 'This user has no bio.',\n        img: '/images/user_placeholder_icon.svg'\n      },\n      recipes: {\n        all: [],\n        reviewed: [],\n        saved: [],\n        uploaded: []\n      }\n    }\n\n    this.popup = React.createRef();\n    \n    this.handleUserData = this.handleUserData.bind(this);\n    this.tabHandler = this.tabHandler.bind(this);\n    this.popupToggleHandler = this.popupToggleHandler.bind(this);\n    this.handleResize = this.handleResize.bind(this);\n    this.buildCards = this.buildCards.bind(this);\n    this.updateBio = this.updateBio.bind(this);\n  }\n\n  updateBio() {\n    // get the user bio information - profile picture and bio text\n    fetch(`/userdata/${this.state.header.username}`, {method: 'GET'})\n    .then(res => res.json())\n    .then(res => {\n      this.setState({\n        header : {\n          username: this.state.header.username,\n          bio: res.bio,\n          img: res.image\n        }\n      });\n    })\n    .catch(() => this.props.history.push('/browse')); \n  }\n\n  handleResize() {\n    let userPageBody = document.getElementById('userpage-body');\n    let popup = document.getElementById('search-popup-container-bg');\n\n    // position the popup to start at the top left corner of the site\n    if(userPageBody && popup) {\n        let rect = document.getElementById('userpage-body').getBoundingClientRect();\n        \n        popup.style.left = `${rect.left}px`;  \n        popup.style.width = `${rect.width + this.state.scrollbarWidth}px`; \n    }  \n}\n\n  tabHandler(tabID){\n    this.setState({\n      currentOption: tabID.toLowerCase()\n    });\n  }\n\n  popupToggleHandler(id){ \n    let userPageBody = document.getElementById('userpage-body');\n    let navbar = document.getElementById('main-navbar');\n    let popup = document.getElementById('search-popup-container-bg');\n\n    if (!userPageBody || !navbar || !popup) return;\n\n    let rect = userPageBody.getBoundingClientRect();\n    let scrollbarWidth = window.innerWidth - document.documentElement.clientWidth;\n\n    if(!this.state.popupDisplay){\n        this.setState({ overflow: document.body.style.overflowY });\n        // hide the body scrollbar and preserve offset of elements due to scrollbar being removed\n        document.body.style.overflowY = 'hidden';  \n        document.body.style.paddingRight = `${scrollbarWidth}px`;\n        navbar.style.marginRight = `${scrollbarWidth}px`;  \n\n        // position and display the popup, it will add a new scrollbar that will take the place of the old one\n        popup.style.left = `${rect.left}px`;  \n        popup.style.width = `${rect.width + scrollbarWidth}px`;  \n        popup.style.display = 'inline';\n\n        userPageBody.scrollTop = 0;\n\n        this.popup.current.updateData(id);\n    } else { // return to default state      \n        document.body.style.overflowY = this.state.overflow;\n        document.body.style.paddingRight = '0px';\n        navbar.style.marginRight = '0px'; \n        popup.style.display = 'none';\n    }\n\n    this.setState({\n        popupDisplay: !this.state.popupDisplay,\n        scrollbarWidth: scrollbarWidth\n    });\n  }\n\n  buildCards(data){\n    let ids = [];\n    let all = [];\n\n    // construct cards for the different tabs\n    // we use ids to track which of the cards we have already added to all\n    let reviewed = [];\n    data.recipes.reviewed.forEach((recipe) => {\n      reviewed.push(<ContentGridCard title={recipe.title} img={`/${recipe.mainimage}`} key={`reviewed-${recipe.recipeid}`} cardCallback={this.popupToggleHandler} id={recipe.recipeid}/>);\n      if(!ids.includes(recipe.recipeid)){\n        ids.push(recipe.recipeid);\n        all.push(<ContentGridCard title={recipe.title} img={`/${recipe.mainimage}`} key={`all-${recipe.recipeid}`} cardCallback={this.popupToggleHandler} id={recipe.recipeid}/>);\n      }\n    });\n\n    let saved = [];\n    data.recipes.saved.forEach((recipe) => {\n      saved.push(<ContentGridCard title={recipe.title} img={`/${recipe.mainimage}`} key={`saved-${recipe.recipeid}`} cardCallback={this.popupToggleHandler} id={recipe.recipeid}/>);\n      if(!ids.includes(recipe.recipeid)){\n        ids.push(recipe.recipeid);\n        all.push(<ContentGridCard title={recipe.title} img={`/${recipe.mainimage}`} key={`all-${recipe.recipeid}`} cardCallback={this.popupToggleHandler} id={recipe.recipeid}/>);\n      }\n    });\n\n    let uploaded = [];\n    data.recipes.uploaded.forEach((recipe) => {\n      uploaded.push(<ContentGridCard title={recipe.title} img={`/${recipe.mainimage}`} key={`uploaded-${recipe.recipeid}`} cardCallback={this.popupToggleHandler} id={recipe.recipeid}/>);\n      if(!ids.includes(recipe.recipeid)){\n        ids.push(recipe.recipeid);\n        all.push(<ContentGridCard title={recipe.title} img={`/${recipe.mainimage}`} key={`all-${recipe.recipeid}`} cardCallback={this.popupToggleHandler} id={recipe.recipeid}/>);\n      }\n    });\n\n    this.setState({\n      recipes: {\n        all: all,\n        reviewed: reviewed,\n        saved: saved,\n        uploaded: uploaded\n      }\n    });\n  }\n\n  handleUserData(data) {\n    this.setState({\n      header: {\n        username: this.props.match.params.username,\n        bio: data.headerData.bio,\n        img: data.headerData.image\n      }\n    }, () => {\n      this.buildCards(data);\n    })\n  }\n\n  componentDidMount() {\n    // resize the popup on window change or userpage component change\n    window.addEventListener('resize', () => this.handleResize());\n      \n    let userResizeObserver = new ResizeObserver(() => this.handleResize());\n    userResizeObserver.observe(document.getElementById('userpage-body'));\n\n    const username = this.props.match.params.username;\n\n    // get the user bio data when the page loads\n    fetch(`/user/${username}`, {method: 'GET'})\n    .then(res => res.json())\n    .then(res => this.handleUserData(res))\n    .catch(() => this.props.history.push('/browse'))\n  }\n\n  render(){\n    return (\n      <Fragment>\n        <NavigationBar />\n        <div className=\"container-fluid\" id='userpage-body'>\n          <div className=\"container pt-3\">        \n              <UserHeader data={this.state.header} callback={this.tabHandler} updateBio={this.updateBio}/>\n              <SearchPopup display={this.state.popupDisplay} closeCallback={this.popupToggleHandler} ref={this.popup}/>\n              <ContentGrid content={this.state.recipes[this.state.currentOption]}/>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default withRouter(User);","import React, { Fragment } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport PropTypes from 'prop-types';\nimport \"./RecipeForm.css\";\n\n/**\n * Component for displaying a red error box.\n * @param {Array} errors  List of errors to display \n * @returns A ul element inside a div that contains Bootstrap's styled .list-group-item-danger li elements.\n */\nconst ErrorAlert = ({ errors }) => {\n  return (\n      <Fragment>\n          <div className=\"m-2\" role=\"alert\" style={{ fontWeight: \"bold\" }}>\n              <ul className=\"list-group\">\n                  {errors.map( (error, idx) => <li className=\"list-group-item list-group-item-danger\" key={idx}>{error}</li>)}\n              </ul>\n          </div>\n      </Fragment>\n  );\n}\n\n/**\n * Component for displaying a header with the text 'Name of the dish' and an input field.\n * \n * @param {Function}  this.props.handleInputChange  Function that passes input changes to RecipeForm\n * @param {Array} this.props.errors Array of errors related to name input\n * \n * When the input field content is changed, handleInputChange(e) is called. The input field \n * name (='title') and its value are passed up to the RecipeForm component to be stored \n * in its state.\n */\nclass NameInput extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      errors: []\n    }\n\n    this.handleInputChange = this.handleInputChange.bind(this);\n  }\n\n  componentDidMount() {\n    this.setState({ errors: this.props.errors })\n  }\n\n  handleInputChange(e) {\n    this.props.handleInputChange(e.target.name, e.target.value.trim());\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"form-group recipe-element\">\n          <label htmlFor=\"recipeNameInput\"><h5>Name of the dish</h5></label>\n          {this.props.errors.length > 0 ? <ErrorAlert errors={this.props.errors} />: null}\n          <input  type=\"text\" className=\"form-control\" id=\"recipeNameInput\" placeholder=\"Enter the name of the dish...\" \n                  name=\"title\" onChange={this.handleInputChange} required />\n        </div>\n      </Fragment>\n    );\n  }\n};\n\n/**\n * Component for displaying a header with the text 'Category' and a select dropdown menu.\n * The select menu's text is conditionally styled to be gray (matching other bootstrap input field \n * placeholder texts) when the component's state has '' as the value for 'selected' and\n * is otherwise black when something has been chosen.\n * \n * @param {Function}  this.props.handleInputChange  Function that passes selection changes to RecipeForm\n * @param {Array} this.props.errors Array of errors related to category selection\n * \n * When the select drowndown's selected option is changed, handleInputChange(e) is called. \n * The select name (='category') and the selected option's value are passed up to the \n * RecipeForm component to be stored in its state.\n */\n class CategorySelection extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      selected: \"\",\n      errors: []\n    }\n\n    this.handleInputChange = this.handleInputChange.bind(this);\n  }\n\n  componentDidMount() {\n    this.setState({ errors: this.props.errors })\n  }\n\n  handleInputChange(e) {\n    this.setState({ selected: e.target.value});\n    this.props.handleInputChange(e.target.name, e.target.value);\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"recipe-element\">\n          <h5><label htmlFor=\"categories-select\">Category</label></h5>\n          {this.props.errors.length > 0 ? <ErrorAlert errors={this.props.errors} />: null}\n          <select name=\"category\" id=\"categories-select\" className=\"form-select\" defaultValue=\"\" \n                  style={{ color: this.state.selected === \"\" ? \"#6C757D\": \"#000000\"}} \n                  onChange={this.handleInputChange} required>\n            <option value=\"\" disabled hidden>Select a category</option>\n            <option value=\"Appetizers\">Appetizers</option>\n            <option value=\"Main Dishes\">Main Dishes</option>\n            <option value=\"Snacks\">Snacks</option>\n            <option value=\"Side Dishes\">Side Dishes</option>\n            <option value=\"Desserts\">Desserts</option>\n          </select>\n        </div>\n      </Fragment>\n    );\n  }\n};\n\n/**\n * Component for showing a header with the text 'Image of the dish' and a file uploader.\n * It stores the current uploaded file in its state and passes the new file to the main\n * RecipeForm component ('image' attribute in RecipeForm) when it's changed.\n * @param {Function}  this.props.handleInputChange  Function that passes input changes to RecipeForm\n * @param {Array} this.props.errors Array of image upload related errors\n */\nclass ImageUploader extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      file: null,\n      errors: []\n    }\n\n    this.handleFileChange = this.handleFileChange.bind(this);\n  }\n\n  componentDidMount() {\n    this.setState({ errors: this.props.errors })\n  }\n\n  handleFileChange(e) {\n    this.setState({ file: e.target.files[0]})\n    this.props.handleInputChange(\"image\", e.target.files[0]);\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"recipe-element\">\n          <h5>Image of the dish</h5>\n          {this.props.errors.length > 0 ? <ErrorAlert errors={this.props.errors} />: null}\n          <div className=\"form-group image-uploader-container\">\n            <input  type=\"file\" className=\"form-control-file\" id=\"dishImageFileInput\" accept=\"image/*\"\n                    onChange={this.handleFileChange} required />\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n};\n\n/**\n * Component showing a single ingredient in a list and a button for removing it\n * wrapped in <li></li> tags. A list of these components should be wrapped with <ul></ul>.\n * @param {string}  name    The name of the ingredient\n * @param {string}  amount  The amount (should include the unit) of the ingredient\n * @param {function}  deleteIngredient  A function to remove the current ingredient\n */\nconst Ingredient = ({ name, amount, deleteIngredient }) => {\n  return (\n    <Fragment>\n      <li className=\"list-group-item list-ingredient-container\">\n        <div className=\"list-ingredient-name\">{name}</div>\n        <div className=\"list-ingredient-amount float-end\">{amount}</div>\n        <button type=\"button\" className=\"btn-close btn-close-custom\" aria-label=\"Remove\" onClick={deleteIngredient}></button>\n      </li>\n    </Fragment>\n  );\n};\n\nIngredient.propTypes = {\n    name: PropTypes.string.isRequired,\n    amount: PropTypes.string.isRequired,\n    deleteIngredient: PropTypes.func.isRequired,\n};\n\n/**\n * Component for showing ingredient adding interface.\n * handleInputChange() is in charge of storing input field values in the component's state.\n * addIngredient() passes the name and amount values to the parent component to be validated there.\n */\nclass AddIngredientInput extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      name: \"\",\n      amount: \"\"\n    }\n\n    this.handleInputChange = this.handleInputChange.bind(this);\n    this.addIngredient = this.addIngredient.bind(this);\n  }\n\n  handleInputChange(e) {\n    this.setState({\n      [e.target.name]: e.target.value,\n    });\n  }\n\n  addIngredient(e) {\n    e.preventDefault();\n    this.props.addIngredient(e, this.state.name, this.state.amount);\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"add-ingredient-input-container\">\n          <div className=\"form-group list-ingredient-container\">\n            <div className=\"add-ingredient-name\">\n              Name:\n              <input  type=\"text\" className=\"form-control\" id=\"ingredientNameInput\" placeholder=\"Enter the name of the ingredient\" \n                      name=\"name\" onChange={this.handleInputChange} />\n            </div>\n            <div className=\"add-ingredient-amount\">\n              Amount:\n              <input  type=\"text\" className=\"form-control\" id=\"ingredientAmountInput\" placeholder=\"Enter the amount\" \n                      name=\"amount\" onChange={this.handleInputChange} />\n            </div>\n          </div>\n          <div onClick={this.addIngredient}>+ Add the above ingredient</div>\n        </div>\n      </Fragment>\n    );\n  }\n};\n\n/**\n * Component for showing a list of ingredients.\n * \n * toggleIngredientInput() is in charge of toggling between '+ Add a new ingredient' button\n * and showing AddIngredientInput component (the ingredient input for name and amount and \n * '+ Add the above ingredient').\n * \n * addIngredient() validates the input received from the AddIngredientInput child component.\n * It checks that:\n * (1) name cannot be empty\n * (2) amount cannot be empty\n * (3) name cannot be a duplicate of any ingredients included in the same ingredient group\n * If all these requirements are met, it toggles the ingredient input, saves the new ingredient\n * and passes it to the parent component. If there are errors, the ingredient is not saved and\n * the errors are shown using the ErrorAlert component.\n * \n * deleteIngredient() deletes an ingredient and passes this information along to parent components.\n */\nclass IngredientList extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      ingredients: [],\n      showIngredientInput: false,\n      errors: []\n    }\n\n    this.addIngredient = this.addIngredient.bind(this);\n    this.deleteIngredient = this.deleteIngredient.bind(this);\n    this.toggleIngredientInput = this.toggleIngredientInput.bind(this);\n  }\n\n  componentDidMount() {\n    this.setState({\n      ingredients: this.props.initialIngredients\n    });\n  }\n\n  toggleIngredientInput() {\n    let newState = {...this.state}\n    newState.showIngredientInput = !newState.showIngredientInput;\n    this.setState(newState);\n  }\n\n  addIngredient(e, ingredientName, ingredientAmount) {\n    e.preventDefault();\n    let name = ingredientName.toLowerCase().trim();\n    let amount = ingredientAmount.trim();\n    let errors = [];\n\n    if (name.length < 1) {\n      errors.push(\"Ingredient name can't be empty\");\n    }\n    if (this.state.ingredients.map(ingredient => ingredient.ingredient).includes(name)) {\n      errors.push(\"Ingredient can't be a duplicate of an ingredient already included in this same ingredient group\");\n    }\n    if (amount.length < 1) {\n      errors.push(\"Ingredient amount can't be empty\");\n    }\n\n    if (errors.length === 0) {\n      this.toggleIngredientInput();\n      let ingredients = [...this.state.ingredients];\n      ingredients.push( { ingredient: ingredientName, amount: ingredientAmount } );\n\n      this.setState({\n        ingredients: ingredients\n      });\n\n      this.props.handleIngredientChange(ingredients);\n    }\n\n    this.setState({ errors: errors});\n  }\n\n  deleteIngredient(idx) {\n    let ingredients = [...this.state.ingredients];\n    ingredients.splice(idx, 1);\n    this.setState({\n      ingredients: ingredients\n    });\n\n    this.props.handleIngredientChange(ingredients);\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <ul className=\"list-group ingredient-group\">\n          {this.state.ingredients.map((ingredient, idx) => \n              <Ingredient name={ingredient.ingredient} \n                          amount={ingredient.amount} \n                          key={`${ingredient.ingredient}-ingredient`} \n                          deleteIngredient={() => this.deleteIngredient(this.state.ingredients.indexOf(ingredient))} \n              />\n            )}\n          <li className=\"list-group-item list-button\">\n            { this.state.errors.length > 0 ? <ErrorAlert errors={this.state.errors} /> : null}\n            { this.state.showIngredientInput ? <AddIngredientInput addIngredient={this.addIngredient} /> : null }\n            { !this.state.showIngredientInput ? <div onClick={this.toggleIngredientInput}>+ Add a new ingredient</div> : null }\n          </li>\n        </ul>\n      </Fragment>\n    );\n  }  \n};\n\n/**\n * Component showing a <h6></h6> header with the subgroup name specified through props\n * and a 'X' button to remove the current subgroup beside it. An IngredientList component \n * is included below the header and the button.\n * @param {string}  this.props.name    The name of the ingredient subgroup\n * @param {number}  this.props.idx  The index of the current ingredient subgroup\n * @param {function}  this.props.handleSubgroupChange A function for callbacks when ingredients are updated\n * @param {array} this.props.initialIngredients The list of initial ingredients the subgroup should have\n * @param {function}  this.props.deleteIngredientSubgroup  A function to delete the current subgroup of ingredients\n */\nclass IngredientSubgroup extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      ingredients: []\n    }\n\n    this.handleIngredientChange = this.handleIngredientChange.bind(this);\n  }\n\n  componentDidMount() {\n    this.setState({\n      ingredients: this.props.initialIngredients\n    }); \n  }\n\n  handleIngredientChange(ingredients) {\n    this.setState({\n      ingredients: ingredients\n    });\n    this.props.handleSubgroupChange(this.props.name, this.props.idx, ingredients);\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"ingredient-subgroup\">\n          <h6>{this.props.name} <button type=\"button\" className=\"btn-close btn-close-custom\" aria-label=\"Remove\" onClick={this.props.deleteIngredientSubgroup}></button></h6>\n          <IngredientList initialIngredients={this.props.initialIngredients} handleIngredientChange={this.handleIngredientChange} />\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nIngredientSubgroup.propTypes = {\n    name: PropTypes.string.isRequired,\n    deleteIngredientSubgroup: PropTypes.func.isRequired,\n};\n\n/**\n * Component for showing multiple ingredient lists (default, subgroups) together.\n * It stores the ingredients for default ingredient group in its state. For subgroups\n * it stores an array of subgroups. The subgroups in the array have the format:\n * subgroup[i] = {name: 'Subgroup name', ingredients: []}\n * The component also stores the value inserted into the text field for inputting a new\n * subgroup name in its state as well as an array of errors related to that input field.\n * \n * When the value for the subgroup name input field is changed, handleInputChange() is called.\n * When a user submits a new subgroup name, addIngredientSubgroup() is called and it briefly\n * validates that the input meets the following requirements:\n * (1) input can't be empty (subgroup must have a name)\n * (2) input can't be a duplicate of existing subgroup name (no subgroup duplicates allowed for a single recipe)\n * When a user wants to delete a subgroup and presses the 'X' button, deleteIngredientSubgroup() is called.\n * \n * handleIngredientChange() and handleSubgroupChange() store ingredient changes from child components\n * this component and passes them up to parent component. handleIngredientChange() handles ingredient\n * changes in the default ingredient group and handleSubgroupChange() handles the changes in subgroups.\n */\nclass IngredientInput extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      default: [],\n      subgroups: [],\n      newGroupName: \"\",\n      errors: []\n    }\n\n    this.addIngredientSubgroup = this.addIngredientSubgroup.bind(this);\n    this.deleteIngredientSubgroup = this.deleteIngredientSubgroup.bind(this);\n    this.handleIngredientChange = this.handleIngredientChange.bind(this);\n    this.handleSubgroupChange = this.handleSubgroupChange.bind(this);\n    this.handleInputChange = this.handleInputChange.bind(this);\n  }\n\n  handleInputChange(e) {\n    this.setState({\n      [e.target.name]: e.target.value,\n    });\n  }\n\n  addIngredientSubgroup(e) {\n    e.preventDefault();\n\n    let name = this.state.newGroupName.trim();\n    let errors = []\n    if (name.length < 1) {\n      errors.push(\"Subgroup name can't be empty\")\n    } else if (this.state.subgroups.map(subgroup => subgroup.name).includes(name)) {\n      errors.push(\"Subgroup name can't be a duplicate\")\n    }\n\n    if (errors.length === 0) {\n      let subgroups = [...this.state.subgroups];\n      subgroups.push( { name: name, ingredients: [] } );\n      this.setState({\n        subgroups: subgroups,\n        newGroupName: \"\"\n      });\n\n      let ingredientsObj = {\n        Default: this.state.default\n      }\n      subgroups.forEach( subgroup => ingredientsObj = { ...ingredientsObj, [subgroup.name]: subgroup.ingredients });\n      this.props.handleInputChange(\"groups\", ingredientsObj);\n    }\n\n    this.setState({ errors: errors })\n  }\n\n  deleteIngredientSubgroup(idx) {\n    let subgroups = [...this.state.subgroups];\n    subgroups.splice(idx, 1);\n\n    this.setState({\n      subgroups: subgroups\n    });\n\n    let ingredientsObj = {\n      Default: this.state.default\n    }\n    subgroups.forEach( subgroup => ingredientsObj = { ...ingredientsObj, [subgroup.name]: subgroup.ingredients });\n    this.props.handleInputChange(\"groups\", ingredientsObj);\n  }\n\n  handleIngredientChange(ingredients) {\n    this.setState({\n      default: ingredients\n    });\n\n    let ingredientsObj = {\n      Default: ingredients\n    }\n    this.state.subgroups.forEach( subgroup => ingredientsObj = { ...ingredientsObj, [subgroup.name]: subgroup.ingredients });\n    this.props.handleInputChange(\"groups\", ingredientsObj);\n  }\n\n  handleSubgroupChange(group, idx, ingredients) {\n    let subgroups = [...this.state.subgroups];\n    subgroups[idx] = {\n      name: group,\n      ingredients: ingredients\n    }\n\n    this.setState({\n      subgroups: subgroups\n    });\n\n    let ingredientsObj = {\n      Default: this.state.default\n    }\n    subgroups.forEach( subgroup => ingredientsObj = { ...ingredientsObj, [subgroup.name]: subgroup.ingredients });\n    this.props.handleInputChange(\"groups\", ingredientsObj);\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"recipe-element\">\n          <h5>Ingredients</h5>\n          {this.props.errors.length > 0 ? <ErrorAlert errors={this.props.errors} /> : null}\n          <IngredientList key=\"default\" initialIngredients={this.state.default} \n                          handleIngredientChange={this.handleIngredientChange} />\n          {this.state.subgroups.map((subgroup, idx) => \n              <IngredientSubgroup name={subgroup.name} key={`${subgroup.name}-group`} idx={idx}\n                                  initialIngredients={subgroup.ingredients}\n                                  handleSubgroupChange={this.handleSubgroupChange} \n                                  deleteIngredientSubgroup={() => this.deleteIngredientSubgroup(idx)} />\n            )}\n          <div className=\"add-subgroup-container\">\n            {this.state.errors.length > 0 ? <ErrorAlert errors={this.state.errors} /> : null}\n            <input  type=\"text\" className=\"form-control\" id=\"groupNameInput\" placeholder=\"Name for a new ingredient group\" \n                    name=\"newGroupName\" value={this.state.newGroupName} onChange={this.handleInputChange} />\n            <button className=\"btn btn-secondary-custom mt-1\" onClick={this.addIngredientSubgroup}>+ Add a new ingredient group</button>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n};\n\n/**\n * Component showing a single instruction step. The component shows the step number, a textarea for inputting the step\n * description, a 'X' button for removing the current (= this component) instruction step and a image uploader that can\n * be used to upload a instructional image for the current instruction step.\n * \n * @param {string}  this.props.number  The step number that should be shown to the left of the textarea\n * @param {string}  this.props.description  The step description that should be shown in the textarea\n * @param {function}  this.props.deleteInstructionStep  A function passed as a prop to delete the current instruction step\n * \n * When the description textarea is changed, the component does a callback to the InstructionsInput component where the\n * change is handled.\n */\nclass InstructionsStep extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      file: null\n    }\n\n    this.handleInstructionChange = this.handleInstructionChange.bind(this);\n    this.handleFileChange = this.handleFileChange.bind(this);\n  }\n\n  handleInstructionChange(e) {\n    e.preventDefault();\n    this.props.handleInstructionChange(e, this.props.number - 1);\n  }\n\n  handleFileChange(e) {\n    this.setState({ file: e.target.files[0] });\n    this.props.handleImageChange(this.props.number, e.target.files[0])\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"list-instructions-step\">\n          <div className=\"instructions-step-start\">{this.props.number}.</div>\n          <textarea className=\"form-control\" rows=\"1\" placeholder=\"Enter the description for this step...\" \n                    onChange={this.handleInstructionChange} required={this.props.number === \"1\"} ></textarea>\n          <div className=\"instructions-step-end\">\n            <button type=\"button\" className=\"btn-close btn-close-custom\" aria-label=\"Close\" \n                    onClick={this.props.deleteInstructionStep} \n                    style={{display: this.props.number === \"1\" ? \"none\" : \"initial\"}} ></button>\n          </div>\n        </div>\n        <div className=\"form-group\">\n          Step {this.props.number} image (optional)<br />\n          <input type=\"file\" className=\"form-control-file\" id=\"instructionImageFileInput\" accept=\"image/*\" onChange={this.handleFileChange} />\n        </div>\n      </Fragment>\n    );\n  } \n};\n\nInstructionsStep.propTypes = {\n  number: PropTypes.string.isRequired,\n  description: PropTypes.string.isRequired,\n};\n\n/**\n * Component for displaying a header with the text 'Instructions' and a list of instructions.\n * Each instruction step is shown using the InstructionsStep component defined above.\n * \n * @param {Array} this.props.errors Array of errors related to instruction steps\n * \n * The component stores a list of current step descriptions inputted in its own state. In addition\n * to that it also keeps track of how many steps have been added by incrementing the index variable\n * in its state. This is then used for step keys and is there to make sure they are all unique and\n * constant for the steps to prevent problems with React rerendering due to key changes when some \n * instructions are deleted.\n * \n * When the user presses the button '+ Add a new step' to add an additional instruction step,\n * addInstructionStep(e) is called. The function stores an additional step with an empty description\n * in the component state.\n * \n * When the instruction step descriptions are changed, handleInstructionChange(e, idx) is called. \n * The function updates the new description to its own state and does a callback back to the RecipeForm\n * component to update its state for instruction steps. The name for RecipeForm's instructions attribute\n * name (='instructions') and an object of steps in the following way is passed to the RecipeForm component \n * in the callback:\n * \n * {\n *    [step index + 1]: [description]\n * }\n * \n * When the user removes steps by pressing the 'X' button next to a step, deleteInstructionStep(idx) is called.\n * The function splices out the removed description and updates the component's state to match this deletion.\n * The function also makes a callback to the RecipeForm component to update its state as well in the same format\n * as described for instruction step description updating.\n */\nclass InstructionsInput extends React.Component {\n  constructor() {\n    super();\n    \n    this.state = {\n      steps: [],\n      index: 0,\n      errors: []\n    }\n\n    this.addInstructionStep = this.addInstructionStep.bind(this);\n    this.handleInstructionChange = this.handleInstructionChange.bind(this);\n    this.deleteInstructionStep = this.deleteInstructionStep.bind(this);\n    this.handleImageChange = this.handleImageChange.bind(this);\n  }\n\n  componentDidMount() {\n    let steps = [];\n    steps.push( { description: \"\", idx: this.state.index } );\n\n    this.setState({\n      steps: steps,\n      index: this.state.index + 1,\n      errors: this.props.errors\n    });\n  }\n\n  addInstructionStep(e) {\n    e.preventDefault();\n    let steps = [...this.state.steps];\n    steps.push( { description: \"\", idx: this.state.index } );\n\n    this.setState({\n      steps: steps,\n      index: this.state.index + 1\n    });\n  }\n\n  handleInstructionChange(e, idx) {\n    let steps = [...this.state.steps];\n    steps[idx].description = e.target.value.trim();\n\n    this.setState({\n      steps: steps\n    });\n\n    let stepObj = steps.reduce((obj, step) => ({...obj, [steps.indexOf(step) + 1]: step.description}), {});\n    this.props.handleInputChange(\"instructions\", stepObj);\n  }\n\n  deleteInstructionStep(idx) {\n    let steps = [...this.state.steps];\n    steps.splice(idx, 1);\n\n    this.setState({\n      steps: steps\n    });\n\n    let stepObj = steps.reduce((obj, step) => ({...obj, [steps.indexOf(step) + 1]: step.description}), {});\n    this.props.handleInputChange(\"instructions\", stepObj);\n    this.props.handleStepImageDeletion(idx + 1);\n  }\n\n  handleImageChange(step, file) {\n    this.props.handleStepImageChange(step, file);\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"recipe-element\">\n          <h5>Instructons</h5>\n          {this.props.errors.length > 0 ? <ErrorAlert errors={this.props.errors} />: null}\n          {this.state.steps.map(step => \n            <InstructionsStep number={String(this.state.steps.indexOf(step) + 1)} description={step.description} \n                              key={step.idx} handleInstructionChange={this.handleInstructionChange}\n                              handleImageChange={this.handleImageChange} \n                              deleteInstructionStep={() => this.deleteInstructionStep(this.state.steps.indexOf(step))} />\n          )}\n          <button className=\"btn btn-secondary-custom mt-2\" onClick={this.addInstructionStep} >+ Add a new step</button>\n        </div>\n      </Fragment>\n    );\n  }    \n};\n\n/**\n * Component for displaying a header with the text 'Additional Instructions' and a textarea.\n * \n * When the textarea content is changed, handleInputChange(e) is called. The textarea name \n * (='addInstructions') and its value are passed up to the RecipeForm component to be stored \n * in its state.\n */\nclass AdditionalInstructionsInput extends React.Component {\n  constructor() {\n    super();\n\n    this.handleInputChange = this.handleInputChange.bind(this);\n  }\n\n  handleInputChange(e) {\n    this.props.handleInputChange(e.target.name, e.target.value.trim());\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"form-group recipe-element\">\n          <label htmlFor=\"additionalInstructionsInput\"><h5>Additional Instructions</h5></label>\n          <textarea className=\"form-control\" id=\"additionalInstructionsInput\" rows=\"2\" \n                    placeholder=\"Enter any additional instructions for preparing the dish here...\" \n                    name=\"addInstructions\" onChange={this.handleInputChange}></textarea>\n        </div>\n      </Fragment>\n    );\n  }\n};\n\n/**\n * Component for displaying a header with the text 'Tags' and an input field.\n * \n * @param {Function}  this.props.handleInputChange  Function to pass up state changes to RecipeForm\n * @param {Array} this.props.errors Array listing possible errors arisen in last validation done during submit\n * \n * When the input field content is changed, handleInputChange(e) is called.\n * The component parses the tags by splitting the input field content at ';'s. \n * If the split tags contain content after trimming trailing whitespaces, they \n * are added to an array 'tagList'. The input field name (='tags') and the list \n * of tags are passed up to the RecipeForm component to be stored in its state.\n */\nclass TagInput extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      errors: []\n    }\n\n    this.handleInputChange = this.handleInputChange.bind(this);\n  }\n\n  componentDidMount() {\n    this.setState({ errors: this.props.errors })\n  }\n\n  handleInputChange(e) {\n    let tagList = [];\n    e.target.value.split(\";\").forEach(tag => {\n      if (tag.trim().length > 0) tagList.push(tag.toLowerCase().trim());\n    });\n    this.props.handleInputChange(e.target.name, tagList);\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"form-group recipe-element\">\n          <label htmlFor=\"recipeTagInput\"><h5>Tags</h5></label>\n          {this.props.errors.length > 0 ? <ErrorAlert errors={this.props.errors} /> : null}\n          <input  type=\"text\" className=\"form-control\" id=\"recipeTagInput\" \n                  placeholder=\"Enter the tags of the dish separated by ';' ...\" name=\"tags\" \n                  onChange={this.handleInputChange} required />\n        </div>\n      </Fragment>\n    );\n  }\n};\n\n/**\n * Component for the recipe adding form itself. \n * Stores the recipe information in its state.\n * \n * handleInputChange() is called by child components to update the state values based on the input field\n * values of the child components. handleStepImageChange() is used to pass instruction step images back\n * to the RecipeForm component and to store them there.\n */\nclass RecipeForm extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      title: \"\",\n      category: \"\",\n      groups: {\n        Default: []\n      },\n      instructions: {},\n      addInstructions: \"\",\n      tags: [],\n      image: null,\n      stepImages: {},\n      errors: {\n        nameErrors: [],\n        categoryErrors: [],\n        imageErrors: [],\n        ingredientErrors: [],\n        instructionErrors: [],\n        tagErrors: []\n      },\n      createdID: 0\n    }\n\n    this.handleInputChange = this.handleInputChange.bind(this);\n    this.handleStepImageChange = this.handleStepImageChange.bind(this);\n    this.handleStepImageDeletion = this.handleStepImageDeletion.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleInputChange(name, value) {\n    this.setState({\n      [name]: value,\n    });\n  };\n\n  handleStepImageChange(step, image) {\n    let currentImages = { ...this.state.stepImages, [step]: image };\n    this.setState({ stepImages: currentImages })\n  }\n\n  handleStepImageDeletion(step) {\n    let currentImages = { ...this.state.stepImages };\n    delete currentImages[step];\n    this.setState({ stepImages: currentImages });\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    let dataValidates = true;\n\n    // validate name\n    let nameErrors = [];\n    if (this.state.title.length < 1) {\n      dataValidates = false;\n      nameErrors.push(\"Name can't be empty\");\n    }\n\n    // validate category\n    let categoryErrors = [];\n    if (this.state.category === \"\") {\n      dataValidates = false;\n      categoryErrors.push(\"A category must be chosen\");\n    }\n\n    // validate image\n    let imageErrors = [];\n    if (!this.state.image) {\n      dataValidates = false;\n      imageErrors.push(\"An image must be added\");\n    }\n\n    // validate ingredients\n    let ingredientErrors = [];\n    if (Object.keys(this.state.groups).every(groupKey => this.state.groups[groupKey].length < 1)) {\n      dataValidates = false;\n      ingredientErrors.push(\"The recipe must contain at least one ingredient\");\n    }\n    if (Object.keys(this.state.groups)\n              .filter(groupKey => groupKey !== \"Default\")\n              .some(groupKey => this.state.groups[groupKey].length < 1)) {\n      dataValidates = false;\n      ingredientErrors.push(\"Subgroups can't be empty\");\n    }\n\n    // validate instructions\n    let instructionErrors = [];\n    if (this.state.instructions.length < 1 || !this.state.instructions['1']) {\n      dataValidates = false;\n      instructionErrors.push(\"The instructions must contain at least one step\");\n    }\n    if (this.state.instructions['1'] && this.state.instructions['1'].length < 1) {\n      dataValidates = false;\n      instructionErrors.push(\"The first instruction step can't be empty\");\n    }\n    if (Object.values(this.state.instructions).includes(\"\") || Object.values(this.state.instructions).includes(undefined)) {\n      dataValidates = false;\n      instructionErrors.push(\"The instructions can't include empty instructions\");\n    }\n\n    // validate tags\n    let tagErrors = [];\n    if (this.state.tags.length < 1) {\n      dataValidates = false;\n      tagErrors.push(\"Tags can't be empty\");\n    }\n\n    let errors = {\n      nameErrors: nameErrors,\n      categoryErrors: categoryErrors,\n      imageErrors: imageErrors,\n      ingredientErrors: ingredientErrors,\n      instructionErrors: instructionErrors,\n      tagErrors: tagErrors\n    }\n\n    this.setState({ errors: errors });\n\n    if (dataValidates) {\n      const formData = new FormData();\n\n      let stepImages = {};\n      Object.keys(this.state.stepImages).forEach(key => stepImages[key] = this.state.stepImages[key].name);\n\n      const recipe = {\n        title: this.state.title,\n        category: this.state.category,\n        groups: this.state.groups,\n        instructions: this.state.instructions,\n        addInstructions: this.state.addInstructions,\n        tags: this.state.tags,\n        stepImages: stepImages,\n      }\n\n      formData.append('recipe', JSON.stringify(recipe));\n      formData.append('images', this.state.image);\n      Object.keys(this.state.stepImages).forEach( key => formData.append('images', this.state.stepImages[key]) );\n      \n      fetch('/recipes', {\n          method: 'POST',\n          credentials: 'include',\n          body: formData,\n      })\n      .then(response => {\n        if (response.ok) {\n          return response.json();\n        }\n        throw new Error('Something went wrong...');\n      })\n      .then(recipeID => {\n        setTimeout(() => {\n          this.setState({ createdID: recipeID });\n          console.log('Redirecting...')\n        }, 500);\n      })\n      .catch((error) => {\n          console.error(error);\n      });\n    }\n  }\n\n  render() {\n    let cookie =  document.cookie.split(\";\").map(cookie => cookie.split(\"=\")[0]);\n\n    for( let i = 0; i < cookie.length; i++)\n      cookie[i] = cookie[i].trim();\n\n    return (\n      <Fragment>\n        { !cookie.includes(\"authentication\") \n          || window.localStorage.getItem('user') === null ? <Redirect push to=\"/browse\" /> : null }\n        { this.state.createdID !== 0 ? <Redirect push to={`/recipes/${this.state.createdID}`} /> : null }\n        <div className=\"recipe-form-container text-center\">\n          <h1>Add a new recipe</h1>\n          <form onSubmit={this.handleSubmit}>\n              <NameInput handleInputChange={this.handleInputChange} errors={this.state.errors.nameErrors} />\n              <CategorySelection handleInputChange={this.handleInputChange} errors={this.state.errors.categoryErrors} />\n              <ImageUploader handleInputChange={this.handleInputChange} errors={this.state.errors.imageErrors} />\n              <IngredientInput handleInputChange={this.handleInputChange} errors={this.state.errors.ingredientErrors} />\n              <InstructionsInput  handleInputChange={this.handleInputChange} handleStepImageChange={this.handleStepImageChange}\n                                  handleStepImageDeletion={this.handleStepImageDeletion} \n                                  errors={this.state.errors.instructionErrors} />\n              <AdditionalInstructionsInput handleInputChange={this.handleInputChange} />\n              <TagInput handleInputChange={this.handleInputChange} errors={this.state.errors.tagErrors} />\n              {Object.keys(this.state.errors).some(errorCategory => this.state.errors[errorCategory].length > 0) ? \n              <ErrorAlert errors={[\"Can't submit form due to failed requirements:\"].concat(this.state.errors.nameErrors, \n                                  this.state.errors.categoryErrors, this.state.errors.imageErrors, \n                                  this.state.errors.ingredientErrors, this.state.errors.instructionErrors, \n                                  this.state.errors.tagErrors)} /> \n              : null}\n              <button type=\"submit\" className=\"btn btn-primary btn-custom mt-3\">Submit recipe</button>\n          </form>\n        </div>\n      </Fragment>\n    );\n  }\n};\n\nexport default RecipeForm;","import React, { Fragment } from \"react\";\n\n//components\nimport NavigationBar from \"../components/NavBar/NavBar\";\nimport RecipeForm from \"../components/RecipeForm/RecipeForm\";\n\nconst AddRecipe = () => {\n  return (\n    <Fragment>\n      <NavigationBar />\n      <div className=\"container-fluid\">\n        <div className=\"container pt-3\">\n            <RecipeForm />\n        </div>\n      </div>\n    </Fragment>\n  );\n}\n\nexport default AddRecipe;","import React, { Fragment } from \"react\";\nimport PropTypes from 'prop-types';\nimport \"./IndividualRecipe.css\";\nimport { ReactComponent as StarIcon } from \"../../images/star_icon.svg\";\nimport bookmarkIcon from \"../../images/bookmark_svg.svg\";\nimport starIcon from \"../../images/star_svg.svg\";\n\nimport { withRouter } from 'react-router-dom';\nimport { Link } from 'react-router-dom'\n\n/**\n * Component for rendering a recipe image.\n * @param {string} source The source for the image file\n * @param {string} alternative Alternative text for the image if it doesn't render\n * @returns A img element styled with .recipe-image that uses the provided source and alternative.\n */\nconst RecipeImage = ({ source, alternative }) => {\n    return (\n        <Fragment>\n            <img className=\"recipe-image\" src={`/${source.replace(/\\\\/g, '/').replace('../client/public/', '')}`} alt={alternative} />\n        </Fragment>\n    );\n}\n\nRecipeImage.propTypes = {\n    source: PropTypes.string.isRequired,\n    alternative: PropTypes.string.isRequired,\n};\n\n/**\n * Component for rendering the recipe header that includes the name of the dish, username for the submitter,\n * recipe category, bookmarks and star rating.\n * @param {string} this.props.name Name of recipe to be displayed\n * @param {string} this.props.author Username of the submitter to be displayed\n * @param {string} this.props.category Category of the recipe to be displayed\n * @param {number} this.props.bookmarks Number of bookmarks for the recipe\n * @param {boolean} this.props.bookmarked  Boolean indicating whether the current user has already bookmarked the recipe\n * @param {number} this.props.stars Star rating of the recipe\n * @param {number} this.props.rated   Number indicating whether the current user has already rated the recipe and what rating they gave\n * @param {string}  this.props.recipeid    The recipe ID for the current recipe\n * @param {boolean} this.props.loggedIn Boolean to indicate whether the user is logged in\n * @returns A .recipe-title div that contains .recipe-title-text and .recipe-title-icons divs.\n *          .recipe-title-text div contains headers for the name of the dish, the author and the category.\n *          .recipe-title-icons div contains the bookmark count and star rating and image icons for those \n *          displayed next to them.\n */\nclass RecipeHeader extends React.Component {\n    constructor() {\n        super();\n\n        this.state = {\n            rated: false,\n            userRating: 0,\n        }\n\n        this.handleBookmarkClick = this.handleBookmarkClick.bind(this);\n        this.handleRatingChange = this.handleRatingChange.bind(this);\n        this.handleStarSubmit = this.handleStarSubmit.bind(this);\n    }\n\n    handleBookmarkClick() {\n        // check the user is logged in\n        if (this.props.loggedIn) {\n            // check whether the user has already bookmarked the recipe and proceed accordingly to\n            // either add it to bookmarks or delete it from bookmarks\n            if (this.props.bookmarked) {\n                // already bookmarked --> delete from bookmarks\n                let url = `/recipes/${this.props.recipeid}/save`;\n                fetch(url, {\n                    method: 'DELETE',\n                    credentials: 'include',\n                })\n                .then(response => {\n                    if (response.ok) {\n                        this.props.handleHeaderChange('bookmarks', Number(this.props.bookmarks - 1));\n                        this.props.handleHeaderChange('bookmarked', false);\n                        return response;\n                    }\n                    throw new Error('Something went wrong...');\n                })\n                .catch((error) => {\n                    console.error(error);\n                });\n            } else {\n                // add to bookmarks\n                let url = `/recipes/${this.props.recipeid}/save`;\n                fetch(url, {\n                    method: 'POST',\n                    credentials: 'include',\n                })\n                .then(response => {\n                    if (response.ok) {\n                        this.props.handleHeaderChange('bookmarks', Number(this.props.bookmarks + 1));\n                        this.props.handleHeaderChange('bookmarked', true);\n                        return response;\n                    }\n                    throw new Error('Something went wrong...');\n                })\n                .catch((error) => {\n                    console.error(error);\n                });\n            }\n        }  \n    }\n\n    handleRatingChange(e) {\n        this.setState({ userRating: e.target.value });\n    }\n\n    handleStarSubmit(e) {\n        e.preventDefault();\n        // check the user is logged in\n        if (this.props.loggedIn) {\n            // check whether the current user has already rated the recipe and only proceed if not\n            if (!this.props.rated) {\n                const rating = { rating: this.state.userRating };\n                let url = `/recipes/${this.props.recipeid}/rate`;\n                fetch(url, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                    },\n                    credentials: 'include',\n                    body: JSON.stringify(rating),\n                })\n                .then(response => {\n                    if (response.ok) {\n                        return response.json();\n                    }\n                    throw new Error('Something went wrong...');\n                })\n                .then(rating => {\n                    this.props.handleHeaderChange('stars', Number(rating.avgrating));\n                    this.props.handleHeaderChange('rated', this.state.userRating);\n                })\n                .catch((error) => {\n                    console.error(error);\n                });\n            }\n        }\n    }\n\n    render() {\n        let userLink = `/user/${this.props.author}`;\n        return (\n        <Fragment>\n            <div className=\"recipe-title\">\n                <div className=\"recipe-title-text\">\n                    <h1>{this.props.name}</h1>\n                    <Link to={userLink} style={{textDecoration: 'none'}}><h4>@{this.props.author}</h4></Link>\n                    <h6>Category: {this.props.category}</h6>\n                </div>\n                <div className=\"recipe-title-icons\">\n                    <div className=\"recipe-title-icons-top\">\n                        <div className=\"recipe-title-icon-container\">\n                            <div id=\"bookmark-btn\" onClick={this.handleBookmarkClick} style={{ cursor: this.props.loggedIn ? 'pointer' : 'default' }}>\n                                <h2 style={{ filter: this.props.bookmarked ? 'none' : 'brightness(0)' }}>\n                                    {this.props.bookmarks}<img className=\"recipe-title-icon\" src={bookmarkIcon} alt=\"Stars\" />\n                                </h2>\n                                {this.props.loggedIn ? \n                                    <span id=\"bookmark-tooltip\">\n                                        {this.props.bookmarked ? \"Remove from bookmarks\" : \"Bookmark recipe\"}\n                                    </span>\n                                : null}\n                            </div>\n                        </div>\n                        <div className=\"recipe-title-icon-container\" style={{ filter: (this.props.rated !== 0) ? 'none' : 'brightness(0)' }}>\n                            <h2>{this.props.stars}<img className=\"recipe-title-icon\" src={starIcon} alt=\"Stars\" /></h2>\n                        </div>\n                    </div>\n                    {this.props.loggedIn && this.props.rated !== 0 ? \n                        <div className=\"recipe-title-icons-bottom\">\n                            <h6>You rated this recipe:</h6>\n                            <StarIcon   className={`star-rating-icon ${Number(this.props.rated) > 0 ? 'filled' : null}`} \n                                        alt=\"star\" />\n                            <StarIcon   className={`star-rating-icon ${Number(this.props.rated) > 1 ? 'filled' : null}`} \n                                        alt=\"star\" />\n                            <StarIcon   className={`star-rating-icon ${Number(this.props.rated) > 2 ? 'filled' : null}`} \n                                        alt=\"star\" />\n                            <StarIcon   className={`star-rating-icon ${Number(this.props.rated) > 3 ? 'filled' : null}`} \n                                        alt=\"star\" />\n                            <StarIcon   className={`star-rating-icon ${Number(this.props.rated) > 4 ? 'filled' : null}`} \n                                        alt=\"star\" />\n                        </div>\n                        : (this.props.loggedIn ?\n                            <div className=\"recipe-title-icons-bottom\">\n                                <h6>Your rating:</h6>\n                                <form onSubmit={this.handleStarSubmit}>\n                                    <div className=\"star-rating\" onChange={this.handleRatingChange}>\n                                        <input type=\"radio\" name=\"stars\" id=\"star-5\" value={5}/>\n                                        <label className=\"form-check-label\" htmlFor=\"star-5\">\n                                            <StarIcon className=\"star-rating-icon\" alt=\"star\" />\n                                        </label>\n                                        <input type=\"radio\" name=\"stars\" id=\"star-4\" value={4}/>\n                                        <label className=\"form-check-label\" htmlFor=\"star-4\">\n                                            <StarIcon className=\"star-rating-icon\" alt=\"star\" />\n                                        </label>\n                                        <input type=\"radio\" name=\"stars\" id=\"star-3\" value={3}/>\n                                        <label className=\"form-check-label\" htmlFor=\"star-3\">\n                                            <StarIcon className=\"star-rating-icon\" alt=\"star\" />\n                                            </label>\n                                        <input type=\"radio\" name=\"stars\" id=\"star-2\" value={2}/>\n                                        <label className=\"form-check-label\" htmlFor=\"star-2\">\n                                            <StarIcon className=\"star-rating-icon\" alt=\"star\" />\n                                        </label>\n                                        <input type=\"radio\" name=\"stars\" id=\"star-1\" value={1} />\n                                        <label className=\"form-check-label\" htmlFor=\"star-1\">\n                                            <StarIcon className=\"star-rating-icon\" alt=\"star\" />\n                                        </label>\n                                    </div>\n                                    <button className=\"btn btn-primary btn-custom\">Submit rating</button>\n                                </form>\n                            </div>\n                        : null)   \n                    }\n                </div>\n            </div>\n        </Fragment>\n        );\n    }\n};\n\nRecipeHeader.propTypes = {\n    name: PropTypes.string.isRequired,\n    author: PropTypes.string.isRequired,\n    category: PropTypes.string.isRequired,\n    bookmarks: PropTypes.number.isRequired,\n    stars: PropTypes.number.isRequired,\n};\n\n/**\n * Component for rendering a single tag.\n * @param {string} name Name of the tag to be shown on the tag \n * @returns A styled .recipe-tag div with the tag name as content.\n */\nconst RecipeTag = ({ name }) => {\n    return (\n      <Fragment>\n        <div className=\"recipe-tag\">\n            {name}\n        </div>\n      </Fragment>\n    );\n};\n\nRecipeTag.propTypes = {\n    name: PropTypes.string.isRequired,\n};\n\n/**\n * Component for rendering a list of tags.\n * @param {Array[string]} tags Array of tags to be rendered\n * @returns A styled .recipe-tag-list div with RecipeTag elements inside it.\n */\nconst RecipeTagList = ({ tags }) => {\n    return (\n        <Fragment>\n            <div className=\"recipe-tag-list\">\n                {tags.map(tag => <RecipeTag name={tag} key={`${tag}-tag`} />)}\n            </div>\n        </Fragment>\n    );\n};\n\nRecipeTagList.propTypes = {\n    tags: PropTypes.array.isRequired,\n};\n\n/**\n * Component for rendering a single ingredient.\n * @param {string} name The name of the ingredient\n * @param {string} amount The amount of the ingredient including the unit\n * @returns A styled .recipe-ingredient div with two styled divs inside it, .recipe-ingredient-name div with the name\n *          as content and .recipe-ingredient-amount with the amount as content.\n */\nconst RecipeIngredient = ({ ingredient, amount }) => {\n    return (\n      <Fragment>\n            <div className=\"recipe-ingredient\">\n                <div className=\"recipe-ingredient-name\">\n                    {ingredient}\n                </div>\n                <div className=\"recipe-ingredient-amount\">\n                    {amount}\n                </div>\n            </div>\n      </Fragment>\n    );\n};\n\nRecipeIngredient.propTypes = {\n    ingredient: PropTypes.string.isRequired,\n    amount: PropTypes.string.isRequired,\n};\n\n/**\n * Component for rendering a list of ingredients.\n * @param {string}  group   Name of the current ingredient subgroup\n * @param {Array[Object]} ingredients Array of ingredients where every element inside it should be of format\n *                                    { name: 'Ingredient name', amount: 'Ingredient amount' }\n * @returns A .recipe-ingredients-list div containing RecipeIngredient elements. \n *          If the group rendered is not \"Default\", the group name header is included above the .recipe-ingredients-list div.\n */\n const RecipeIngredientList = ({ group, ingredients }) => {\n    return (\n        <Fragment>\n            {group !== \"Default\" ? <h5>{group}</h5> : null}\n            <div className=\"recipe-ingredients-list\">\n                {ingredients.map(ingredient => \n                    <RecipeIngredient   ingredient={ingredient.ingredient} amount={ingredient.amount} \n                                        key={`${group}-ingredient-${ingredient.ingredient}`} />\n                )}\n            </div>\n        </Fragment>\n    );\n};\n\nRecipeIngredientList.propTypes = {\n    group: PropTypes.string.isRequired,\n    ingredients: PropTypes.arrayOf(PropTypes.shape({\n        ingredient: PropTypes.string.isRequired,\n        amount: PropTypes.string.isRequired,\n    })).isRequired,\n};\n\n/**\n * Component for rendering a list of ingredient groups.\n * @param {Array[Object]} ingredients Array of ingredient groups where every element inside it should have the format of\n *                                   { name: 'Group name', ingredients: [ name: 'Ingredient name', amount: 'Ingredient amount'] }\n * @returns A .recipe-element div element containing a header and a .recipe-ingredients div.\n *          .recipe-ingredients div contains RecipeIngredientList elements.\n */\n const RecipeIngredientGroups = ({ ingredients }) => {\n    return (\n        <Fragment>\n            <div className=\"recipe-element\">\n                <h3>Ingredients</h3>\n                <div className=\"recipe-ingredients\">\n                    {ingredients.map(group => \n                        <RecipeIngredientList   group={group.name} \n                                                ingredients={group.ingredients} key={group.name} />\n                    )}\n                </div>\n            </div>\n        </Fragment>\n    );\n};\n\nRecipeIngredientGroups.propTypes = {\n    ingredients: PropTypes.arrayOf(\n        PropTypes.shape({\n            name: PropTypes.string.isRequired,\n            ingredients: PropTypes.arrayOf(\n                PropTypes.shape({\n                    ingredient: PropTypes.string.isRequired,\n                    amount: PropTypes.string.isRequired,\n                })\n            ).isRequired,\n        })\n    ).isRequired,\n};\n\n\n\n/**\n * Component for rendering a single instruction.\n * @param {number} step Step number of the instruction\n * @param {string} description The description for the current instrucion step\n * @returns A styled .recipe-instruction div with a header that has the step and a styled \n *          .recipe-instruction-description div with the step description as content.\n */\nconst RecipeInstruction = ({ step, description, img }) => {\n    return (\n      <Fragment>\n        <div className=\"recipe-instruction\">\n            <h5>Step {step}</h5>\n            <div className=\"recipe-instruction-description mb-3\">\n                {description}\n            </div>\n            <img    className=\"recipe-instruction-image\" src={`/${img.replace(/\\\\/g, '/').replace('../client/public/', '')}`} \n                    alt={`Step ${step} instruction`} onError={(e) => e.target.style.display = 'none'} />\n        </div>\n      </Fragment>\n    );\n};\n\nRecipeInstruction.propTypes = {\n    step: PropTypes.number.isRequired,\n    description: PropTypes.string.isRequired,\n};\n\n/**\n * Component for rendering a list of instructions.\n * @param {Array[Object]} instructions Array of instructions to be rendered\n * @returns A .recipe-element div with a header and a styled .recipe-instructions-list div containing \n *          RecipeInstruction elements inside it.\n */\n const RecipeInstructionList = ({ instructions }) => {\n    return (\n        <Fragment>\n            <div className=\"recipe-element\">\n                <h3>Instructions</h3>\n                <div className=\"recipe-instructions-list\">\n                    {instructions.map((instruction, idx) => \n                        <RecipeInstruction step={instruction.step} description={instruction.instruction} \n                                            img={instruction.instruction_image} key={idx} />\n                    )}\n                </div>\n            </div>\n        </Fragment>\n    );\n};\n\nRecipeInstructionList.propTypes = {\n    instructions: PropTypes.array.isRequired,\n};\n\n/**\n * Component for rendering the header 'Additional instructions' and the additional instructions itself\n * @param {string} description  The content that should be shown under Additional instructions \n * @returns A .recipe-element div with a header and a styled .recipe-additional-instructions div containing \n *          the content of description prop inside it.\n */\nconst RecipeAdditionalInstructions = ({ description }) => {\n    return (\n      <Fragment>\n            <div className=\"recipe-element\">\n                <h3>Additional instructions</h3>\n                <div className=\"recipe-additional-instructions\">\n                    {description}\n                </div>\n            </div>\n      </Fragment>\n    );\n};\n\nRecipeAdditionalInstructions.propTypes = {\n    description: PropTypes.string.isRequired,\n};\n\n/**\n * Component for rendering a single comment\n * @param {string} content  Comment content in string format\n * @param {string} author  Username of the commenter in string format\n * @returns A single .recipe-comment div element with the specified content and author below it.\n */\n const RecipeComment = ({ content, author }) => {\n    return (\n      <Fragment>\n            <div className=\"recipe-comment mt-3 mb-3\">\n                <div className=\"recipe-comment-content\">\n                    {content}\n                </div>\n                <em>- {author}</em>\n            </div>\n      </Fragment>\n    );\n};\n\nRecipeComment.propTypes = {\n    content: PropTypes.string.isRequired,\n    author: PropTypes.string.isRequired,\n};\n\n/**\n * Component for rendering the header 'Comments' and the comments itself\n * @param {array}       this.props.comments  Array of comments that should be shown\n * @param {function}    this.props.handleCommentSubmit  Callback function for new comment submission\n * @param {loggedIn}    this.props.loggedIn Boolean to indicate whether the user is logged in\n * @returns A .recipe-element div with a header, a comment submission text area and a list of RecipeComment elements.\n */\n class RecipeComments extends React.Component {\n    constructor() {\n        super();\n\n        this.state = {\n            newComment: \"\",\n            error: null\n        }\n\n        this.handleInputChange = this.handleInputChange.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n    }\n\n    handleInputChange(e) {\n        this.setState({ newComment: e.target.value });\n    }\n\n    handleSubmit(e) {\n        e.preventDefault();\n        // check that comment is within bounds\n        if (this.state.newComment.length > 0 && this.state.newComment.length <= 1024) {\n            this.props.handleCommentSubmit(this.state.newComment);\n            this.setState({ newComment: \"\", error: \"\" });\n        } else {\n            this.setState({ error: \"Comment length must be between 1-1024 characters\"});\n        }\n    }\n\n    render() {\n        return (\n            <Fragment>\n                <div className=\"recipe-element\">\n                    <h3>Comments</h3>\n                    {this.props.loggedIn ? \n                        <form className=\"mt-4 mb-4\" onSubmit={this.handleSubmit}>\n                            <div className=\"form-group\">\n                                <label htmlFor=\"commentInputTextarea\"><h5>Add a new comment</h5></label>\n                                {this.state.error ? <div class=\"alert alert-danger\" role=\"alert\">{this.state.error}</div> : null}\n                                <textarea   className=\"form-control\" id=\"commentInputTextarea\" rows=\"3\" \n                                            onChange={this.handleInputChange} value={this.state.newComment}\n                                            maxLength={1024} required></textarea>\n                            </div>\n                            <button type=\"submit\" className=\"btn btn-primary btn-custom mt-2 mb-2\">Post comment</button>\n                        </form>\n                    : null}\n                    \n                    {this.props.comments.map(comment => \n                        <RecipeComment content={comment.comment} author={comment.username} key={comment.commentid} />\n                    )}\n                </div>\n            </Fragment>\n        );\n    }\n};\n\nRecipeComments.propTypes = {\n    comments: PropTypes.array.isRequired,\n    handleCommentSubmit: PropTypes.func.isRequired,\n    loggedIn: PropTypes.bool.isRequired,\n};\n\n/**\n * Component to render an individual recipe.\n * Stores all the relevant recipe data in its state, this.state.\n * @param   {string}  this.props.id   The recipe of the recipe being rendered by IndividualRecipe\n * @returns The whole recipe as a component using child components to render the parts inside it.\n */\nclass IndividualRecipe extends React.Component {\n    constructor(){\n        super();\n    \n        this.state = {\n            header: {\n                name: \"\",\n                author: \"\",\n                category: \"\",\n                bookmarks: 0,\n                bookmarked: false,\n                ratings: [],\n                rated: false,\n                stars: 0,\n            },\n            image: {\n                source: \"\",\n                alternative: \"\",\n            },\n            additionalInstructions: \"\",\n            tags: [],\n            ingredients: [],\n            instructions: [],\n            comments: [],\n            loggedIn: false\n        }\n\n        this.handleSettingRecipeData = this.handleSettingRecipeData.bind(this);\n        this.handleHeaderChange = this.handleHeaderChange.bind(this);\n        this.handleCommentSubmit = this.handleCommentSubmit.bind(this);\n    }\n\n    handleSettingRecipeData(data) {\n        data.main = data.main.replace(/\\\\\\\\/g, '\\\\');\n\n        // extract tags\n        let tags = [];\n        data.tags.forEach(element => {\n            tags.push(element.name);\n        });\n\n        // extract and format ingredient groups\n        let dataGroups = [];\n        Object.keys(data.groups).forEach(key => {\n            dataGroups.push({\n                name: key,\n                ingredients: data.groups[key]\n            });\n        });\n\n        this.setState({\n            header: {\n                name: data.title,\n                author: data.author,\n                category: data.category,\n                bookmarks: Number(data.bookmarks),\n                bookmarked: (Number(data.isBookmarked) === 1 ? true : false),\n                stars: Number(data.avgRating),\n                rated: Number(data.isRated)\n            },\n            image: {\n                source: data.main, \n                alternative: data.title\n            },\n            additionalInstructions: data.addInstructions,\n            tags: tags,\n            ingredients: dataGroups,\n            instructions: data.instructions,\n            comments: data.comments\n        })\n    }\n\n    componentDidMount(){\n        // set overflow-y to auto to negate recipe popup's 'hidden'\n        document.body.style.overflowY = 'auto';\n\n        // check logged in status for comments input rendering\n        let cookie =  document.cookie.split(\";\").map(cookie => cookie.split(\"=\")[0]);\n        for( let i = 0; i < cookie.length; i++)\n            cookie[i] = cookie[i].trim();\n        this.setState({loggedIn: cookie.includes(\"authentication\")});\n\n        // fetch recipe according to id\n        const recipe_id = this.props.match.params.id;\n        fetch(`/recipes/${recipe_id}`, {\n                method: 'GET',\n                credentials: 'include',\n            })\n            .then(res => res.json())\n            .then(res => this.handleSettingRecipeData(res))\n            .catch(err => this.props.history.push('/browse')\n        );\n\n        // scroll to the top of the page upon load\n        window.scrollTo(0, 0);\n    }\n\n    handleHeaderChange(attribute, value) {\n        let header = this.state.header;\n        header[attribute] = value;\n        this.setState({\n            header: header,\n        })\n    }\n\n    handleCommentSubmit(newComment) {\n        const recipe_id = this.props.match.params.id;\n        let url = `/recipes/${recipe_id}/comment`;\n        let comment = { comment: newComment };\n        fetch(url, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            credentials: 'include',\n            body: JSON.stringify(comment),\n        })\n        .then(response => {\n            if (response.ok) {\n                return response.json();\n            }\n            throw new Error('Something went wrong...');\n        })\n        .then(comment => {\n            let comments = this.state.comments;\n            comments.unshift({commentid: comment.commentid, comment: comment.comment, username: comment.author});\n            this.setState({ comments: comments });\n        })\n        .catch((error) => {\n            console.error(error);\n        });\n    }\n\n    render(){\n        return (\n            <Fragment>\n                <div className=\"recipe-container pb-5\">\n                    <div className=\"recipe-column-left\">\n                        <RecipeImage source={this.state.image.source} alternative={this.state.image.alternative} />\n                        <RecipeTagList tags={this.state.tags} />\n                    </div>\n                    <div className=\"recipe-column-right\">\n                        <RecipeHeader   name={this.state.header.name} author={this.state.header.author} \n                                        category={this.state.header.category} bookmarks={this.state.header.bookmarks} \n                                        bookmarked={this.state.header.bookmarked} stars={this.state.header.stars} \n                                        rated={this.state.header.rated} recipeid={this.props.match.params.id} \n                                        handleHeaderChange={this.handleHeaderChange} loggedIn={this.state.loggedIn} />\n                        <RecipeIngredientGroups ingredients={this.state.ingredients} />\n                        <RecipeInstructionList instructions={this.state.instructions} />\n                        <RecipeAdditionalInstructions description={this.state.additionalInstructions} />\n                        <RecipeComments comments={this.state.comments} handleCommentSubmit={this.handleCommentSubmit} \n                                        loggedIn={this.state.loggedIn} />\n                    </div>\n                </div>\n            </Fragment>\n        );\n    }\n};\n\nexport default withRouter(IndividualRecipe);","import React, { Fragment } from \"react\";\nimport { useParams } from 'react-router-dom'\n\n//components\nimport NavigationBar from \"../components/NavBar/NavBar\";\nimport IndividualRecipe from \"../components/IndividualRecipe/IndividualRecipe\";\n\nconst Recipe = () => {\n    const { id } = useParams();\n    return (\n        <Fragment>\n        <NavigationBar />\n        <div className=\"container-fluid\">\n            <div className=\"container pt-3\">\n                <IndividualRecipe id={id} />\n            </div>\n        </div>\n        </Fragment>\n    );\n}\n\nexport default Recipe;","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport Login from \"./pages/Login\";\nimport Registration from \"./pages/Registration\";\nimport About from \"./pages/About\";\nimport User from \"./pages/User\";\nimport AddRecipe from \"./pages/AddRecipe\";\nimport Recipe from \"./pages/Recipe\";\n\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Redirect\n} from \"react-router-dom\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router>\n      <Switch>\n\n        <Route exact path=\"/\">\n          <About />\n        </Route>\n\n        <Route exact path=\"/browse\">\n          <App />\n        </Route>\n\n        <Route exact path=\"/login\">\n          <Login />\n        </Route>\n\n        <Route exact path=\"/registration\">\n          <Registration />\n        </Route>\n\n        <Route path=\"/user/:username\">\n          <User />\n        </Route>\n\n        <Route path=\"/addrecipe\">\n          <AddRecipe />\n        </Route>\n\n        <Route path=\"/recipes/:id\">\n          <Recipe />\n        </Route>\n\n        <Redirect to='/' />\n\n      </Switch>\n    </Router>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}